СОДЕРЖАНИЕ
====================
- [ОБЪЕКТНОЕ ХРАНИЛИЩЕ](#ОБЪЕКТНОЕ-ХРАНИЛИЩЕ)
  - [Управление иерархической структурой хранилища объектов системы](#Управление-иерархической-структурой-хранилища-объектов-системы)
    - [Создание объектов-родителей](#Создание-объектов-родителей)
    - [Создание объектов-потомков](#Создание-объектов-потомков)
    - [Параметры контейнера](#Параметры-контейнера)
        - [Подсчет потомков](#Подсчет-потомков)
        - [Порядок сортировки потомков](#Порядок-сортировки-потомков)
        - [CQL-запрос](#CQL-запрос)
  - [Управление объектами](#Управление-объектами)
    - [Создание объектов](#Создание-объектов)
    - [Редактирование объектов](#Редактирование-объектов)
    - [Просмотр/запуск объектов](#Просмотр-запуск-объектов)
    - [Копирование объектов](#Копирование-объектов)
    - [Перемещение объектов](#Перемещение-объектов)
    - [Управление связями объектов](#Управление-связями-объектов)
        - [Создание связи](#Создание-связи)
        - [Удаление связи](#Удаление-связи)
    - [Переименование объектов](#Переименование-объектов)
    - [Добавление в избранное](#Добавление-в-избранное)
    - [Открытие новой вкладки с деревом потомков](#Открытие-новой-вкладки-с-деревом-потомков)
    - [Групповые операции с объектами](#Групповые-операции-с-объектами)
        - [Выделение объектов](#Выделение-объектов)
        - [Инвертирование выделения текущего уровня](#Инвертирование-выделения-текущего-уровня)
        - [Снятие выделения](#Снятие-выделения)
    - [Установка указателя текущего местоположения](#Установка-указателя-текущего-местоположения)
    - [Удаление объектов](#Удаление-объектов)
        - [Удаление](#Удаление)
        - [Восстановление из корзины](#Восстановление-из-корзины)
        - [Удаление из корзины](#Удаление-из-корзины)
    - [Права доступа](#Права-доступа)
    - [Индекс популярности](#Индекс-популярности)
    - [Управление версиями](#Управление-версиями)
    - [Просмотр подробной информации](#Просмотр-подробной-информации)
  - [Управление объектами в режиме просмотра](#Управление-объектами-в-режиме-просмотра)
  - [Управление объектами в режиме редактирования](#Управление-объектами-в-режиме-редактирования)
    - [Панель инструментов](#Панель-инструментов)
    - [Ввод и валидация значений](#Ввод-и-валидация-значений)
    - [Мультиплицируемая категория](#Мультиплицируемая-категория)
    - [Редактор форматируемого текста](#Редактор-форматируемого-текста)
  - [Создание/редактирование типов объектов](#Создание-редактирование-типов-объектов)
    - [Создание типа объекта](#Создание-типа-объекта)
    - [Редактирование типа объекта](#Редактирование-типа-объекта)
  - [Создание/редактирование категорий объектов](#Создание-редактирование-категорий-объектов)
    - [Создание категории объекта](#Создание-категории-объекта)
        - [Настройка поля с помощью визуального редактора](#Настройка-поля-с-помощью-визуального-редактора)
        - [Настройка поля с помощью панели настроек](#Настройка-поля-с-помощью-панели-настроек)
             - [Базовые](#Базовые)
             - [События](#События)
             - [Специальные](#Специальные)
    - [Редактирование категории объекта](#Редактирование-категории-объекта)
  - [Создание/редактирование формы](#Создание-редактирование-формы)
    - [Создание формы](#Создание-формы)
    - [Редактирование формы](#Редактирование-формы)
  - [Создание/редактирование утилиты](#Создание-редактирование-утилиты)
    - [Создание утилиты](#Создание-утилиты)
        - [Утилита URL](#Утилита-URL)
        - [Утилита «Таблица»](#Утилита-«Таблица»)
        - [Утилита «Мастер»](#Утилита-«Мастер»)
    - [Редактирование утилиты](#Редактирование-утилиты)
  - [Поиск объектов системы](#Поиск-объектов-системы)
  - [Табличное представление объектов системы](#Табличное-представление-объектов-системы)
- [ПОДСИСТЕМА ГЕОДАННЫХ](#ПОДСИСТЕМА-ГЕОДАННЫХ)
  - [Введение](#Введение)
  - [Управление геокодированными объектами. Универсальная геокатегория](#Управление-геокодированными-объектами-Универсальная-геокатегория)
    - [Работа с картой в универсальной геокатегории](#Работа-с-картой-в-универсальной-геокатегории)
    - [Добавление геоданных объекта](#Добавление-геоданных-объекта)
    - [Редактирование геоданных объекта](#Редактирование-геоданных-объекта)
    - [Экспорт/импорт геоданных объекта](#Экспортимпорт-геоданных-объекта)
  - [Работа с картографическими слоями](#Работа-с-картографическими-слоями)
    - [Порядок действий при создании группы/слоя](#Порядок-действий-при-создании-группыслоя)
    - [Создание группы слоев/картографического слоя](#Создание-группы-слоевкартографического-слоя)
    - [Создание постоянного векторного слоя](#Создание-постоянного-векторного-слоя)
    - [Создание временного векторного слоя](#Создание-временного-векторного-слоя)    
    - [Подключение удаленного растрового слоя](#Подключение-удаленного-растрового-слоя)
    - [Настройка группы/слоя](#Настройка-группыслоя)
        - [Общие настройки](#Общие-настройки)
        - [Настройки векторных слоев](#Настройки-векторных-слоев)
             - [Настройки кластеризации](#Настройки-кластеризации)
             - [Настройка отображения маркеров слоя](#Настройка-отображения-маркеров-слоя)
             - [Свойства всплывающего окна](#Свойства-всплывающего-окна)
             - [Кэширование данных](#Кэширование-данных)
             - [Экспорт геоданных слоя](#Экспорт-геоданных-слоя)
         - [Настройки растровых слоев](#Настройки-растровых-слоев)
  - [Управление геоданными на карте](#Управление-геоданными-на-карте)
    - [Меню управления геоподосновами](#Меню-управления-геоподосновами)
    - [Меню управления слоями](#Меню-управления-слоями)
    - [Меню инструментов](#Меню-инструментов)
    - [Печать карты](#Печать-карты)
- [ЖУРНАЛ ИЗМЕНЕНИЙ](#ЖУРНАЛ-ИЗМЕНЕНИЙ)
    
<a name="ОБЪЕКТНОЕ-ХРАНИЛИЩЕ"></a>
# ОБЪЕКТНОЕ ХРАНИЛИЩЕ

Объектное хранилище является отдельной подсистемой Платформы и предоставляет возможность осуществлять настройку хранения, управления и вывода данных. К основным функциям подсистемы относятся:

- управление структурой хранения данных;
- управление положением данных в БД;
- управление представлениями хранимых данных;
- управление процессами ввода, изменения, удаления данных;
- валидация данных;
- многовариантный поиск данных.

<a name="Управление-иерархической-структурой-хранилища-объектов-системы"></a>
## Управление иерархической структурой хранилища объектов системы

Базовой сущностью системы является объект. Объект может иметь различные представления: например, он может быть представлен в виде записи в таблице, объекта на карте или элемента дерева.

Дерево объектов системы имеет иерархическую структуру, между объектами существуют связи на уровне «родитель-потомок». Каждый объект системы может включать в себя несколько других объектов.

Если объект содержит в своем составе другие объекты, то он называется «родителем». Объект, который входит в его состав, является по отношению к «родителю» дочерним объектом и называется «потомком». Каждый потомок, в свою очередь, может являться «родителем» для других объектов. Дерево объектов системы может иметь неограниченное количество уровней вложенности.

<a name="Создание-объектов-родителей"></a>
### Создание объектов-родителей

В системе существуют следующие типы объектов-родителей (также – *контейнер, папка*):

- **Физический контейнер** – контейнер, который физически расположен в том месте дерева объектов, в котором он отображается. 
- **Контейнер связи** ![](https://github.com/citoruspm/GeoData/blob/master/20.png?raw=true) – контейнер, который представляет собой связь между физическим контейнером, расположенным в другом месте, и текущим контейнером. Текущий контейнер является для данного контейнера *Приемным родителем*. Реальное местоположение данного контейнера указано на <a href="#Просмотр-подробной-информации">странице подробной информации</a>, в строке **Родитель**. Основное преимущество данной связки заключается в том, что свойства и содержимое контейнера связи можно редактировать, при этом внесенные изменения сохраняются в соответствующем физическом контейнере.
- **CQL-контейнер** (*CQL* – Citorus Query Language, Язык запросов Citorus) – контейнер, который не содержит физических контейнеров/объектов и содержит только поисковый запрос. В CQL-контейнер помещаются *представления* контейнеров/объектов, соответствующих данному поисковому запросу.

Чтобы создать контейнер связи, выполните шаги, описанные в разделе <a href="#Создание-связи">Создание связи</a>.

Чтобы создать физический или CQL-контейнер, в дереве объектов выделите правой клавишей мыши объект, который будет являться родителем данного контейнера, и выполните команду контекстного меню **Создать > Папку** (рис. 1).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_obektov_roditelej_1.png?raw=true "Рисунок 1 – Создание контейнера")</center>

<center><small>Рисунок 1 – Создание контейнера</center></small>

Откроется карточка создаваемого контейнера (рис. 2), в которой необходимо заполнить поле **Название**. Чтобы сохранить контейнер, на панели инструментов нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_obektov_roditelej_2.png?raw=true "Рисунок 2 – Карточка контейнера")</center>

<center><small>Рисунок 2 – Карточка контейнера</center></small>

Дерево объектов автоматически обновится и в выбранной папке отобразится созданный контейнер. Чтобы выполнить настройку свойств контейнера, выполните шаги, описанные в разделе <a href="#Настройка-объекта-родителя">Настройка объекта-родителя</a>.

<a name="Создание-объектов-потомков"></a>
### Создание объектов-потомков

Чтобы создать объект, выделите в дереве объектов правой клавишей мыши контейнер, который будет являться родителем данного объекта, и выполните команду контекстного меню **Создать > Выбрать из списка** (рис. 3).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_obektov_1.png?raw=true "Рисунок 3 – Создание объекта")</center>

<center><small>Рисунок 3 – Создание объекта</center></small>

В окне **Выбор типа создаваемого объекта** (рис. 4) двойным щелчком мыши выберите из списка требуемый тип (подробнее о типах объектов см. в разделе <a href="#Создание-редактирование-типов-объектов">Создание/редактирование типов объектов</a>).

По умолчанию в верхней части списка отображаются системные типы, то есть типы, которые присутствуют в системе по умолчанию, а затем – типы объектов, созданные пользователями системы. 

Для быстрого поиска требуемого типа можно воспользоваться контекстным поиском. Для этого укажите в поле ввода любую часть названия типа и нажмите на клавишу **Enter**. В списке отобразятся только те типы объектов, которые соответствуют условиям поиска. Выберите требуемый тип двойным щелчком мыши.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_obektov_2.png?raw=true "Рисунок 4 – Окно Выбор типа создаваемого объекта")</center>

<center><small>Рисунок 4 – Окно **Выбор типа создаваемого объекта**</center></small>

Откроется карточка объекта в <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования</a> (пример представлен на рис. 5). Заполните в карточке требуемые поля и на панели инструментов нажмите на кнопку **Сохранить** ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true). Объект отобразится в выбранном контейнере.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_obektov_3.png?raw=true "Рисунок 5 – Карточка объекта Сигнал о лесоизменении")</center>

<center><small>Рисунок 5 – Карточка объекта **Сигнал о лесоизменении**</center></small>

Объект также можно создать с помощью команды контекстного меню **Создать > Последние** (рис. 46). При выполнении данной команды открывается список типов, которые выбирались пользователями при создании объектов в последнее время. При выборе какого-либо типа открывается карточка объекта данного типа в режиме редактирования (рис. 6).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_obektov_4.png?raw=true "Рисунок 6 – Команда Создать > Последние")</center>

<center><small>Рисунок 6 – Команда **Создать > Последние**</center></small>

<a name="Настройка-объекта-родителя"></a>
### Настройка объекта-родителя

Чтобы перейти в режим редактирования контейнера, выполните шаги, описанные в разделе <a href="#Редактирование-объектов">Редактирование объектов</a>.

<a name="Параметры-контейнера"></a>
#### Параметры контейнера

<a name="Подсчет-потомков"></a>
##### Подсчет потомков

С помощью <a href="#Мультиплицируемая-категория">мультиплицируемой категории</a> **Параметры контейнера** можно настроить отображение количества потомков в контейнере. Для этого в верхнем поле выберите значение **CountChild** (рис. 7). В нижнем поле установите значение **1**, чтобы данное условие выполнялось.

<center>![](https://github.com/citoruspm/GeoData/blob/master/podschet_potomkov_1.png?raw=true "Рисунок 7 – Мультиплицируемая категория Параметры контейнера")</center>

<center><small>Рисунок 7 – Мультиплицируемая категория **Параметры контейнера**</center></small>

Сохраните карточку контейнера и обновите дерево объектов: сверните его и разверните снова. После этого справа от названия контейнера отобразится количество объектов, которое содержится в данном контейнере (рис. 8).

<center>![](https://github.com/citoruspm/GeoData/blob/master/podschet_potomkov_2.png?raw=true "Рисунок 8 – Количество потомков")</center>

<center><small>Рисунок 8 – Количество потомков</center></small>

<a name="Порядок-сортировки-потомков"></a>
##### Порядок сортировки потомков

Чтобы настроить порядок сортировки объектов в контейнере, в верхнем поле <a href="#Мультиплицируемая-категория">мультиплицируемой категории</a> **Параметры контейнера** выберите значение **Order** (рис. 9).

В нижнем поле выберите способ сортировки:

- **AlfaUp** – текстовая сортировка от А до Я.
- **AlfaDown** – текстовая сортировка от Я до А.
- **PopUp** – сортировка от большего <a href="#Индекс-популярности">весового индекса</a> к меньшему. 
- **PopDown** – сортировка от меньшего <a href="#Индекс-популярности">весового индекса</a> к большему.

<center>![](https://github.com/citoruspm/GeoData/blob/master/porjadok_sortirovki_potomkov_1.png?raw=true "Рисунок 9 – Количество потомков")</center>

<center><small>Рисунок 9 – Количество потомков</center></small>

<a name="CQL-запрос"></a>
#### CQL-запрос

При создании контейнер-родитель является пустым и не содержит дочерних элементов. Если в такой контейнер следует поместить *представления* каких-либо объектов (то есть сделать из пустого контейнера CQL-контейнер), в нем необходимо создать CQL-запрос. Приведем абстрактный пример: в корневой папке **Шкаф** требуется найти все объекты типа **Кружка**, у которых в свойстве (поле) **Цвет** указано значение **Красный**.

Теперь рассмотрим создание CQL-запроса на примере реальной системы. Допустим, требуется создать следующий запрос: в корневой папке дерева элементов **КЕДР** найти все объекты типа **Сигнал о лесоизменении**, у которых в свойстве (поле) **Выдел** указано значение **2**.

Чтобы перейти в редактор CQL-запроса, в карточке контейнера следует нажать на кнопку **Открыть в редакторе** (рис. 9).

Чтобы указать контейнер для поиска объектов, в **Редакторе CQL** (рис. 10), в поле **Контейнер для поиска** следует нажать на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/32.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/cql_zapros_1.png?raw=true "Рисунок 10 – Редактор CQL")</center>

<center><small>Рисунок 10 – Редактор CQL</center></small>

В окне, представленном на рисунке 11, двойным щелчком мыши следует выбрать папку, в которой требуется выполнить поиск объектов. В рассматриваемом примере – корневую папку **КЕДР**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/cql_zapros_2.png?raw=true "Рисунок 11 – Выбор контейнера для поиска объектов")</center>

<center><small>Рисунок 11 – Выбор контейнера для поиска объектов</center></small>

Чтобы указать тип объектов для поиска, в поле **Фильтр по типу** (рис. 12, цифра 1) следует воспользоваться контекстным поиском по началу названия типа объектов. В результатах поиска следует выделить требуемый тип. В рассматриваемом примере – тип **Сигнал о лесоизменении**.

Чтобы указать наименование поля объекта, по значению в котором следует осуществлять выбор,  в блоке полей **Фильтр по свойствам** следует нажать на кнопку **Добавить** (рис. 12, цифра 2).

В таблицу ниже добавится пустая строка (рис. 12, цифра 3). Чтобы сделать в ней какое-либо поле активным, следует дважды щелкнуть по нему левой клавишей мыши.

В поле **Категория** следует выбрать категорию, то есть блок полей, в котором находится требуемое поле для поиска.

<center>![](https://github.com/citoruspm/GeoData/blob/master/cql_zapros_3.png?raw=true "Рисунок 12 – Условия поиска объектов")</center>

<center><small>Рисунок 12 – Условия поиска объектов</center></small>

В поле **Свойство** (рис. 13) следует выбрать свойство, то есть поле, в котором следует осуществлять поиск. В рассматриваемом примере – **Выдел**.

В поле **Значение** следует указать значение данного поля, по которому необходимо отбирать объекты. В рассматриваемом примере – **2** (Выдел №2).

С помощью поля **Операнд** можно указать дополнительное условие для поискового запроса CQL. По умолчанию применяется математическое значение **И**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/cql_zapros_4.png?raw=true "Рисунок 13 – Условия поиска объектов")</center>

<center><small>Рисунок 13 – Условия поиска объектов</center></small>

Чтобы сохранить CQL-запрос, на панели инструментов нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true) (рис. 12).

Чтобы в CQL-контейнере отобразились представления объектов, соответствующих созданному запросу, следует обновить дерево объектов. Для этого требуется свернуть и снова развернуть содержимое корневого контейнера.

<a name="Управление-объектами"></a>
## Управление объектами

Управление объектами системы осуществляется с помощью команд контекстного меню, которое открывается при щелчке мышью на любом объекте в дереве объектов. Некоторые команды контекстного меню дублируются на панели инструментов карточки объекта в <a href="#Управление-объектами-в-режиме-просмотра">режиме просмотра</a> и <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования</a>.

<a name="Создание-объектов"></a>
### Создание объектов

Чтобы создать в дереве объектов контейнер, выполните шаги, описанные в разделе <a href="#Создание-объектов-родителей">Создание объектов-родителей</a>.

Чтобы создать в дереве объектов объект, выполните шаги, описанные в разделе <a href="#Создание-объектов-потомков">Создание объектов-потомков</a>.

<a name="Редактирование-объектов"></a>
### Редактирование объектов

Чтобы открыть какой-либо контейнер/объект в режиме редактирования, выполните одно из следующих действий:

- В дереве объектов выделите требуемый контейнер/объект одним щелчком левой клавиши мыши. В новой вкладке откроется карточка данного контейнера/объекта в режиме просмотра (рис. 14). На панели инструментов нажмите на кнопку **Редактировать объект** ![](https://github.com/citoruspm/GeoData/blob/master/26.png?raw=true).<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_obektov_1.png?raw=true "Рисунок 14 – Карточка объекта в режиме просмотра")</center><br><center><small>Рисунок 14 – Карточка объекта в режиме просмотра</center></small><br>
- В дереве объектов выделите требуемый контейнер/объект правой клавишей мыши и выполните для него команду контекстного меню **Редактировать** (рис. 15).

<center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_obektami_v_rezhime_redaktirovanija_1.png?raw=true "Рисунок 15 – Команда Редактировать")</center>

<center><small>Рисунок 15 – Команда **Редактировать**</center></small>

Откроется страница редактирования контейнера/объекта (рис. 16). Описание инструментов данной страницы представлено в разделе <a href="#Управление-объектами-в-режиме-редактирования">Управление объектами в режиме редактирования</a>.

<center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_obektov_3.png?raw=true "Рисунок 16 – Страница редактирования контейнера")</center>

<center><small>Рисунок 16 – Страница редактирования контейнера</center></small>

<a name="Просмотр-запуск-объектов"></a>
### Просмотр/запуск объектов

По поведенческим моделям выделяются два основных вида объектов системы: простые информационные объекты и утилиты.

Если команда контекстного меню **Просмотр/Запуск - Просмотр объектов/Запуск утилит**  (рис. 17) выполняется для простого информационного объекта, то данный объект открывается в режиме просмотра.

Если команда выполняется для утилиты, то осуществляется запуск данной утилиты.

<center>![](https://github.com/citoruspm/GeoData/blob/master/prosmotr_zapusk_1.png?raw=true "Рисунок 17 – Команда Просмотр/Запуск")</center>

<center><small>Рисунок 17 – Команда **Просмотр/Запуск**</center></small>

<a name="Копирование-объектов"></a>
### Копирование объектов

Создание контейнеров/объектов копированием можно выполнять в контейнерах любого типа, кроме CQL-контейнеров.

Команду **Копировать** можно выполнить одним из следующих способов:

- Выполните для контейнера/объекта, копию которого требуется создать в системе, команду контекстного меню **Копировать** (рис. 18).<br><center>![](https://github.com/citoruspm/GeoData/blob/master/kopirovanie_obektov_1.png?raw=true "Рисунок 18 – Копирование объекта")</center><br> <center><small>Рисунок 18 – Копирование объекта</center></small>

- Откройте <a href="#Просмотр-подробной-информации">страницу подробной информации</a> об объекте и нажмите на кнопку **Копировать** ![](https://github.com/citoruspm/GeoData/blob/master/24.png?raw=true).

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 19.

<center>![](https://github.com/citoruspm/GeoData/blob/master/kopirovanie_obektov_2.png?raw=true "Рисунок 19 – Всплывающее сообщение")</center>

<center><small>Рисунок 19 – Всплывающее сообщение</center></small>

Выделите в дереве объектов контейнер, в который следует поместить копию, и выполните для него команду контекстного меню **Вставить копированием** (рис. 20).

<center>![](https://github.com/citoruspm/GeoData/blob/master/kopirovanie_obektov_3.png?raw=true "Рисунок 20 – Вставка копии объекта")</center>

<center><small>Рисунок 20 – Вставка копии объекта</center></small>

<a name="Перемещение-объектов"></a>
### Перемещение объектов

Перемещение контейнеров/объектов системы можно выполнять между контейнерами любого типа, кроме CQL-контейнеров.

Команду **Перенести** можно выполнить одним из следующих способов:

- Выделите требуемый контейнер/объект в дереве правой клавишей мыши и выполните для него команду контекстного меню **Перенести** (рис. 21). <br> <center>![](https://github.com/citoruspm/GeoData/blob/master/peremeshhenie_obektov_1.png?raw=true "Рисунок 21 – Команда **Перенести**")</center><br><center><small>Рисунок 21 – Команда **Перенести**</center></small>

- Откройте <a href="#Просмотр-подробной-информации">страницу подробной информации</a> об объекте и нажмите на кнопку **Перенести** ![](https://github.com/citoruspm/GeoData/blob/master/25.png?raw=true).

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 22.

<center>![](https://github.com/citoruspm/GeoData/blob/master/peremeshhenie_obektov_2.png?raw=true "Рисунок 22 – Всплывающее сообщение")</center>

<center><small>Рисунок 22 – Всплывающее сообщение</center></small>

Чтобы вставить объект в требуемый контейнер, выполните для данного контейнера команду **Вставить переносом** (рис. 23).

<center>![](https://github.com/citoruspm/GeoData/blob/master/peremeshhenie_obektov_3.png?raw=true "Рисунок 23 – Вставка объекта")</center>

<center><small>Рисунок 23 – Вставка объекта</center></small>

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 24.

<center>![](https://github.com/citoruspm/GeoData/blob/master/peremeshhenie_obektov_4.png?raw=true "Рисунок 24 – Всплывающее сообщение")</center>

<center><small>Рисунок 24 – Всплывающее сообщение</center></small>

<a name="Управление-связями-объектов"></a>
### Управление связями объектов

<a name="Создание-связи"></a>
#### Создание связи

Чтобы создать связь объекта/контейнера с каким-либо контейнером, выделите в дереве требуемый объект/контейнер правой клавишей мыши и выполните для него команду контекстного меню **Копировать** (рис. 25).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_svjazi_1.png?raw=true "Рисунок 25 – Копирование объекта")</center>

<center><small>Рисунок 25 – Копирование объекта</center></small>

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 26.

<center>![](https://github.com/citoruspm/GeoData/blob/master/kopirovanie_obektov_2.png?raw=true "Рисунок 26 – Всплывающее сообщение")</center>

<center><small>Рисунок 26 – Всплывающее сообщение</center></small>

Затем выделите в дереве объектов контейнер, в котором необходимо создать связь, и выполните для него команду контекстного меню **Вставить связь** (рис. 27). Содержимое контейнера автоматически обновится и внутри него отобразится контейнер/объект связи. Контейнеры/объекты связи отмечаются в дереве иконками ![](https://github.com/citoruspm/GeoData/blob/master/20.png?raw=true) и ![](https://github.com/citoruspm/GeoData/blob/master/21.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_svjazi_3.png?raw=true "Рисунок 27 – Вставка  связи")</center>

<center><small>Рисунок 27 – Вставка связи</center></small>

<a name="Удаление-связи"></a>
#### Удаление связи

При удалении связи контейнера/объекта с контейнером можно:

- разорвать связь контейнера/объекта с контейнером;
- разорвать связь контейнера/объекта с контейнером, но создать в текущем контейнере физическую копию контейнера/объекта, с которым разрывается связь.

Чтобы разорвать связь контейнера/объекта с контейнером без создания копии, выполните одно из следующих действий:

- Выделите требуемый контейнер/объект в дереве правой клавишей мыши и выполните для него команду контекстного меню **Удалить связь > Удалить связь** (рис. 28).

<center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_svjazi_1.png?raw=true "Рисунок 28 – Команда **Удалить связь**")</center>

<center><small>Рисунок 28 – Команда Удалить связь</center></small>

- Откройте <a href="#Просмотр-подробной-информации">страницу подробной информации</a> о требуемом контейнере и в строке **Приемные родители** нажмите на кнопку **Удалить связь** ![](https://github.com/citoruspm/GeoData/blob/master/22.png?raw=true) (рис. 29).

<center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_svjazi_4.png?raw=true "Рисунок 29 – Удаление связи с помощью страницы подробной информации")</center>

<center><small>Рисунок 29 – Удаление связи с помощью страницы подробной информации</center></small>

Чтобы разорвать связь контейнера/объекта с контейнером, но создать в этом контейнере его физическую копию, выполните для данного контейнера/объекта команду контекстного меню  **Удалить связь > Удалить связь, оставить копию** (рис. 28).

<a name="Переименование-объектов"></a>
### Переименование объектов

Изменить название объекта системы можно одним из следующих способов:

- В <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования объекта</a>.
- С помощью команды контекстного меню. Для этого выделите требуемый объект правой клавишей мыши и выполните команду **Переименовать** (рис. 30).

<center>![](https://github.com/citoruspm/GeoData/blob/master/pereimenovanie_obektov_1.png?raw=true "Рисунок 30 – Команда **Переименовать**")</center>

<center><small>Рисунок 30 – Команда **Переименовать**</center></small>

В диалоговом окне, представленном на рисунке 31, укажите новое имя объекта и нажмите на кнопку **ОК**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/pereimenovanie_obektov_2.png?raw=true "Рисунок 31 – Диалоговое окно")</center>

<center><small>Рисунок 31 – Диалоговое окно</center></small>

<a name="Добавление-в-избранное"></a>
### Добавление в избранное 

В составе дерева объектов отображается контейнер (папка) пользователя, под учетной записью которого выполнен вход в систему в настоящий момент. В папку пользователя входит папка **Избранные**. В данной папке пользователь может создать набор связей (ссылок) на контейнеры/объекты системы, к которым он обращается в процессе работы чаще всего.

Чтобы поместить связь с каким-либо контейнером/объектом в папку **Избранное**, следует выделить его в дереве объектов правой клавишей мыши и выполнить команду контекстного меню **Открыть > Вкладку Избранные и добавить в неё текущий объект** (рис. 32).

<center>![](https://github.com/citoruspm/GeoData/blob/master/dobavlenie_v_izbrannoe_1.png?raw=true "Рисунок 32 – Добавление связи объекта в папку **Избранные**")</center>

<center><small>Рисунок 32 – Добавление связи объекта в папку **Избранные**</center></small>

Чтобы созданный контейнер/объект связи отобразился в папке **Избранные**, следует обновить ее содержимое. Для этого необходимо свернуть и развернуть дочерние элементы папки.

<center>![](https://github.com/citoruspm/GeoData/blob/master/dobavlenie_v_izbrannoe_2.png?raw=true "Рисунок 33 – Контейнер связи в папке **Избранные**")</center>

<center><small>Рисунок 33 – Контейнер связи в папке **Избранные**</center></small>

Если требуется удалить связь какого-либо контейнера/объекта с папкой **Избранные**, следует выполнить действия, описанные в разделе <a href="#Удаление-связи">Удаление связи</a>.

<a name="Открытие-новой-вкладки-с-деревом-потомков"></a>
### Открытие новой вкладки с деревом потомков

Если пользователь ведет работу с объектами только одного контейнера-родителя или контейнера-потомка, администратор может настроить систему таким образом, чтобы для этого пользователя при входе в систему отображался только один требуемый контейнер.

Для этого администратору следует войти в систему под учетной записью данного пользователя, выделить требуемый контейнер в дереве объектов правой клавишей мыши и выполнить команду контекстного меню **Открыть > Новую вкладку с деревом потомков** (рис. 32).

В новой вкладке откроется дерево объектов, которое содержит:

- выбранный контейнер со всем его содержимым,
- папку пользователя,
- корзину.

Затем администратору следует закрыть все другие вкладки системы, если они были открыты и выполнить команду главного меню **Настройки > Профили > Сохранить как** (рис. 34).

<center>![](https://github.com/citoruspm/GeoData/blob/master/otkrytie_novoj_vkladki_1.png?raw=true "Рисунок 34 – Главное меню")</center>

<center><small>Рисунок 34 – Главное меню</center></small>

Откроется диалоговое окно, представленное на рисунке 35, в котором следует ввести название профиля. По умолчанию профилю присваивается имя в формате **<имя пользователя> new**. При необходимости после названия профиля можно поставить точку с запятой и указать комментарий к данному профилю. Чтобы сохранить профиль, следует нажать на кнопку **ОК**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/otkrytie_novoj_vkladki_2.png?raw=true "Рисунок 35 – Диалоговое окно")</center>

<center><small>Рисунок 35 – Диалоговое окно</center></small>

При следующем входе пользователя в систему для него будет загружена конфигурация дерева объектов, сохраненная в данном профиле.

<a name="Групповые-операции-с-объектами"></a>
### Групповые операции с объектами

Для групп объектов в системе можно выполнять следующие операции:

- <a href="#Копирование-объектов">Копировать</a>,
- <a href="#Перемещение-объектов">Перенести</a>,
- <a href="#Создание-связи">Вставить связь</a>,
- <a href="#Удаление-связи">Удалить связь</a>,
- <a href="#Удаление-объектов">Удалить</a>.

<a name="Выделение-объектов"></a>
#### Выделение объектов

Чтобы выполнить какую-либо команду для группы объектов, их следует выделить в дереве. Для этого нажмите на клавиатуре клавишу **Shift** и проведите над требуемыми объектами курсором мыши. Объекты окрасятся в оранжевый цвет (рис. 36).

<center>![](https://github.com/citoruspm/GeoData/blob/master/vydelenie_obektov_1.png?raw=true "Рисунок 36 – Выделенные объекты")</center>

<center><small>Рисунок 36 – Выделенные объекты</center></small>

<a name="Инвертирование-выделения-текущего-уровня"></a>
#### Инвертирование выделения текущего уровня

*Инвертирование* - это приведение объектов в противоположное состояние. Если в контейнере выделены какие-либо объекты, то при выполнении команды контекстного меню **Выделить > Инвертировать выделение текущего уровня** (рис. 37):

- отменяется выделение выбранных объектов,
- выделяются все остальные объекты в текущем контейнере.

<center>![](https://github.com/citoruspm/GeoData/blob/master/invertirovat_vydelenie_1.png?raw=true "Рисунок 37 – Команды для выделения объектов")</center>

<center><small>Рисунок 37 – Команды для выделения объектов</center></small>

<a name="Снятие-выделения"></a>
#### Снятие выделения

Чтобы отменить выделение одного или нескольких объектов, выполните для них команду контекстного меню **Выделить > Снять выделение** (рис. 37).

<a name="Установка-указателя-текущего-местоположения"></a>
### Установка указателя текущего местоположения

Если в дереве объектов требуется выполнить поиск контейнера/объекта по его названию или по содержимому, выделите контейнер, для которого искомый объект/контейнер является дочерним. Если родительский контейнер неизвестен, выделите корневой контейнер.

Выполните для выделенного контейнера команду контекстного меню **Выделить > Установить указатель текущего местоположения** (рис. 37). Строка с названием контейнера окрасится в оранжевый цвет (рис. 38).

Затем откройте поисковую форму, как это описано в разделе <a href="#Поиск-объектов-системы">Поиск объектов системы</a>.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ustanovka_ukazatelja_1.png?raw=true "Рисунок 38 – Переход к поисковой форме")</center>

<center><small>Рисунок 38 – Переход к поисковой форме</center></small>

<a name="Удаление-объектов"></a>
### Удаление объектов

Удаление контейнеров/объектов в системе можно выполнять следующими способами:

- **С возможностью восстановления** - способ, который используется в системе по умолчанию. После удаления объекты помещаются в корзину, из которой при необходимости их можно восстановить.
- **Без возможности восстановления** - объекты удаляются из системы насовсем, минуя корзину. Данные объекты не подлежат восстановлению.

<a name="Удаление"></a>
#### Удаление

Чтобы удалить один или несколько контейнеров и/или объектов системы, выделите их правой клавишей мыши и выполните команду контекстного меню **Удалить** (рис. 39).

<center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_obektov_1.png?raw=true "Рисунок 39 – Команда контекстного меню **Удалить**")</center>

<center><small>Рисунок 39 – Команда контекстного меню **Удалить**</center></small>

Откроется диалоговое окно, представленное на рисунке 40. Если выбранные контейнеры/объекты следует удалить, минуя корзину, поставьте соответствующий флажок. Если объекты следует отправить в корзину, данный флажок устанавливать не нужно. Нажмите на кнопку **Удалить**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_obektov_2.png?raw=true "Рисунок 40 – Диалоговое окно")</center>

<center><small>Рисунок 40 – Диалоговое окно</center></small>

<a name="Восстановление-из-корзины"></a>
#### Восстановление из корзины

Чтобы восстановить один или несколько контейнеров и/или объектов из корзины, разверните содержимое папки **Корзина** (рис. 41) нажатием на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true). Выделите требуемые контейнеры/объекты <a href="#Выделение-объектов">стандартным способом</a> и выполните для них команду контекстного меню **Восстановить**.

Восстановленные контейнеры/объекты переместятся в то место дерева объектов, в котором они находились до удаления.

<center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_obektov_3.png?raw=true "Рисунок 41 – Управление объектами в корзине")</center>

<center><small>Рисунок 41 – Управление объектами в корзине</center></small>

<a name="Удаление-из-корзины"></a>
#### Удаление из корзины

Если один или несколько контейнеров и/или объектов системы, которые расположены в корзине, следует удалить из системы, выполните для них команду контекстного меню **Удалить окончательно** (рис. 41).

<a name="Права-доступа"></a>
### Права доступа

Чтобы определить права доступа к какому-либо контейнеру/объекту системы, выделите его правой клавишей мыши и выполните команду контекстного меню **Права доступа** (рис. 42).

<center>![](https://github.com/citoruspm/GeoData/blob/master/prava_dostupa_1.png?raw=true "Рисунок 42 – Команда Права доступа")</center>

<center><small>Рисунок 42 – Команда **Права доступа**</center></small>

Откроется страница редактирования прав (рис. 43), которая содержит следующие настройки:

- **Наследовать права** – если флажок установлен, контейнер/объект наследует права родительского контейнера.
- **Чтение** – группа настроек для определения прав на просмотр объекта. Если у пользователя нет данного права, то данный объект не отображается для него в дереве объектов системы.
- **Запись** – группа настроек для определения прав на <a href="#Редактирование-объектов">редактирование объекта</a>.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/prava_dostupa_2.png?raw=true "Рисунок 43 – Настройки прав доступа")</center><br><center><small>Рисунок 43 – Настройки прав доступа</center></small><br>
- **Исполнение** (рис. 44) – группа настроек для объектов-утилит. Определяет права на <a href="#Просмотр-запуск-объектов">запуск данных объектов</a>.
- **Удаление** – группа настроек для определения прав на <a href="#Удаление-объектов">удаление объекта</a>.
- **Назначение прав доступа** – группа настроек для определения прав на изменение прав доступа к объекту.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/prava_dostupa_3.png?raw=true "Рисунок 44 – Настройки прав доступа")</center><br><center><small>Рисунок 44 – Настройки прав доступа</center></small>

В группах настроек, перечисленных выше, содержится идентичный набор инструментов, с помощью которого можно назначить права указанным пользователям/группам пользователей или всем пользователям/группам пользователей, кроме указанных:

- **Пользователи** – если право следует назначить или ограничить для одного или нескольких пользователей системы, которые входят в разные пользовательские группы, то в данном поле необходимо указать имена этих пользователей. Имена следует выбрать из выпадающего списка, который разворачивается при щелчке мышью на данном поле. Если список пользователей слишком велик, следует воспользоваться контекстным поиском: при вводе в поле любой части имени пользователя список сократится до набора имен, соответствующих указанным условиям поиска.

- **Группы** – если право следует назначить или ограничить для одной или нескольких групп пользователей, то в данном поле необходимо указать имена этих групп. Имена следует выбрать из выпадающего списка, который разворачивается при щелчке мышью на данном поле. Если список пользователей слишком велик, следует воспользоваться контекстным поиском: при вводе в поле любой части имени пользователя список сократится до набора имен, соответствующих указанным условиям поиска.

- **Остальные** – данный флажок следует установить, если в полях **Пользователи** и **Группы** указаны пользователи/группы пользователей, для которых следует ограничить доступ к текущему контейнеру/объекту.

<a name="Индекс-популярности"></a>
### Индекс популярности

В системе существуют два способа сортировки объектов в контейнерах:

- **В алфавитном порядке** – от А до Я или от Я до А.
- **По весовому индексу** – весовой индекс назначается каждому объекту автоматически при его создании. Текущий весовой индекс объекта отображается на <a href="#Просмотр-подробной-информации">странице подробной информации об объекте</a>.

Выбор способа сортировки объектов в контейнере осуществляется на странице редактирования данного контейнера, в группе полей **Параметры контейнера** (см. раздел <a href="#Редактирование-объектов">Редактирование объектов</a>).

Для изменения весового индекса объектов, и, как следствие, порядка их расположения в контейнере, предназначены следующие команды контекстного меню (рис. 45):

- **Нравится** – увеличить весовой индекс объекта и поменять его местами с предыдущим.
- **Не нравится** – уменьшить весовой индекс объекта и поменять его местами с последующим.
- **Поднять вверх** – сделать объект первым в списке дочерних элементов данного контейнера.
- **Опустить вниз** – сделать объект последним в списке дочерних элементов данного контейнера.
- **Зафиксировать текущий вес** – если для объекта выполнена данная команда, то команды **Нравится/Не нравится** и **Поднять вверх/Опустить вниз** для него не выполняются. Положение объекта при этом не фиксируется, и другие объекты могут смещать данный объект вверх/вниз, получая больший/меньший вес.
- **Отключить фиксацию веса** – отменить действие команды **Зафиксировать текущий вес**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/indeks_populjarnosti_1.png?raw=true "Рисунок 45 – Команды для изменения весового индекса объекта")</center>

<center><small>Рисунок 45 – Команды для изменения весового индекса объекта</center></small>

<a name="Управление-версиями"></a>
### Управление версиями

При каждом редактировании контейнера/объекта в системе сохраняется его предыдущая версия.

Чтобы просмотреть список версий какого-либо контейнера/объекта, выполните одно из следующих действий:

- Выполните для требуемого контейнера/объекта команду контекстного меню **Свойства объекта > Версии > Управление версиями** (рис. 46). Страница управления версиями откроется в новой вкладке (рис. 48).<br><center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_versijami_1.png?raw=true "Рисунок 46 – Команды для управления версиями объекта")</center><br> <center><small>Рисунок 46 – Команды для управления версиями объекта</center></small>

- Выделите требуемый контейнер/объект левой клавишей мыши. В новой вкладке откроется карточка данного контейнера/объекта (рис. 47). На панели инструментов в выпадающем списке **Действие** выберите команду **Управление версиями объекта**.<br><center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_versijami_2.png?raw=true "Рисунок 47 – Панель инструментов карточки контейнера/объекта")</center><br> <center><small>Рисунок 47 – Панель инструментов карточки контейнера/объекта</center></small>

В новой вкладке откроется страница управления версиями (рис. 48), которая содержит следующие инструменты:

1.  **Фильтр** – поле для контекстного поиска по названию версии. По умолчанию каждой версии присваивается название в формате **<Название объекта><Время сохранения версии><Дата сохранения версии><Часовой пояс>**.
2. **Список версий**.
3. **Командные кнопки**:
 - **Просмотр** – открыть в новом окне версию объекта, выделенного в списке.
 - **Восстановить** – заменить текущую версию на версию, выделенную в списке.
 - **Удалить** – удалить версию, выделенную в списке.

<center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_versijami_3.png?raw=true "Рисунок 48 – Страница управления версиями")</center>

<center><small>Рисунок 48 – Страница управления версиями</center></small>

<a name="Просмотр-подробной-информации"></a>
### Просмотр подробной информации

Чтобы просмотреть подробную информацию о каком-либо контейнере/объекте системы, выполните одно из следующих действий:

- Выделите требуемый контейнер/объект правой клавишей мыши и выполните для него команду контекстного меню **Свойства объекта > Информация об объекте** (рис. 49). Страница с подробной информацией о контейнере/объекте откроется в новой вкладке (рис. 51).

<center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_svjazi_2.png?raw=true "Рисунок 49 – Команда **Информация об объекте**")</center>

<center><small>Рисунок 49 – Команда **Информация об объекте**</center></small>

- Выделите требуемый контейнер/объект левой клавишей мыши. В новой вкладке откроется карточка данного контейнера/объекта (рис. 50). На панели инструментов в выпадающем списке **Действие** выберите команду **Подробная информация**.<br><br> <center>![](https://github.com/citoruspm/GeoData/blob/master/udalenie_svjazi_3.png?raw=true "Рисунок 50 – Панель инструментов карточки контейнера/объекта")</center><br> <center><small>Рисунок 50 – Панель инструментов карточки контейнера/объекта</center></small><br> В новой вкладке откроется страница с подробной информацией о контейнере/объекте (рис. 51).

<center>![](https://github.com/citoruspm/GeoData/blob/master/prosmotr_informacii_3.png?raw=true "Рисунок 51 – Страница подробной информации об объекте")</center>

<center><small>Рисунок 51 – Страница подробной информации об объекте</center></small>

На странице представлены следующие характеристики объекта:

- **Идентификатор объекта**.
- **Имя объекта**.
- **Тип объекта**.
- **Родитель** – папка, в которой объект расположен физически.
- **Приемные родители** – если для объекта создана связь с каким-либо контейнером системы, в данной строке указано название этого контейнера (подробнее см. <a href="#Управление-связями-объектов">Управление связями объектов</a>). 
- **Создан** – дата и время создания объекта в системе.
- **Последнее изменение** – дата и время последнего изменения объекта.
- **Весовой индекс** – см. раздел <a href="#Индекс-популярности">Индекс популярности</a>.
- **JSON представление объекта** – информация для разработчиков.

Страница подробной информации об объекте содержит следующие командные кнопки:<br>
![](https://github.com/citoruspm/GeoData/blob/master/24.png?raw=true) **Копировать объект в буфер обмена** – см. раздел <a href="#Копирование-объектов">Копирование объектов</a>.<br>
![](https://github.com/citoruspm/GeoData/blob/master/25.png?raw=true) **Перенести объект** – см. раздел <a href="#Перемещение-объектов">Перемещение объектов</a>.<br>
![](https://github.com/citoruspm/GeoData/blob/master/22.png?raw=true) **Разорвать связь** – разорвать связь объекта с приемным родителем (см. раздел <a href="#Удаление-связи">Удаление связи</a>).

<a name="Управление-объектами-в-режиме-просмотра"></a>
## Управление объектами в режиме просмотра

При выделении какого-либо контейнера/объекта левой клавишей мыши данный объект открывается в режиме просмотра (рис. 52).

<center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_obektami_v_rezhime_prosmotra_1.png?raw=true "Рисунок 52 – Режим просмотра")</center>

<center><small>Рисунок 52 – Режим просмотра</center></small>

Для управления объектами в режиме просмотра предназначена панель инструментов, на которой расположены:

- Кнопка **Редактировать объект** ![](https://github.com/citoruspm/GeoData/blob/master/26.png?raw=true) – для перехода в <a href="#Управление-объектами-в-режиме-редактирования">режим редактирования объекта</a>.
- Выпадающий список **Действие**, с помощью которого можно выполнить следующие команды:
  - <a href="#Управление-версиями">Управление версиями объекта</a>.
  - <a href="#Просмотр-подробной-информации">Подробная информация</a>.
  - **Протокол** – при выполнении данной команды открывается страница (рис. 53), на которой представлена информация об изменениях объекта: дата и время изменения; имя пользователя, который изменил объект; действие, которое было выполнено с объектом (перенос, редактирование и т.д.). Данная информация предназначена только для просмотра и недоступна для редактирования.

<center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_obektami_v_rezhime_prosmotra_2.png?raw=true "Рисунок 53 – Протокол")</center>

<center><small>Рисунок 53 – Протокол</center></small>

<a name="Управление-объектами-в-режиме-редактирования"></a>
## Управление объектами в режиме редактирования

Чтобы перейти в режим редактирования объекта, выполните действия, описанные в разделе <a href="#Редактирование-объектов">Редактирование объектов</a>.

<a name="Панель-инструментов"></a>
### Панель инструментов

Для управления объектами в режиме редактирования предназначена панель инструментов (рис. 54), на которой расположены:

- Кнопки:
  - **Сохранить** ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true) – сохранить изменения, которые были внесены в карточку объекта в режиме ее редактирования.
  - **Сохранить как** ![](https://github.com/citoruspm/GeoData/blob/master/28.png?raw=true) – создать копию объекта и поместить ее в тот же контейнер, в котором находится текущий объект. При выполнении команды **Сохранить как** открывается диалоговое окно, в котором необходимо указать название создаваемого объекта.
  - **Очистить поля** ![](https://github.com/citoruspm/GeoData/blob/master/29.png?raw=true) – очистить все поля карточки объекта, кроме полей **Название** и **Описание (всплывающая подсказка)**.
  - **Редактировать тип** ![](https://github.com/citoruspm/GeoData/blob/master/30.png?raw=true) – открыть страницу редактирования выбранного типа (см. раздел <a href="#Создание-редактирование-типов-объектов">Создание/редактирование типов объектов</a>).
  - **Редактировать категорию** ![](https://github.com/citoruspm/GeoData/blob/master/31.png?raw=true) – открыть страницу выбранной категории объекта (см. раздел (см. раздел <a href="#Создание-редактирование-категорий-объектов">Создание/редактирование категорий объектов</a>).
- Выпадающий список **Действие**, с помощью которого можно выполнить следующие команды:
  - <a href="#Управление-версиями">Управление версиями объекта</a>.
  - <a href="#Просмотр-подробной-информации">Подробная информация</a>.
  - **Протокол** – при выполнении данной команды открывается страница (рис. 53), на которой представлена информация об изменениях объекта: дата и время изменения; имя пользователя, который изменил объект; действие, которое было выполнено с объектом (перенос, редактирование и т.д.). Данная информация предназначена только для просмотра и недоступна для редактирования.

<center>![](https://github.com/citoruspm/GeoData/blob/master/upravlenie_obektami_v_rezhime_redaktirovanija_2.png?raw=true "Рисунок 54 – Режим редактирования")</center>

<center><small>Рисунок 54 – Режим редактирования</center></small>

<a name="Ввод-и-валидация-значений"></a>
### Ввод и валидация значений

Поля, которые содержит карточка контейнера/объекта, создаются и настраиваются в <a href="#Создание-редактирование-категорий-объектов">редакторе категорий</a>. Для каждого поля в редакторе указывается тип: выпадающий список, поле для ввода текстовых данных, даты, времени и т.д. Кроме того, для каждого поля настраивается *валидация* – правила, по которым следует заполнять данное поле.

Если валидация настроена, то в режиме редактирования контейнера/объекта поля обозначаются следующими цветовыми индикаторами (рис. 55):

- **Оранжевый** – поле обязательно для заполнения.
- **Зеленый** – в поле введено корректное значение.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/vvod_i_validacija_znachenij_1.png?raw=true "Рисунок 55 – Цветовые индикаторы")</center><br><center><small>Рисунок 55 – Цветовые индикаторы</center></small><br>
- **Красный** – в поле введено некорректное значение, при этом была сделана попытка сохранить объект с данным значением.
 
<center>![](https://github.com/citoruspm/GeoData/blob/master/vvod_i_validacija_znachenij_2.png?raw=true "Рисунок 56 – Ввод некорректного значения")</center>

<center><small>Рисунок 56 – Ввод некорректного значения</center></small>

<a name="Мультиплицируемая-категория"></a>
### Мультиплицируемая категория

Блоки для ввода данных, которые содержит карточка контейнера/объекта, на языке системы называются *категориями*. Категории создаются и настраиваются в <a href="#Создание-редактирование-типов-объектов">редакторе типов объектов</a>.

Если для какой-либо категории в редакторе типов выбран тип **Мультиплицируемая категория**, то в режиме редактирования контейнера/объекта пользователь может выполнить ввод значений в поля данной категории несколько раз.

Для этого слева от **Мультиплицируемой категории** следует нажать на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) (рис. 57). Ниже будет создана идентичная категория.

<center>![](https://github.com/citoruspm/GeoData/blob/master/multipliciruemaja_kategorija_1.png?raw=true "Рисунок 57 – Мультиплицируемая категория")</center>

<center><small>Рисунок 57 – Мультиплицируемая категория</center></small>

<a name="Редактор-форматируемого-текста"></a>
### Редактор форматируемого текста

Поля карточки объекта создаются и настраиваются в <a href="#Создание-редактирование-категорий-объектов">редакторе категорий объектов</a>. Если в редакторе категорий для поля указан тип **editor**, то при вводе текста в данное поле в верхней части карточки объекта отображаются стандартные инструменты форматирования текста (рис. 58). С помощью данных инструментов можно настроить начертание, размер, цвет, выравнивание шрифта и т.д. Назначение каждого инструмента описано во всплывающей подсказке, которая отображается при наведении курсора мыши на данный инструмент.

<center>![](https://github.com/citoruspm/GeoData/blob/master/redaktor_formatiruemogo_teksta_1.png?raw=true "Рисунок 58 – Инструменты форматирования текста")</center>

<center><small>Рисунок 58 – Инструменты форматирования текста</center></small>

<a name="Создание-редактирование-типов-объектов"></a>
## Создание/редактирование типов объектов

Одно из основных преимуществ системы «CITORUS» заключается в том, что пользователь может самостоятельно создавать новые типы объектов, не прибегая к помощи разработчиков. Например, если система предназначена для учета лесных пожаров, то пользователь может создать тип объекта «Карточка пожара», на основе которого затем будет создавать соответствующие объекты – карточки лесных пожаров.

В системе «CITORUS» поддерживается следующая логика: типы объектов состоят из категорий объектов. Категории могут быть как системными, то есть присутствовать в системе по умолчанию, так и созданными пользователями. Каждая категория содержит поля для хранения тех или иных свойств объекта: это может быть атрибутивная информация (различные характеристики объекта), геоинформация (информация о местоположении объекта) и т.д.

Соответственно, чтобы создать новый тип объекта, необходимо:

- Определить, какие категории следует включить в тип объекта.
- При необходимости <a href="#Создание-категории-объекта">создать требуемые (недостающие) категории</a>.
- <a href="#Создание-типа-объекта">Создать тип объекта</a>.

<a name="Создание-типа-объекта"></a>
### Создание типа объекта

Чтобы создать тип объекта, в дереве объектов выделите правой клавишей мыши контейнер **Типы** и выполните команду контекстного меню **Создать > Тип**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_1.png?raw=true "Рисунок 59 – Создание типа объекта")</center>

<center><small>Рисунок 59 – Создание типа объекта</center></small>

В карточке типа (рис. 60) заполните следующие поля с общей информацией:

-   **Название** – имя, под которым данный тип будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы. ***Обязательное поле.***
-   **Описание (всплывающая подсказка)** – поле для текстового описания типа объекта. Заполняется при необходимости.
-   **Ссылки** – поле для ввода ссылки (указателя) на другой объект. Заполняется при необходимости.

Чтобы указать, какие категории должны входить в данный тип объекта, на панели инструментов нажмите на кнопку **Визуальный редактор** ![](https://github.com/citoruspm/GeoData/blob/master/33.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_2.png?raw=true "Рисунок 60 – Карточка типа объекта")</center>

<center><small>Рисунок 60 – Карточка типа объекта</center></small>

Чтобы добавить категорию, которая будет присутствовать в карточке объекта в единственном экземпляре, в визуальном редакторе (рис. 61) нажмите на кнопку **Добавить категорию**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_3.png?raw=true "Рисунок 61 – Визуальный редактор")</center>

<center><small>Рисунок 61 – Визуальный редактор</center></small>

В окне, представленном на рисунке 62, выберите требуемую категорию двойным щелчком мыши. 

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_4.png?raw=true "Рисунок 62 – Выбор категории")</center>

<center><small>Рисунок 62 – Выбор категории</center></small>

В визуальном редакторе отобразится выбранная категория (рис. 63). Чтобы добавить еще одну категорию, выполните описанные действия повторно.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_5.png?raw=true "Рисунок 63 – Категория добавлена")</center>

<center><small>Рисунок 63 – Категория добавлена</center></small>

В карточку типа объекта можно также добавить <a href="#Мультиплицируемая-категория">мультиплицируемую категорию</a>. Мультиплицируемая категория, также как и обычная категория, отображается в карточке объекта в единственном экземпляре. Но при необходимости пользователь может нажать на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true), которая отображается слева от данной категории, и тем самым создать еще один экземпляр этой категории.

Чтобы добавить <a href="#Мультиплицируемая-категория">мультиплицируемую категорию</a> в тип объекта, нажмите на кнопку **Добавить мультикатегорию**. В визуальном редакторе отобразится блок мультикатегории (рис. 64). Выделите данный блок и нажмите на кнопку **Добавить категорию**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_6.png?raw=true "Рисунок 64 – Блок мультикатегории")</center>

<center><small>Рисунок 64 – Блок мультикатегории</center></small>

В открывшемся окне (рис. 62) выберите категорию, которую следует мультиплицировать. Выбранная категория отобразится внутри блока мультикатегории (рис. 65).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_7.png?raw=true "Рисунок 65 – Мультиплицируемая категория")</center>

<center><small>Рисунок 65 – Мультиплицируемая категория</center></small>

При выделении какой-либо категории в визуальном редакторе справа отображается панель настроек данной категории (рис. 66).

Панель настроек содержит следующие инструменты:

- **Имя категории/мультикатегории** – имя категории/мультикатегории, под которым она будет отображаться в карточке объекта данного типа.
- **id** – идентификатор категории.
- **newline** – по умолчанию добавляемые категории выстраиваются в одну линию по горизонтали. Если категории следует расположить по вертикали, выделите категорию, которая должна располагаться внизу, и на панели инструментов поставьте флажок **newline** (рис. 66). Если требуется вернуть категорию на прежнее местоположение, снимите данный флажок.  
- **Кнопки** ![](https://github.com/citoruspm/GeoData/blob/master/35.png?raw=true) и ![](https://github.com/citoruspm/GeoData/blob/master/36.png?raw=true) – предназначены для перемещения категорий, расположенных по вертикали (рис. 66). При нажатии на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/35.png?raw=true) выделенная категория перемещается на один уровень вверх, при нажатии на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/36.png?raw=true) – на один уровень вниз.
- **Кнопка** ![](https://github.com/citoruspm/GeoData/blob/master/34.png?raw=true) – предназначена для удаления выделенной категории.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_tipa_obekta_8.png?raw=true "Рисунок 66 – Панель настроек")</center>

<center><small>Рисунок 66 – Панель настроек</center></small>

При необходимости мультикатегорию можно представить в форме таблицы. Для этого на панели инструментов следует отметить пункт **Мультикатегория как таблица** (рис. 64) и в поле **id** указать идентификатор формы, которая содержит отображение требуемой таблицы.

Для завершения работы в визуальном редакторе на панели инструментов нажмите на кнопку **Сохранить** ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true). Карточка типа объекта автоматически закроется, и в дереве объектов, в папке **Типы** отобразится созданный тип.

<a name="Редактирование-типа-объекта"></a>
### Редактирование типа объекта

Чтобы перейти в режим редактирования типа объекта, выполните одно из следующих действий:

- Выделите требуемый тип в дереве объектов правой клавишей мыши и выполните команду **Редактировать**.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_tipa_obekta_1.png?raw=true "Рисунок 67 – Переход в режим редактирования типа объекта")</center><center><small><br>Рисунок 67 – Переход в режим редактирования типа объекта</center></small><br>В новой вкладке откроется карточка типа объекта в режиме редактирования.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_tipa_obekta_2.png?raw=true "Рисунок 68 – Карточка типа объекта")</center><center><small><br>Рисунок 68 – Карточка типа объекта</center></small><br>
- Выделите в дереве объектов объект, который создан на основе требуемого типа, и выполните для него команду контекстного меню **Редактировать**.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_tipa_obekta_3.png?raw=true "Рисунок 69 – Переход в режим редактирования объекта")</center><center><small><br>Рисунок 69 – Переход в режим редактирования объекта</center></small><br>В новой вкладке откроется карточка объекта в режиме редактирования (рис. 70). На панели инструментов карточки нажмите на кнопку **Редактировать тип** ![](https://github.com/citoruspm/GeoData//blob/master/30.png?raw=true).<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_tipa_obekta_4.png?raw=true "Рисунок 70 – Карточка объекта")</center><center><small><br>Рисунок 70 – Карточка объекта</center></small><br>Откроется карточка типа объекта в режиме редактирования (рис. 68).

<a name="Создание-редактирование-категорий-объектов"></a>
## Создание/редактирование категорий объектов

### Создание категории объекта

Категория является составной частью <a href="#Создание-редактирование-типов-объектов">типа объекта</a>.

Категории могут быть системными, то есть присутствовать в системе по умолчанию. К таким категориям относится, например, <a href="#Управление-геокодированными-объектами-Универсальная-геокатегория">универсальная геокатегория</a>. Кроме того, категории могут создаваться пользователями вручную. Как правило, вручную создаются категории, которые содержат атрибутивную информацию об объекте: название, описание и другие свойства объекта.

Чтобы создать категорию, в дереве объектов выделите правой клавишей мыши контейнер **Категории** и выполните команду контекстного меню **Создать > Категорию**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_1.png?raw=true "Рисунок 71 – Создание категории")</center>

<center><small>Рисунок 71 – Создание категории</center></small>

В карточке категории (рис. 72) заполните следующие поля с общей информацией:

-   **Название** – имя, под которым данная категория будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы. ***Обязательное поле.***
-   **Описание (всплывающая подсказка)** – поле для текстового описания категории. Заполняется при необходимости.
-   **Ссылки** – поле для ввода ссылки (указателя) на другой объект. Заполняется при необходимости.

В группе полей **Имя – Тип – Идентификатор** создайте список полей, которые должна содержать данная категория. Для каждого поля укажите следующие данные:

- **Имя** – краткое описание поля. **Имя** может содержать русские и латинские буквы, цифры и пробелы.
- **Тип** – тип поля: выпадающий список, флаговая кнопка и т.д. (Список типов полей см. ниже.)
- **Идентификатор** – системное машиночитаемое имя. Может содержать только латинские буквы и цифры без пробелов. Настоятельно рекомендуется не оставлять данное поле пустым и указывать в нем простой и понятный идентификатор.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_2.png?raw=true "Рисунок 72 – Карточка категории")</center>

<center><small>Рисунок 72 – Карточка категории</center></small>

Чтобы добавить в список новое поле категории, нажмите левой клавишей мыши на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) или откройте контекстное меню нажатием правой клавиши мыши на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) и  выполните команду **Создать новый** (рис. 73). Контекстное меню содержит также следующие команды:

- **Поднять наверх** – расположить выбранное поле над предшествующим полем.
- **Опустить вниз** – расположить выбранное поле под последующим полем.
- **Клонировать** – создать поле, идентичное выбранному.
- **Удалить** – удалить поле.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_3.png?raw=true "Рисунок 73 – Меню списка")</center>

<center><small>Рисунок 73 – Меню списка</center></small>

В системе существует 16 типов полей (рис. 74):

- **textedit** – текстовое поле для ввода произвольного текста в одну строку.
- **textarea** – текстовое поле для ввода произвольного текста. Отличие от **textedit** состоит в том, что при достижении границы поля текст автоматически переносится на новую строку.
- **textbox** – выпадающий список с возможностью контекстного поиска и ввода собственного значения.
- **list** – список, в котором есть возможность прокрутки пунктов вверх и вниз. 
- **file**  – кнопка **Загрузить**, при нажатии на которую открывается проводник Windows для выбора загружаемого файла.
- **editor** – текстовое поле, аналогичное **textarea**. Отличие от **textarea** состоит в том, что при вводе текста в данное поле в верхней части карточки объекта отображаются стандартные инструменты форматирования текста (подробнее см. в разделе <a href="#Редактор-форматируемого-текста">Редактор форматируемого текста</a>).
- **date** – поле для ввода даты.
- **period** – поле для выбора временного периода.
- **time** – поле для указания времени.
- **checkbox** – флаговая кнопка.
- **button** – кнопка.
- **dropdown** – кнопка, при нажатии на которую открывается выпадающий список.
- **radiobuttons** – инструмент для выбора значения или/или.
- **linkedobject** – поле, которое содержит ссылку на какой-либо другой объект.
- **img** – изображение.
- **CQL** – данный тип поля можно добавлять только в те категории, которые будут входить в тип, предназначенный для создания контейнеров. Поле предназначено для создания <a href="#CQL-запрос">CQL-запроса</a>.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_4.png?raw=true "Рисунок 74 – Типы полей")</center>

<center><small>Рисунок 74 – Типы полей</center></small>

После создания списка полей в карточке категории следует определить настройки данных полей в **Редакторе категории**. При этом следует помнить, что карточка любого объекта имеет два режима работы: <a href="#Управление-объектами-в-режиме-просмотра">режим просмотра</a> и <a href="#Управление-объектами-в-режиме-редактирования">режим редактирования</a>. В первом режиме поля заблокированы, во втором режиме – доступны для редактирования. Соответственно, настраивать для каждого режима их нужно по-разному.

Для перехода в **Редактор категории** режима просмотра предназначена кнопка **Редактировать**, которая расположена над полем **Профиль просмотра** (рис. 75). Для перехода в **Редактор категории** режима редактирования предназначена кнопка **Редактировать**, которая расположена над полем **Профиль редактирования**.

По мере работы в **Редакторе категории**, в полях **Профиль редактирования** и **Профиль просмотра** автоматически формируется описание состава и оформления полей категории в соответствующих режимах. Описание формируется в формате JSON, является машиночитаемым и при необходимости может быть скопировано и импортировано в другую систему.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_5.png?raw=true "Рисунок 75 – Группа полей JSON")</center>

<center><small>Рисунок 75 – Группа полей **JSON**</center></small>

На странице **Редактора категории** (рис. 76) расположены:

1. Кнопки:
 - **Вернуться назад** ![](https://github.com/citoruspm/GeoData/blob/master/37.png?raw=true) – предназначена для возврата в карточку категории (рис. 72).
 - **Сохранить как** ![](https://github.com/citoruspm/GeoData/blob/master/28.png?raw=true) – предназначена для создания копии текущей категории объекта. Копия помещается в тот же контейнер, в котором находится прототип. При выполнении команды **Сохранить как** открывается диалоговое окно, в котором необходимо указать название копии.
2. Панель управления.
3. Визуальный редактор.
4. Панель настройки.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_6.png?raw=true "Рисунок 76 – Редактор категории")</center>

<center><small>Рисунок 76 – Редактор категории</center></small>

Список полей, которые были добавлены в карточке категории, отображается на панели управления, в разделе **Элементы**. Чтобы какое-либо из этих полей отобразилось в визуальном редакторе, дважды щелкните по нему левой клавишей мыши. Когда поле переносится в визуальный редактор, оно удаляется из списка элементов на панели управления.

<a name="Настройка-поля-с-помощью-визуального-редактора"></a>
#### Настройка поля с помощью визуального редактора

Чтобы начать работу с полем в визуальном редакторе, выделите его одним щелчком мыши (рис. 76). На панели настроек отобразятся инструменты, предназначенные для настройки данного поля.

Для изменения местоположения поля перетащите его, удерживая левой клавишей мыши синюю полосу, которая отображается над данным полем.

Для изменения размера поля потяните в нужную сторону оранжевый квадрат, который отображается справа от данного поля.

Для удаления поля из визуального редактора нажмите на черный квадрат. Когда поле удаляется из визуального редактора, оно автоматически возвращается в список элементов на панели управления.

Чтобы добавить название для поля, выделите поле в визуальном редакторе, сдвиньте его вправо и на панели управления нажмите на кнопку **label**. Слева от поля добавится одноименный элемент (рис. 77). Управление данным элементом – перемещение, изменение размеров и удаление – осуществляется аналогично управлению полем. Ввод названия поля в данный элемент осуществляется с помощью <a href="#Настройка-поля-с-помощью-панели-настроек">панели настроек</a>.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_7.png?raw=true "Рисунок 77 – Элемент label для ввода названия поля")</center>

<center><small>Рисунок 77 – Элемент **label** для ввода названия поля</center></small>

Если поле предназначено для ввода текста, и в нем по умолчанию следует отображать какое-либо слово или фразу, побуждающую пользователя к действию (например, «Укажите марку автомобиля»), активируйте данное поле одним щелчком мыши и введите в него требуемый текст.

Если в визуальном редакторе расположено большое количество полей и их названий (лейблов), и поиск требуемого элемента затруднен, нажмите на панели инструментов на кнопку **Объекты** (рис. 78). На панели настройки отобразится список всех полей и лейблов, которые содержит визуальный редактор. Выделите на панели инструментов требуемый элемент двойным щелчком мыши. Данный элемент выделится в визуальном редакторе.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_8.png?raw=true "Рисунок 78 – Список элементов")</center>

<center><small>Рисунок 78 – Список элементов</center></small>

<a name="Настройка-поля-с-помощью-панели-настроек"></a>
#### Настройка поля с помощью панели настроек

При выделении в визуальном редакторе какого-либо поля категории (далее – *редактируемое поле*) на панели настроек (рис. 79) отображаются:

- Общие свойства редактируемого поля: **id, type, name** – идентификатор, тип и название, которые были указаны для данного поля в карточке категории (см. раздел <a href="#Создание-категории-объекта">Создание категории объекта</a>). Значения в полях **id, type, name** можно редактировать.
- Группы настроек **Базовые, События, Специальные** и **Связи**. Состав инструментов в каждой из данных вкладок зависит от типа редактируемого поля.

При изменении любого параметра на панели настроек необходимо нажать на кнопку **Изменить**. В противном случае при выходе из **Редактора категории** указанные настройки не сохранятся.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_9.png?raw=true "Рисунок 79 – Панель настроек")</center>

<center><small>Рисунок 79 – Панель настроек</center></small>

<a name="Базовые"></a>
##### Базовые

***Внимание:*** в данном разделе представлено описание максимального набора полей, которое может содержаться на панели инструментов во вкладке **Базовые**. Набор отображаемых полей зависит от типа редактируемого поля. 

Размер и положение редактируемого поля относительно границ окна можно настроить как в визуальном редакторе, перемещая поле мышью, так и на панели настроек (рис. 79) с помощью следующих полей:

- **Left** – расстояние от левой границы окна (в пикселях). 
- **Top** – расстояние от верхней границы окна (в пикселях).
- **Right** – расстояние от правой границы окна (в пикселях).
- **Bottom** – расстояние от нижней границы окна (в пикселях).
- **Width** – ширина поля (в пикселях).
- **Height** – высота поля (в пикселях).
- **Margin** – отступ поля от границ окна (в пикселях).

В поле **Подсказка** можно указать текст для всплывающей подсказки, которая будет отображаться при наведении курсора мыши на редактируемое поле. Если текст не указан, всплывающая подсказка появляться не будет.

Если редактируемое поле следует сделать обязательным для заполнения, поставьте флажок **Обязательное поле**. В карточке объекта, в зависимости от действий пользователя, данное поле будет помечаться маркерами разного цвета (см. раздел <a href="#Ввод-и-валидация-значений">Ввод и валидация значений</a>).

В поле **Текст (элементы)**, в зависимости от типа редактируемого элемента, следует указать:

- Для элемента типа **label** – название поля, которому принадлежит данный **label**.
- Для текстового поля типа **textedit**, **textarea** или **editor**  – при необходимости можно указать текст, который будет отображаться в данном поле по умолчанию.
- Для выпадающего списка **text box** – можно указать текстовые значения выпадающего списка. Если в выпадающем списке требуется отображать какой-либо справочник из БД, воспользуйтесь настройками вкладки <a href="#Специальные">Специальные</a>.
- Для флаговой кнопки **checkbox** – можно указать текст, который будет отображаться справа от данной кнопки.
- Для кнопки **button** и кнопки с выпадающим списком **dropdown** – следует указать текст, который будет отображаться на данной кнопке.
- Для переключателя **radiobuttons** – следует указать названия кнопок. Например, если переключатель содержит значения «Да» и «Нет», то строку в поле **Текст (элементы)** следует отредактировать следующим образом: `[{"vl":"1","nm":"Да"},{"vl":"2","nm":Нет"}]`.
- Для списка **list** – следует сформировать пункты списка. Например, если список должен содержать пункты «Да», «Нет» и «Не знаю», то строку в поле **Текст (элементы)** следует отредактировать следующим образом: `{"item1":"Да","item2":"Нет","item3":"Не знаю"}`.

В поле **CSS**  с помощью языка разметки CSS можно определить стиль оформления редактируемого поля. Разметка, указанная в поле CSS, имеет больший приоритет, чем разметка по умолчанию. 

<a name="События"></a>
##### События

На поле любого типа может быть «завязано» какое-либо событие. Например, в поле могут подгружаться различные справочники в зависимости от значения, выбранного в предыдущем поле (событие **Load**). Чтобы добавить какое-либо событие для поля, откройте консоль обвязки нажатием на кнопку **Добавить событие** во вкладке **События** (рис. 80).

Список возможных событий:

- **Load** – событие возникает в момент загрузки поля.
- **Click** – событие возникает при щелчке мышью (как правило, применяется для кнопок).
- **Dbclick** - событие возникает в момент двойного щелчка левой клавишей мыши.
- **Select** – событие при выборе значения.
- **Change** – событие при смене значения.
- **Blur** – событие при потере фокуса.
- **Focus** – событие при установке фокуса.
- **Key…** – событие нажатия «вверх», «вниз».
- **Mouse…** – событие при наведении курсора мыши.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_10.png?raw=true "Рисунок 80 – Вкладка События")</center>

<center><small>Рисунок 80 – Вкладка **События**</center></small>

<a name="Специальные"></a>
##### Специальные

Во вкладке **Специальные** для каждого типа поля отображается индивидуальный набор настроек.

<a name="label"></a>
###### label

Для настройки элемента **label**, который используется для ввода названия поля, предназначены следующие инструменты:

- **Выравнивание** – выравнивание текста в поле **label**. Возможные значения: слева, по центру, справа.
- **Размер шрифта (число)** – размер шрифта для текста в поле **label**.

<a name="textedit"></a>
###### textedit

Поля **Тип данных**, **Описание ошибки**, **maxlength**, **type**, **fieldUnique**, **notempty** предназначены для настройки <a href="#Ввод-и-валидация-значений">валидации значений</a>, которые будут вводиться пользователями в поле типа **textedit**.

Поле **index program** в настоящее время не используется.

В поле **Отступ слева (число)** при необходимости можно указать отступ (красную строку) для текста, который будет вводиться пользователями в поле типа **textedit**.

В поле **Цвет фона (rgb или transparent)** при необходимости можно указать, какой цвет должен иметь фон текста в поле типа **textedit**. Если фон должен быть прозрачным, укажите значение **transparent**, если фон должен иметь какой-либо цвет, укажите данный цвет в RGB, например: `RGB(255,255,0)` (желтый цвет).

<a name="textarea"></a>
###### textarea

Поля **type**, **fieldUnique**, **notempty** предназначены для настройки <a href="#Ввод-и-валидация-значений">валидации значений</a>, которые будут вводиться пользователями в поле типа **textarea**.

<a name="textbox"></a>
###### textbox

Для настройки поля типа **textbox** (выпадающий список) предназначены следующие инструменты:

- **notempty** – поле предназначено для настройки <a href="#Ввод-и-валидация-значений">валидации значений</a>, которые будут выбираться пользователями в поле типа **textbox**.
- **Возможность редактирования** – если флажок установлен, то в данное поле можно ввести требуемое значение (отсутствующее в выпадающем списке) с помощью клавиатуры.
- **Выбранное значение** – если во вкладке <a href="#Базовые">Базовые</a>, в поле **Текст (элементы)** для поля **textbox** созданы элементы выпадающего списка, то во вкладке **Специальные**, в поле **Выбранное значение** можно указать элемент, который будет выбран в выпадающем списке по умолчанию.
- **Высота элемента (число)** – высота поля.
- **Цвет фона (rgb или transparent)** – в данном поле можно указать, какой цвет должен иметь фон текста в поле **textbox**. Если фон должен быть прозрачным, укажите значение **transparent**, если фон должен иметь какой-либо цвет, укажите данный цвет в RGB, например: `RGB(255,255,0)` (желтый цвет).
- **Контейнер справочника** – если в выпадающем списке должны отображаться значения какого-либо справочника, укажите в данном поле идентификатор этого справочника. Идентификатор справочника содержится на <a href="#Просмотр-подробной-информации">странице его подробной информации</a>.

<a name="file"></a>
###### file

Если при открытии карточки объекта в нее следует автоматически загружать какой-либо файл, в поле **Путь** укажите путь к данному файлу на сервере.

<a name="checkbox"></a>
###### checkbox

Чтобы в поле типа **checkbox** (флаговая кнопка) по умолчанию будет установлен флажок, поставьте флажок **checked**. 

<a name="button"></a>
###### button

Для настройки поля типа **button** (кнопка) предназначены следующие инструменты:

- **Тип кнопки** – в выпадающем списке выберите один из стилей оформления кнопки, предложенных по умолчанию. На рисунке 81 приведены примеры того, как выглядит кнопка, если для нее выбран стиль **primary**, **dashed** или **danger** (сверху вниз). Если для кнопки следует применить иное оформление, оставьте поле **Тип кнопки** пустым, и опишите требуемый стиль оформления во вкладке <a href="#Базовые">Базовые</a>, в поле **CSS**.
- **Иконка** – если требуется сделать кнопку нестандартного вида, укажите в поле **Иконка** путь к графическому файлу, который следует использовать в качестве кнопки.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_kategorii_obekta_11.png?raw=true "Рисунок 81 – Типы кнопок по умолчанию")</center>

<center><small>Рисунок 81 – Типы кнопок по умолчанию</center></small>

<a name="dropdown"></a>
###### dropdown

Для настройки поля типа **dropdown** (кнопка с выпадающим списком) предназначены следующие инструменты:

- **Тип кнопки** – см. описание поля <a href="#button">button</a>.
- **Иконка** – см. описание поля <a href="#button">button</a>.
- **Меню** – в данном поле сформируйте пункты списка. Например, если список должен содержать пункты «Да», «Нет» и «Не знаю», то строку в поле **Текст (элементы)** следует отредактировать следующим образом: `{"item1":"Да","item2":"Нет","item3":"Не знаю"}`.
- **Событие для разворачивания** – в данном поле укажите, при наступлении какого события следует разворачивать пункты выпадающего списка: **click** – при щелчке мышью по кнопке, **hover** – при наведении курсора мыши на кнопку.

<a name="radiobuttons"></a>
###### radiobuttons

В поле **checked** выберите пункт, который будет отмечен по умолчанию.

<a name="linkedobject"></a>
###### linkedobject

Специфические настройки, используемые при включении поля в различные поисковые формы.

<a name="img"></a>
###### img

Для настройки поля типа **img** (изображение) предназначены следующие инструменты:

- **Выравнивание** – выравнивание изображения относительно границ поля, в котором оно находится. Возможные значения: слева, по центру, справа.
- **Картинка** – путь к файлу изображения на сервере.
- **Ширина рамки** – если поле, в котором расположено изображение, должно иметь видимые границы, укажите требуемую ширину границ.
- **Горизонтальный отступ** – отступ изображения от левого края поля.
- **Вертикальный отступ** – отступ изображения от верхнего края поля.

<a name="Другие-типы-полей"></a>
###### Другие типы полей

Для прочих типов полей специальные настройки не применяются.

<a name="Связи"></a>
##### Связи

Специфические настройки, используемые при включении поля в различные поисковые формы.

<a name="Редактирование-категории-объекта"></a>
### Редактирование категории объекта

Чтобы перейти в режим редактирования категории, выполните одно из следующих действий:

- Выделите требуемую категорию в дереве объектов правой клавишей мыши и выполните команду **Редактировать**.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_kategorii_obekta_1.png?raw=true "Рисунок 82 – Переход в режим редактирования категории объекта")</center><center><small><br>Рисунок 82 – Переход в режим редактирования категории объекта</center></small><br>В новой вкладке откроется карточка категории объекта в режиме редактирования.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_kategorii_obekta_2.png?raw=true "Рисунок 83 – Карточка категории объекта")</center><center><small><br>Рисунок 83 – Карточка категории объекта</center></small><br>
- Выделите в дереве объектов объект, который содержит требуемую категорию, и выполните для него команду контекстного меню **Редактировать**.<br><br><center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_kategorii_obekta_3.png?raw=true "Рисунок 84 – Переход в режим редактирования объекта")</center><center><small><br>Рисунок 84 – Переход в режим редактирования объекта</center></small><br>Откроется карточка объекта в режиме редактирования. На панели инструментов нажмите на кнопку **Редактировать категорию** ![](https://github.com/citoruspm/GeoData/blob/master/31.png?raw=true). Откроется выпадающий список, в котором перечислены все категории, которые содержит данный объект. Выберите в данном списке требуемую категорию.

<center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_kategorii_obekta_4.png?raw=true "Рисунок 85 – Карточка объекта")

</center><center><small>Рисунок 85 – Карточка объекта</center></small>

<a name="Создание-редактирование-формы"></a>
## Создание/редактирование формы

<a name="Создание-формы"></a>
### Создание формы

*Форма* – это абстрактная сущность, шаблон, который может быть куда-либо встроен. Чаще всего формы используются в совокупности с <a href="#Утилита-«Мастер»">утилитой «Мастер»</a>.

Чтобы создать форму, в дереве объектов выделите правой клавишей мыши контейнер **Формы** и выполните команду контекстного меню **Создать > Форму** (рис. 86).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_formy_1.png?raw=true "Рисунок 86 – Создание формы")

</center><center><small>Рисунок 86 – Создание формы</center></small>

Откроется карточка формы (рис. 87).

Заполните следующие поля с общей информацией:

-   **Название** – имя, под которым данная форма будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы. ***Обязательное поле.***
-   **Описание (всплывающая подсказка)** – поле для текстового описания формы. Заполняется при необходимости.
-   **Ссылки** – поле для ввода указателя на другой объект. Заполняется при необходимости.

Затем перейдите в редактор формы. Для этого на панели инструментов нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/33.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_formy_2.png?raw=true "Рисунок 87 – Карточка формы")

</center><center><small>Рисунок 87 – Карточка формы</center></small>

С помощью редактора создайте и настройте поля, которые должна содержать форма. Работа в редакторе форм аналогична работе в редакторе категорий (см. раздел <a href="#Создание-категории-объекта">Создание категории объекта</a>). Затем сохраните карточку формы. Дерево объектов автоматически обновится и в контейнере **Формы** отобразится созданная форма.

<a name="Редактирование-формы"></a>
### Редактирование формы

Чтобы перейти в режим редактирования формы, выделите ее в дереве объектов правой клавишей мыши и выполните команду **Редактировать**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_formy_1.png?raw=true "Рисунок 88 – Переход в режим редактирования формы")</center>

<center><small>Рисунок 88 – Переход в режим редактирования формы</center></small>

В новой вкладке откроется карточка формы в режиме редактирования (рис 87).

<a name="Создание-редактирование-утилиты"></a>
## Создание/редактирование утилиты

*Утилита* – это объект системы, который реализует какую-либо специфическую функциональность (аналог исполняемых файлов в операционных системах). Примерами таких утилит являются:

- Утилита URL,
- Мастер,
- Таблица. 

<a name="Создание-утилиты"></a>
### Создание утилиты

Чтобы создать утилиту, в дереве объектов выделите контейнер **Утилиты** и выполните команду контекстного меню **Создать > Утилиту > Тип утилиты** (рис. 89).

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_1.png?raw=true "Рисунок 89 – Создание утилиты")

</center><center><small>Рисунок 89 – Создание утилиты</center></small>

В новой вкладке откроется карточка утилиты. Состав инструментов карточки зависит от выбранного типа утилиты.

<a name="Утилита-URL"></a>
#### Утилита URL

Утилита URL предоставляет возможность работы с удаленными веб-ресурсами из интерфейса системы. Она является объектом, и также, как и другие объекты, отображается в дереве объектов системы (рис. 90).

В своих свойствах утилита URL содержит ссылку на какой-либо веб-ресурс. При щелчке левой клавишей мыши по объекту-утилите или при выполнении команды контекстного меню <a href="#Просмотр-запуск-объектов">Просмотр/запуск объектов</a> в новой вкладке открывается страница указанного веб-ресурса.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_3.png?raw=true "Рисунок 90 – Утилита URL")

</center><center><small>Рисунок 90 – Утилита URL</center></small>

Чтобы открыть карточку, предназначенную для создания новой утилиты URL, выполните действия, описанные в разделе <a href="#Создание-утилиты">Создание утилиты</a>.

В карточке утилиты URL заполните следующие поля (рис. 91):

-   **Название** – имя, под которым данная утилита будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы. ***Обязательное поле.***
-   **Описание (всплывающая подсказка)** – поле для текстового описания утилиты. Заполняется при необходимости.
-   **Ссылки** – поле для ввода указателя на другой объект. Заполняется при необходимости.
-   **Свойства утилиты**  – поля для указания ссылки на требуемый веб-ресурс. В верхнем поле укажите значение **url**, в нижнем – ссылку на ресурс. ***Обязательные поля.***

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_2.png?raw=true "Рисунок 91 – Карточка утилиты URL")

</center><center><small>Рисунок 91 – Карточка утилиты URL</center></small>

Чтобы сохранить карточку, на панели инструментов нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true). Дерево объектов автоматически обновится, и в папке **Утилиты** отобразится созданная утилита.

<a name="Утилита-«Таблица»"></a>
#### Утилита «Таблица»

Утилита «Таблица» дает возможность представить любой массив данных, который содержится в БД системы, в виде таблицы. То есть, если в системе есть контейнер, который содержит большое количество однотипных объектов, для лучшего визуального восприятия и удобства работы эти объекты можно поместить в таблицу с помощью специализированной утилиты.

Для создания таблицы откройте карточку новой утилиты «Таблица» так, как это описано в разделе <a href="#Создание-утилиты">Создание утилиты</a>.

В карточке утилиты заполните поля с общей информацией (рис. 92):

-   **Название** – имя, под которым данная утилита будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы. ***Обязательное поле.***
-   **Описание (всплывающая подсказка)** – поле для текстового описания утилиты. Заполняется при необходимости.
-   **Ссылки** – поле для ввода указателя на другой объект. Заполняется при необходимости.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_4.png?raw=true "Рисунок 92 – Общие свойства утилиты")</center>

<center><small>Рисунок 92 – Общие свойства утилиты</center></small>

Затем определите параметры таблицы и параметры колонок таблицы. Настройка параметров осуществляется с помощью соответствующих блоков полей **Параметры таблицы** и **Колонки таблицы**, которые являются <a href="#Мультиплицируемая-категория">мультикатегориями</a>. Для создания нового блока полей нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) левой клавишей мыши или нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) правой клавишей мыши и выполните команду контекстного меню **Создать новый** (рис. 93). Контекстное меню содержит также следующие команды:

- **Поднять наверх** – расположить выбранный блок полей над предшествующим.
- **Опустить вниз** – расположить выбранный блок полей под последующим.
- **Клонировать** – создать блок полей, идентичный выбранному.
- **Удалить** – удалить блок полей.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_6.png?raw=true "Рисунок 93 – Контекстное меню мультикатегории")</center>

<center><small>Рисунок 93 – Контекстное меню мультикатегории</center></small>

Список параметров таблицы (рис. 94):
<html>
 <head>
  <meta charset="utf-8">
  <title>Параметры таблицы</title>
 </head>
 <body>
  <table border="1" cellspacing="0" width="50%">
  <table style="font-size: 14px;">
   <tr>
    <th>Параметр</th>
    <th>Значение</th>
   </tr>
   <tr><td>table</td><td>Описание таблицы, которое может содержать цифры, латинские и русские буквы, пробелы.</td>
   <tr><td>tabcol</td><td>Всегда <b>-TabCol.</b></td></tr>
   <tr><td>storage</td><td>Системное свойство для указания параметров хранения данных. </td></tr>
   <tr><td>edit</td><td>Возможные значения: <li><b>0</b> – нередактируемая таблица,</li><li><b>1</b> – редактируемая таблица.</li></td></tr>
   <tr><td>query</td><td>Запрос, в котором указываются параметры поиска:
<li><b>parent</b> – идентификатор контейнера, в котором необходимо выполнять поиск объектов для вставки в таблицу;</li>
<li><b>typeId</b> – идентификатор типа объектов, которые необходимо поместить в таблицу.</li><br>
Идентификатор любого объекта системы можно посмотреть на <a href="#Просмотр-подробной-информации">странице подробной информации</a> о данном объекте.<br><br>Запрос имеет следующий формат:<code>{"parent":"id контейнера","typeId":"id типа объекта"}.</code></td></tr>
   <tr><td>type</td><td>Идентификатор типа объектов, создание которых осуществляется путем нажатия на кнопку <b>Создать</b>, расположенную над таблицей (см. раздел <a href="#Табличное-представление-объектов-системы">Табличное представление объектов системы</a>).</td></tr>
   <tr><td>createParent</td><td>Идентификатор контейнера, в который следует помещать объекты, создание которых осуществляется путем нажатия на кнопку <b>Создать</b>, расположенную над таблицей. </td></tr>
 </table>
 </body>
</html>

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_5.png?raw=true "Рисунок 94 – Параметры таблицы")</center>

<center><small>Рисунок 94 – Параметры таблицы</center></small>

Для каждой колонки, которую должна содержать таблица, укажите следующие параметры (рис. 95):

- **Название колонки** – название, которое будет отображаться в заголовке колонки.
- **Тип колонки** – тип данных, которые будут помещены в данную колонку.
- **Ширина колонки** – при необходимости можно указать фиксированную ширину колонки. Если ширина не указана, то она подбирается автоматически.
- **Тип фильтра по полю** – тип фильтра, который расположен в заголовке колонки.
- **Контейнер справочника** – если в поле **Тип фильтра по полю** выбран фильтр **textbox** (выпадающий список), то в поле **Контейнер справочника** следует указать идентификатор справочника, значения которого должны отображаться в выпадающем списке.
- **Идентификатор свойства** – запрос, в котором указывается, данные какого поля следует отображать в колонке таблицы. Запрос имеет следующий формат: `object;id category;id field`, где `id category` – идентификатор <a href="#Создание-редактирование-категорий-объектов">категории</a>, в которой находится данное поле, `id field` – идентификатор требуемого поля. Пример запроса: `object;A4894698o15833o64355o40894o840024;incidentTypeFC`.
- **Обработка значения** – указание логики работы с данными в пределах колонки. 
- **Агрегация столбца** – значение, которое должно быть указано в строке информации о таблице: **Сумма** – сумма всех значений в колонке, **Количество записей** – количество записей в колонке. Данный параметр может быть указан только для одной колонки таблицы. 
- **Расположение текста** – выравнивание текста: по левому краю, по центру, по правому краю.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_7.png?raw=true "Рисунок 95 – Параметры колонки таблицы")</center>

<center><small>Рисунок 95 – Параметры колонки таблицы</center></small>

После того как настройка параметров таблицы и колонок таблицы будет завершена, на панели инструментов карточки утилиты нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/27.png?raw=true). Дерево объектов автоматически обновится, и в папке **Утилиты** отобразится созданная утилита.

Чтобы просмотреть таблицу, которую описывает утилита, выделите утилиту в дереве объектов щелчком мыши или выполните команду контекстного меню <a href="#Просмотр-запуск-объектов">Просмотр/запуск объектов</a>.

<a name="Утилита-«Мастер»"></a>
#### Утилита «Мастер»

Утилита «Мастер» предназначена для формирования опросных листов. Опросный лист представляет собой совокупность последовательно открывающихся окон. Каждое такое окно состоит из двух форм: формы, которая описывает содержимое окна, и формы, которая описывает командные кнопки этого окна. Поэтому, прежде чем приступить к формированию опросного листа, следует предварительно создать для него набор необходимых форм (см. раздел <a href="#Создание-редактирование-формы">Создание/редактирование формы</a>). 

Чтобы открыть карточку, предназначенную для создания утилиты «Мастер», выполните действия, описанные в разделе <a href="#Создание-утилиты">Создание утилиты</a>.

В карточке утилиты «Мастер» заполните следующие поля с общей информацией (рис. 96):

-   **Название** – имя, под которым данная утилита будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы. ***Обязательное поле.***
-   **Описание (всплывающая подсказка)** – поле для текстового описания утилиты. Заполняется при необходимости.
-   **Ссылки** – поле для ввода указателя на другой объект. Заполняется при необходимости.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_8.png?raw=true "Рисунок 96 – Карточка утилиты «Мастер»")</center>

<center><small>Рисунок 96 – Карточка утилиты «Мастер»</center></small>

Затем с помощью блока полей **Свойства утилиты** укажите:

- описание, название и идентификатор формы, которая описывает содержимое первого окна опросного листа;
- описание, название и идентификатор формы с кнопками данного окна.

Затем укажите те же данные для других окон.

Блок полей **Свойства утилиты** является <a href="#Мультиплицируемая-категория">мультикатегорией</a>. Для создания нового блока нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) левой клавишей мыши или нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/23.png?raw=true) правой клавишей мыши и выполните команду контекстного меню **Создать новый** (рис. 97). Контекстное меню содержит также следующие команды:

- **Поднять наверх** – расположить выбранный блок полей над предшествующим.
- **Опустить вниз** – расположить выбранный блок полей под последующим.
- **Клонировать** – создать блок полей, идентичный выбранному.
- **Удалить** – удалить блок полей.

<center>![](https://github.com/citoruspm/GeoData/blob/master/sozdanie_utility_9.png?raw=true "Рисунок 97 – Контекстное меню мультикатегории")</center>

<center><small>Рисунок 97 – Контекстное меню мультикатегории</center></small>

После того как список форм будет готов, сохраните карточку утилиты. Для этого на панели инструментов нажмите на кнопку ![](https://github.com/citoruspm/GeoData//blob/master/27.png?raw=true). Дерево объектов автоматически обновится, и в папке **Утилиты** отобразится созданная утилита.

Чтобы просмотреть опросный лист, который описывает утилита, выделите утилиту в дереве объектов щелчком мыши или выполните команду контекстного меню <a href="#Просмотр-запуск-объектов">Просмотр/запуск объектов</a>.

<a name="Редактирование-утилиты"></a>
### Редактирование утилиты

Чтобы перейти в режим редактирования утилиты, выделите ее в дереве объектов правой клавишей мыши и выполните команду **Редактировать**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/redaktirovanie_utility_1.png?raw=true "Рисунок 98 – Переход в режим редактирования утилиты")</center>

<center><small>Рисунок 98 – Переход в режим редактирования утилиты</center></small>

В новой вкладке откроется карточка утилиты в <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования</a>.

<a name="Поиск-объектов-системы"></a>
## Поиск объектов системы

Система предоставляет возможность контекстного поиска объектов по их названиям и содержимому. Поиск можно выполнять по всему дереву объектов или в указанном контейнере.

Чтобы выполнить поиск объектов системы в каком-либо контейнере, выполните для этого контейнера команду контекстного меню **Выделить >** <a href="#Установка-указателя-текущего-местоположения">Установить указатель текущего местоположения</a>. Чтобы выполнить поиск по всему дереву объектов, выполните данную команду для корневого контейнера.

Затем щелчком правой клавиши мыши по заголовку окна системы откройте контекстное меню и выполните команду **Новая вкладка > Поисковая форма** (рис. 99).

<center>![](https://github.com/citoruspm/GeoData/blob/master/poisk_obektov_sistemy_1.png?raw=true "Рисунок 99 – Переход к вкладке Поиск")</center>

<center><small>Рисунок 99 – Переход к вкладке **Поиск**</center></small>

Откроется вкладка **Поиск** (рис. 100).

Чтобы выполнить поиск по названию или части названия объекта, введите условие поиска в поле **Название объекта**. Чтобы выполнить поиск по содержимому любого поля карточки объекта, введите условие поиска в поле **Контекстный поиск**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/poisk_obektov_sistemy_2.png?raw=true "Рисунок 100 – Вкладка Поиск")</center>

<center><small>Рисунок 100 – Вкладка **Поиск**</center></small>

Для поиска в данных полях можно использовать логические и маскирующие операторы.

Логические операторы:
<table BORDER CELLPADDING="5" CELLSPACING="0">
  <table style="font-size: 14px;">
<tr>
<th>№ п.п.</th>
<th>Оператор</th>
<th>Описание</th>
<th>Действие</th>
</tr>
<tr>
<td>1</td>
<td ALIGN=center><+></td>
<td>Логическое сложение.<br>Операция ИЛИ.</td>
<td>Отбираются данные, удовлетворяющие хотя бы одному из поставленных условий.</td>
</tr>
<tr>
<td>2</td>
<td><*>, <&>, <пробел></td>
<td>Логическое умножение И.</td>
<td>Отбираются данные, удовлетворяющие всем поставленным условиям. <Пробел> имеет более высокий приоритет. </td>
</tr>
<tr>
<td>3</td>
<td ALIGN=center><_></td>
<td>Логическое вычитание.</td>
<td>Исключает из области поиска данные, содержащие вычитаемую информацию.</td>
</tr>
<tr>
<td>4</td>
<td ALIGN=center><(>, <)></td>
<td>Группирующий оператор.</td>
<td>Повышает приоритет логического подвыражения.</td>
</tr>
</table>

Очередность выполнения:

- По убыванию: <b><(></b>, <b><)></b>, <b><пробел></b>, <b><+></b>, <b><_></b>, <b><&></b>, <b><*></b>.
- Операторы одного ранга (**<+>** и  **<_>**; **<&>** и <b><*></b>) выполняются последовательно слева направо.

Примеры использования логических операторов:

1. <b>_монтаж</b> — найти все записи, в которых не встречается ни одного слова, начинающегося с ***монтаж***.
2. **система_монтаж** — найти все записи, в которых встречается хотя бы одно слово, начинающееся с ***система***, и не встречается ни одного слова, начинающегося с ***монтаж***.

Маскирующие операторы (маски):

- **<%>** – показывает, что на его месте может стоять любое количество символов. То есть выражение **с%а** даст в результате слова ***система***, ***сова***, и т.д.
- **<!>** - показывает, что следует искать данные, содержащие ключевые выражения именно как отдельные слова, т.е. выражение **систем!** пропустит данные со словом ***систем**ный*.

Примеры использования масок:

1. Слово без символов масок, например, **система**, будет воспринято, как указание найти все слова, начинающиеся с **система**. Будут найдены такие слова как ***система**тический*, <i><b>система</b>тизированный</i> и т.д.
2. Восклицательный знак **<!>** в конце слова указывает на то, что введенное слово является не началом искомого слова, а составляет его целиком: например, на запрос - **система!** — будут найдены только слова ***система***. 
3. Знак процента **<%>** в любой части слова указывает на то, что между частями слова, которые он разделяет, может быть любое количество любых знаков. Например, запрос: **сис%ма** — выдаст все слова, начинающиеся с ***сис*** и заканчивающиеся на ***ма***. 

Если какие-либо условия поиска были введены неправильно, для быстрой очистки полей нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/39.png?raw=true), которая находится справа от поля **Название объекта**. Затем введите корректное условие поиска.

Чтобы выполнить поиск по указанным условиям, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/38.png?raw=true) справа от поля **Название объекта** или на клавишу **Enter** на клавиатуре.

Откроется новая вкладка, в которой отобразятся результаты поиска (при их наличии).

Страница результатов поиска содержит следующие элементы управления:

- Панель инструментов.
- Контекстное меню, которое полностью дублирует контекстное меню дерева объектов системы.

Панель инструментов содержит следующие кнопки:

- ![](https://github.com/citoruspm/GeoData/blob/master/40.png?raw=true) **Выполнить поиск еще раз** – запустить поиск по указанным условиям повторно.
- ![](https://github.com/citoruspm/GeoData/blob/master/41.png?raw=true) **Предыдущий запрос** – перейти к результатам предыдущего поискового запроса. Кнопка активна, если пользователь выполнял поиск два и более раз.
- ![](https://github.com/citoruspm/GeoData/blob/master/42.png?raw=true) **Следующий запрос** – перейти к результатам последующего поискового запроса. Кнопка активна, если перед этим была нажата кнопка **Предыдущий запрос**.
- ![](https://github.com/citoruspm/GeoData/blob/master/43.png?raw=true) **Остановить выполнение запроса** – при необходимости поиск можно остановить до его завершения. Например, если в результатах поиска выводится большой массив данных.
- ![](https://github.com/citoruspm/GeoData/blob/master/44.png?raw=true) **Сохранение параметров запроса** – сохранить параметры поисковых выражений, указанных во вкладке **Поиск**.
- ![](https://github.com/citoruspm/GeoData/blob/master/45.png?raw=true) **Ограничение результатов поиска** – указать дополнительные параметры запроса.
- ![](https://github.com/citoruspm/GeoData//blob/master/46.png?raw=true) **Показать результат поиска на карте** – если объекты, отображаемые в результатах поиска, содержат геоданные, открывается карта, на которую нанесены эти объекты.
- ![](https://github.com/citoruspm/GeoData/blob/master/47.png?raw=true) **Запустить утилиту**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/poisk_obektov_sistemy_3.png?raw=true "Рисунок 101 – Результаты поиска")</center>

<center><small>Рисунок 101 – Результаты поиска</center></small>

<a name="Табличное-представление-объектов-системы"></a>
## Табличное представление объектов системы

Данные в системе могут быть представлены как в виде дерева объектов, так и в виде таблиц. Таблицы в системе «CITORUS» являются утилитами (см. раздел <a href="#Утилита-«Таблица»">Утилита «Таблица»</a>).

Каждая таблица содержит объекты только одного типа и может быть редактируемой или нередактируемой. Если таблица является нередактируемой, то она предназначена только для просмотра данных. Если таблица является редактируемой, то над таблицей отображаются следующие командные кнопки (рис. 102, цифра 1):

- **Создать** – при нажатии на данную кнопку в новой вкладке открывается карточка нового объекта. Данный объект имеет тип, идентичный типу объектов, которые хранятся в таблице, и помещается в контейнер, указанный в свойстве утилиты **createParent**.
- **Удалить** – предназначена для удаления строки, выделенной в таблице.
- **Редактировать** – предназначена для перехода в карточку объекта, строка которого выделена в таблице. Карточка объекта открывается в <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования</a>.
- **Показать на карте** – кнопка отображается, если объекты, которые представлены в таблице, содержат геоданные. При нажатии на данную кнопку в новой вкладке открывается <a href="#Работа-с-картой">карта</a>, на которой отмечены объекты таблицы.

В заголовке каждого столбца таблицы может содержаться фильтр (рис. 102, цифра 2). Наличие и тип фильтра определяется в настройках утилиты.

В информационной строке таблицы может отображаться общее количество записей в таблице или сумма значений какого-либо столбца таблицы (рис. 102, цифра 3). Наличие и тип данных, отображаемых в информационной строке, определяются в настройках утилиты.

<center>![](https://github.com/citoruspm/GeoData/blob/master/tablichnoe_predstavlenie_1.png?raw=true "Рисунок 102 – Инструменты управления таблицей")</center>

<center><small>Рисунок 102 – Инструменты управления таблицей</center></small>

<a name="Подсистема-геоданных"></a>
# ПОДСИСТЕМА ГЕОДАННЫХ

<a name="Введение"></a>
## Введение

Подсистема геоданных представляет собой комплекс платформенных функций, доступных в составе Платформы автоматизации «CITORUS» при условии наличия серверного дополнения Веб-ГИС платформы «ЦИТОРУС.ГИС».

Данные функции позволяют решать различные задачи в конфигурациях, создаваемых на базе Платформы автоматизации CITORUS, с преобладающей картографической компонентой.

В частности:

* Управление массивами геокодированных данных в объектном представлении в составе базы данных.
* Управление геокодированными данными посредством встроенного в пользовательский интерфейс ГИС-инструментария.
* Управление геоинформационными слоями в различных векторных и растровых форматах, настройка параметров хранения, обработки, визуализации, кэширования таких слоев.
* Импорт/экспорт массивов геокодированных данных в различных форматах, поддержка синхронизации с внешними системами.
* Визуализация геоинформационных слоев, размещенных на удаленных ресурсах.

<a name="Управление-геокодированными-объектами-Универсальная-геокатегория"></a>
## Управление геокодированными объектами. Универсальная геокатегория

Информационные объекты системы создаются на основе типов объектов. Типы объектов собираются из категорий. Каждая категория представляет собой определенный набор свойств объекта. Как правило, типы собираются из категорий, которые содержат атрибутивную информацию об объекте: название, описание и т.д. Такие категории создаются пользователями вручную исходя из свойств объектов, которыми оперирует система.

Кроме того, в тип может быть добавлена категория, которая содержит геоданные объекта. Эта категория представлена в системе по умолчанию и называется *универсальной геокатегорией*. Универсальная геокатегория (также – *геокатегория*) может быть включена в состав любого типа объектов при создании нового типа или редактировании существующего.

Если в тип объектов добавлена геокатегория, то каждый объект, который создан на основе данного типа, имеет геокатегорию (рис. 103). Геокатегория объекта содержит географические координаты данного объекта, визуально представляет его на карте и обеспечивает возможность его редактирования.

На рисунке 1 представлены инструменты геокатегории объекта:

1. Карта.
2. Визуальный редактор.
3. Область географических координат объекта.
4. Инструменты экспорта/импорта геоданных объекта.

<center> ![](https://github.com/citoruspm/GeoData/blob/master/ris1.png?raw=true "Рисунок 103 – Универсальная геокатегория") </center>

<center><small>Рисунок 103 – Универсальная геокатегория</center></small>

<a name="Работа-с-картой-в-универсальной-геокатегории"></a>
### Работа с картой в универсальной геокатегории

Изменение масштаба карты в универсальной геокатегории выполняется стандартными
способами, которые используются при работе с географическими информационными
системами. Например:

1.  Прокруткой колесика мыши: прокручивание от себя увеличивает масштаб, на себя – уменьшает.
2.  С помощью масштабной линейки, которая расположена в левой части карты: нажатие на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/2.png?raw=true) или перемещение бегунка вверх увеличивает масштаб, нажатие кнопки ![](https://github.com/citoruspm/GeoData/blob/master/3.png?raw=true) и перемещение бегунка вниз уменьшает масштаб.

Для перемещения по карте можно использовать клавиши клавиатуры, на которых изображены стрелки, указывающие вверх, вниз, влево и вправо. Кроме того, перемещаться по карте можно, удерживая левую клавишу мыши.

Для быстрого возврата к маркеру объекта предназначена кнопка **Цель** ![](https://github.com/citoruspm/GeoData/lob/master/1.png?raw=true), которая расположена в левой части карты.

При необходимости на карте можно отобразить координатную сетку. Для этого следует нажать на кнопку **Свернуть/Развернуть** ![](https://github.com/citoruspm/GeoData/blob/master/4.png?raw=true), а затем – на кнопку **Координатная сетка** ![](https://github.com/citoruspm/GeoData/blob/master/5.png?raw=true).

<a name="Добавление-геоданных-объекта"></a>
### Добавление геоданных объекта

Если карточка объекта была создана пустой, и геокатегория не содержит геоданных, в области координат объекта (рис. 104) укажите:

-   Географические координаты объекта, если объект следует представить на карте в виде маркера.
-   Географические координаты первой точки объекта, если объект следует представить на карте в виде линии или полигона.

Географические координаты можно указать в следующих форматах:

- в градусах в виде десятичной дроби (разделитель – запятая) – данный формат выбран по умолчанию;
- в градусах, минутах и секундах.

Переключение между форматами осуществляется с помощью кнопок **ГГ.ГГГГГГ** и **ГГºММ'СС.с**.

<center> ![](https://github.com/citoruspm/GeoData/blob/master/ris2.png?raw=true "Рисунок 104 – Область координат объекта")</center>

<center><small>Рисунок 104 – Область координат объекта</center></small>

Указанная географическая координата отобразится на карте в виде маркера. При необходимости выполните дальнейшее редактирование фигуры объекта так, как это описано ниже.

<a name="Редактирование-геоданных-объекта"></a>
### Редактирование геоданных объекта

Редактирование фигуры объекта можно выполнять:

-   На карте, с помощью инструментов визуального редактора. При этом в области координат будут соответствующим образом меняться координаты точек фигуры.
-   В области координат, вручную добавляя и редактируя координаты точек. При этом на карте в реальном режиме времени фигура будет перемещаться и видоизменяться в соответствии с указанными координатами.

Чтобы редактировать фигуру с помощью карты, в левой части карты нажмите на кнопку **Свернуть/Развернуть** ![](https://github.com/citoruspm/GeoData/blob/master/4.png?raw=true). Поверх карты отобразятся инструменты визуального редактора (рис. 105).

Если объект представлен на карте в виде маркера, и этот маркер требуется переместить, нажмите на кнопку **Редактировать слой** ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true). Затем переместите маркер с помощью мыши в требуемое место и нажмите на кнопку **Сохранить**, которая отображается под кнопкой ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true).

<center> ![](https://github.com/citoruspm/GeoData/blob/master/ris3.png?raw=true "Рисунок 105 – Перемещение маркера")</center>

<center><small>Рисунок 105 – Перемещение маркера</center></small>

Если из точки следует сделать линию, добавьте на карту новую точку. Для этого нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/7.png?raw=true). Указатель мыши преобразится в маркер (рис. 106). Установите данный маркер щелчком мыши на требуемом месте карты. От первого маркера до второго будет прорисована линия.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris4.png?raw=true "Рисунок 106 – Установка маркера")</center>

<center><small>Рисунок 106 – Установка маркера</center></small>

Если из линии требуется сделать полигон, воспользуйтесь одним из следующих
способов:

1.  Добавьте новые точки тем же способом. Для выхода из режима установки маркеров нажмите на кнопку **Отмена**, которая отображается под кнопкой ![](https://github.com/citoruspm/GeoData/blob/master/7.png?raw=true).
2.  Выйдите из режима установки маркеров и перейдите в режим редактирования слоя. Для этого нажмите на кнопку **Редактировать слой** ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true). Для прорисовки полигона последовательно перемещайте мышью промежуточные точки, которые отображаются на линии (рис. 107). Чтобы выйти из режима редактирования слоя, нажмите на кнопку **Сохранить**, которая расположена под кнопкой **Редактировать слой** ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true).

Если требуется удалить какую-либо из точек фигуры, используйте соответствующую команду контекстного меню области координат (см. ниже).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris5.png?raw=true "Рисунок 107 – Прорисовка полигона")</center>

<center><small>Рисунок 107 – Прорисовка полигона</center></small>

Чтобы добавить для фигуры новые точки в области координат, воспользуйтесь одним из следующих способов:

1. Нажмите правой клавишей мыши на кнопку ![](https://github.com/citoruspm/GeoData//blob/master/8.png?raw=true), которая расположена слева от требуемой координаты. Например, если новую точку следует добавить между первой и второй координатой, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/8.png?raw=true), расположенную слева от первой координаты (рис. 108). Затем выполните одну из следующих команд контекстного меню:
 -  **Создать новый** – чтобы создать координату, в полях **Широта** и **Долгота** которой будут указаны градусы (целые числа до запятой) из выбранной координаты (рис. 109).
 -  **Клонировать** – чтобы создать координату, идентичную выбранной.<br><br>
<center>![](https://github.com/citoruspm/GeoData/blob/master/ris6.png?raw=true "Рисунок 108 – Добавление координаты")</center><br>
<center><small>Рисунок 108 – Добавление координаты</center></small><br>
2. Нажмите левой клавишей мыши на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/8.png?raw=true), которая расположена слева от требуемой координаты. Ниже добавится новая координата, в полях **Широта** и **Долгота** которой будут указаны градусы (целые числа до запятой) из выбранной координаты (рис. 109).<br><br>
<center>![](https://github.com/citoruspm/GeoData/blob/master/ris7.png?raw=true "Рисунок 109 – Строка новой координаты")</center>

<center><small>Рисунок 109 – Строка новой координаты</center></small>

Если какие-либо координаты точки следует поменять местами, используйте команды контекстного меню **Поднять наверх** и **Опустить вниз**.

Если требуется удалить какую-либо координату фигуры, выполните для этой координаты команду контекстного меню **Удалить**.

<a name="Экспорт-импорт-геоданных-объекта"></a>
### Экспорт/импорт геоданных объекта

Если требуется сохранить геоданные, которые содержатся в универсальной геокатегории (например, чтобы перенести их в универсальную геокатегорию другого объекта), нажмите на кнопку **Скопировать отрисованный GeoJSON слоя в буфер обмена** ![](https://github.com/citoruspm/GeoData/blob/master/9.png?raw=true) (рис. 110).

Чтобы импортировать скопированные геоданные в универсальную геокатегорию другого объекта, перейдите в его карточку. Вставьте геоданные, сохраненные в буфере обмена, в строку **Поле для импортирования своего GeoJSON**. Затем нажмите на кнопку **Отрисовать скопированный GeoJSON** ![](https://github.com/citoruspm/GeoData/blob/master/10.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris8.png?raw=true "Рисунок 110 – Инструменты для экспорта/импорта геоданных объекта")</center>

<center><small>Рисунок 110 – Инструменты для экспорта/импорта геоданных объекта</center></small>

<a name="Работа-с-картографическими-слоями"></a>
## Работа с картографическими слоями

Подсистема геоданных предоставляет возможность работы со следующими типами слоев:

-   Постоянные векторные слои,
-   Временные векторные слои,
-   Растровые слои.

Для настройки и хранения слоев в дереве объектов предназначена системная папка **Картографические слои**. Данная папка содержит вложенную системную папку **Геоподосновы**, которая предназначена для настройки и хранения <a href="#Подключение-удаленного-растрового-слоя">геоподоснов</a>. Содержимое папки **Геоподосновы** отображается в <a href="#Меню-управления-геоподосновами">Меню управления геоподосновами</a> на карте.

Для систематизации других слоев внутри системной папки **Картографические слои** рекомендуется создать следующие группы слоев:

-   **Основное меню** – для настройки и хранения постоянных векторных и растровых слоев.
-   **Временные общие слои** – для настройки и хранения временных векторных слоев (Слоев CQL).
-   **Личные слои** – для слоев различных типов, сохраненных в профиле текущего пользователя.

Внутри данных групп слоев можно <a href="#Создание-группы-слоевкартографического-слоя"> создавать группы слоев</a> любого уровня вложенности. Группы предназначены для систематизации и <a href="#Настройка-группыслоя">одновременной настройки</a> групп/слоев, которые входят в их состав.

Настройка порядка расположения групп/слоев внутри системной папки **Картографические слои** и перемещение слоев из группы в группу (при необходимости) осуществляется в соответствии с общими принципами управления объектами системы.

Иерархия групп/слоев, которые содержатся в системной папке **Картографические слои** (за исключением папки **Геоподосновы**), воспроизводится в <a href="#Меню-управления-слоями">меню управления слоями</a> на карте. Если пользователь меняет порядок расположения групп и/или вложенных в них слоев в папке **Картографические слои**, то после перезагрузки карты соответствующим образом меняется порядок расположения групп/слоев в меню управления слоями.

<a name="Порядок-действий-при-создании-группы-слоя"></a>
### Порядок действий при создании группы/слоя

Чтобы создать в системе группу слоев, выполните следующие действия:

1.  Создайте пустой <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a> типа **Группа**.
2.  Наполните данную группу вложенными группами и/или картографическими слоями.
3.  Если требуется выполнить одновременную настройку вложенных групп/слоев, выполните <a href="#Настройка-группыслоя">настройку свойств</a> данной группы.
4.  Выполните настройку прав доступа пользователей к данной группе.

Чтобы создать в системе слой какого-либо типа, выполните следующие действия:

1.  Создайте пустой <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a>.
2.  Если из картографического слоя следует создать постоянный векторный слой, выполните <a href="#Создание-постоянного-векторного-слоя">загрузку геокодированных данных в формате JSON</a> и/или переместите в данный слой объекты, содержащие универсальную геокатегорию, и/или создайте связь слоя с данными объектами.
3.  Если из картографического слоя следует создать временный векторный слой, настройте в данном слое поисковый запрос и/или переместите в данный слой объекты, содержащие универсальную геокатегорию, и/или создайте связь слоя с данными объектами.
4.  Если из картографического слоя следует создать растровый слой, выполните <a href="#Подключение-удаленного-растрового-слоя">подключение удаленного растрового слоя</a>.
5.  При необходимости выполните <a href="#Настройка-группыслоя">настройку картографического слоя</a>.
6.  Выполните настройку прав доступа пользователей к данному картографическому слою.

<a name="Создание-группы-слоев-картографического-слоя"></a>
### Создание группы слоев/картографического слоя

Чтобы создать группу слоев или картографический слой, в дереве объектов выделите правой клавишей мыши:

-   Системную папку **Картографические слои**, чтобы создать группу/слой на верхнем уровне иерархии.
-   Системную папку **Картографические слои > Геоподосновы**, чтобы создать <a href="#Подключение-удаленного-растрового-слоя">геоподоснову</a>.
-   Требуемую группу слоев, чтобы создать вложенную группу/слой.

Затем выполните команду контекстного меню **Создать > Выбрать из списка** (рис. 111).

<center>![](https://raw.githubusercontent.com/citoruspm/GeoData/master/ris9.png "Рисунок 111 – Создание картографического слоя")</center>

<center><small>Рисунок 111 – Создание картографического слоя</center></small>

В окне **Выбор типа создаваемого объекта** (рис. 112) найдите в списке тип объектов **Картографический слой**. Данный тип содержится в системе по умолчанию.

Чтобы выполнить быстрый поиск этого типа, в строке ввода укажите начальные буквы его названия (например, «карт») и нажмите на клавишу **Enter** на клавиатуре. В списке отобразятся типы объектов, соответствующие условиям поиска. Выберите тип
**Картографический слой** двойным щелчком мыши.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris10.png?raw=true "Рисунок 112 – Окно **Выбор типа создаваемого объекта**")</center>

<center><small>Рисунок 112 – Окно **Выбор типа создаваемого объекта**</center></small>

Откроется карточка нового объекта типа **Картографический слой** (рис. 113). Заполните в карточке следующие поля:

-   **Название** – укажите название, под которым данная группа/слой будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы.
-   **Системное имя** – может содержать только латинские буквы и цифры без пробелов.
-   **Имя в меню** – название, под которым группа/слой будет отображаться в меню управления слоями.
-   **Тип слоя**:

    -   Если требуется создать группу слоев, выберите значение **Группа**.
    -   Если требуется создать геоподоснову, выберите значение **Подложка**.
    -   Если требуется создать картографический слой, выберите значение **Слой**.

На панели инструментов карточки нажмите на кнопку **Сохранить** ![](https://github.com/citoruspm/GeoData/blob/master/11.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris11.png?raw=true "Рисунок 113 – Карточка нового объекта типа **Картографический слой**")</center>

<center><small>Рисунок 113 – Карточка нового объекта типа **Картографический слой**</center></small>

Дерево объектов автоматически обновится, и созданная группа/слой отобразится в выбранной папке.

<a name="Создание-постоянного-векторного-слоя"></a>
### Создание постоянного векторного слоя

Создание постоянного векторного слоя может быть выполнено размещением в контейнере объектов/связей объектов из других сегментов системы, а также путем загрузки в пустой <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a> геокодированных данных в формате JSON. Для объектов, описание которых содержится в файле JSON, необходимо предварительно создать соответствующий тип объектов. Например, если в файле содержится описание заправочных станций, в системе необходимо создать тип объекта **Заправочные станции**.

Чтобы выполнить загрузку геокодированных данных в картографический слой, в главном меню системы нажмите на кнопку **Карта** (рис. 114).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris12.png?raw=true "Рисунок 114 – Кнопка **Карта**")</center>

<center><small>Рисунок 114 – Кнопка **Карта**</center></small>

Перетащите мышью на карту файл JSON из папки проводника Windows, в которой он расположен. В диалоговом окне, представленном на рисунке 115, нажмите на кнопку **ОК**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris13.png?raw=true "Рисунок 115 – Подтверждение действия")</center>

<center><small>Рисунок 115 – Подтверждение действия</center></small>

В окне **Выбор контейнера слоя** (рис. 116) выберите для загрузки объекта <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a>. Нажмите на кнопку **Далее**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris14.png?raw=true "Рисунок 116 – Окно **Выбор контейнера слоя**")</center>

<center><small>Рисунок 116 – Окно **Выбор контейнера слоя**</center></small>

В окне **Выбор типа** (рис. 117) укажите, о каком типе объектов содержится информация в файле JSON.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris15.png?raw=true "Рисунок 117 – Окно **Выбор типа**")</center>

<center><small>Рисунок 117 – Окно **Выбор типа**</center></small>

Откроется окно **Сопоставление полей** (рис. 118). В левой части данного окна (1) отображается дерево свойств импортируемого файла, в правой части (2) – дерево свойств выбранного типа объектов. Свойства файла и свойства типа следует сопоставить друг другу с помощью таблицы, расположенной в центральной части окна (3).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris16.png?raw=true "Рисунок 118 – Окно **Сопоставление полей**")</center>

<center><small>Рисунок 118 – Окно **Сопоставление полей**</center></small>

Чтобы начать сопоставление, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/12.png?raw=true), которая расположена над таблицей.

В таблицу добавится пустая строка. Щелкните по ней мышью, чтобы активировать свойства файла (1) и типа (2).

При сопоставлении свойств выполните следующие шаги:

1.  Поместите в системное имя типа любое свойство файла (рис. 119). Для этого разверните системные свойства типа: **System > Основные свойства**. Двойным щелчком мыши выделите свойство **name**. Оно переместится в столбец таблицы **Куда**. Разверните свойства файла и двойным щелчком мыши выделите любое из его свойств. Оно переместится в столбец таблицы **Что**.</br></br>
<center>![](https://github.com/citoruspm/GeoData/blob/master/ris16_1.png?raw=true "Рисунок 119 – Системное имя типа")</center></br>
<center><small>Рисунок 119 – Системное имя типа</center></small></br>
2.  Укажите, в какое свойство типа следует поместить геоданные из файла (рис. 120). Для этого добавьте в таблицу новую строку нажатием на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/12.png?raw=true), которая расположена над таблицей, и щелкните по данной строке мышью, чтобы активировать свойства файла и типа. Затем в свойствах типа выберите свойство **object > geo > geoJSON**, а в свойствах файла – свойство **geometry**.</br></br>
<center>![](https://github.com/citoruspm/GeoData/blob/master/ris16_2.png?raw=true "Рисунок 120 – Геоданные")</center></br>
<center><small>Рисунок 120 – Геоданные</center></small></br>
3.  Укажите, в какие поля типа следует поместить основные свойства файла (properties). Пример сопоставления представлен на рисунке 121.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris16_3.png?raw=true "Рисунок 121 – Основные свойства")</center></br>
<center><small>Рисунок 121 – Основные свойства</center></small>

Чтобы выполнить загрузку данных в соответствии с указанными требованиями, нажмите на кнопку **Запустить**. Данная кнопка расположена в верхней части окна **Сопоставление полей**.

Импорт данных будет выполнен в фоновом режиме. После завершения импорта обновите содержимое папки **Картографические слои**. В составе картографического слоя, в который осуществлялась загрузка данных, отобразятся геокодированные объекты, соответствующие объектам, описанным в файле.

<a name="Создание-временного-векторного-слоя"></a>
### Создание временного векторного слоя
Описание будет добавлено позже.

<a name="Подключение-удаленного-растрового-слоя"></a>
### Подключение удаленного растрового слоя

Растровые слои можно подключать как из источников, находящихся на внешних серверах, так и из внутреннего репозитория, находящегося на GIS-сервере CITORUS. Подключение удаленного растрового слоя может выполняться в системе для решения следующих задач:

-   Для создания *геоподосновы* – картографической поверхности, которая является фоном для слоев на <a href="#Работа-с-картой">карте</a>. В качестве геоподоснов могут выступать, например, подключенные удаленно картографические сервисы Google Maps, Яндекс.Карты и другие.
-   Для создания слоя, который позволяет получать необходимые данные из внутреннего репозитория или с какого-либо удаленного сервиса в онлайн-режиме.

Чтобы подключить растровый слой, откройте карточку ранее созданного <a href="#Создание-группы-слоевкартографического-слоя">картографического слоя</a> в режиме редактирования и заполните следующие поля:

-   **Источник** – выберите тип сервиса, с которого осуществляется подключение удаленного растрового слоя.
-   **Внешний url** – вставьте ссылку на данный сервис. Например, **http://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}**.
-   **Доп. опции** – укажите дополнительные параметры запроса к удаленному слою. Например, для WMS-сервисов строка может выглядеть следующим образом:  
    **{"constructorOptions":{"layers":"name","format":"image/png","bbox":"26,9,180,83.5","transparent":true}}**, где:
    
    -   **layers** – название слоя,
    -   **format** – формат данных слоя,
    -   **bbox** – границы слоя,
    -   **transparent** – прозрачность слоя (true/false).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris17.png?raw=true "Рисунок 122 – Настройки растрового слоя")</center>

<center><small>Рисунок 122 – Настройки растрового слоя</center></small>

Сохраните данный слой. Для этого на панели инструментов карточки нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/11.png?raw=true).

При необходимости выполните дополнительную <a href="#Настройка-группыслоя">настройку слоя</a>.

<a name="Настройка-группы-слоя"></a>
### Настройка группы/слоя

Группы слоев и картографические слои имеют идентичные настройки. Если настройка свойств осуществляется в карточке группы слоев, то данные настройки применяются ко всем группам/слоям, вложенным в данную группу. Если настройка свойств выполняется в карточке картографического слоя, то настройки применяются только к данному слою. Настройки слоя имеют больший приоритет, чем настройки группы слоев, в которую он входит.

Чтобы выполнить настройку какой-либо группы слоев или картографического слоя, выполните один из следующих шагов:

-   В дереве объектов выделите требуемую группу/слой нажатием правой клавиши мыши и выполните команду контекстного меню **Редактировать** (рис. 123). В новой вкладке откроется карточка группы/слоя (рис. 124).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris18.png?raw=true "Рисунок 123 – Контекстное меню")</center>

<center><small>Рисунок 123 – Контекстное меню</center></small>

-   В дереве объектов выделите требуемую группу/слой нажатием левой клавиши мыши. В новой вкладке откроется карточка группы/слоя (рис. 124). Чтобы активировать ее поля, на панели инструментов нажмите на кнопку **Редактировать** ![](https://github.com/citoruspm/GeoData/blob/master/13.png?raw=true).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris19.png?raw=true "Рисунок 124 – Карточка картографического слоя")</center>

<center><small>Рисунок 124 – Карточка картографического слоя</center></small>

Для редактирования доступно любое поле карточки группы/слоя.

<a name="Общие-настройки"></a>
#### Общие настройки

Следующие поля предназначены как для настройки групп слоев, так и для настройки слоев различных типов (рис. 125):

-   **Название** – имя, под которым данная группа/слой отображается в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы.
-   **Описание (всплывающая подсказка)** – поле для текстового описания группы/слоя.
-   **Ссылки** – поле для ввода ссылки (указателя) на другой объект.
-   **Системное имя** – обязательное поле. Без системного имени группа/слой существовать не может. Системное имя может содержать только латинские буквы и цифры без пробелов.
-   **Имя в меню** – название, под которым данная группа/слой отображается в <a href="#Меню-управления-слоями">меню управления слоями</a>.
-   **Тип слоя** – выпадающий список для выбора типа объекта:

    -   **Группа** – группа слоев. Группы слоев содержатся в папке **Картографические слои** дерева объектов и в <a href="#Меню-управления-слоями">меню управления слоями</a>.
    -   **Слой** – картографический слой. Слои содержатся в папке **Картографические слои** дерева объектов и в <a href="#Меню-управления-слоями">меню управления слоями</a>.
    -   **Подложка** – геоподоснова. Геоподосновы содержатся в папке **Картографические слои > Геоподосновы** дерева объектов и в <a href="#Меню-управления-геоподосновами">меню управления геоподосновами</a>.
-   **Включить по умолчанию** – если флажок установлен, то слой отображается на карте постоянно. Даже если пользователь отключает данный слой в меню управления слоями, после перезагрузки карты слой автоматически включается и отображается снова.
-   **Минимальное и максимальное приближение** – определение минимального и максимального масштаба, на котором отображается слой.
-   **Всплывающая подсказка** – текст для всплывающей подсказки, которая отображается при наведении курсора мыши на название слоя в <a href="#Меню-управления-слоями">меню управления слоями</a>. По умолчанию всплывающая подсказка содержит только название, указанное в поле **Имя в меню**.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris20.png?raw=true "Рисунок 125 – Общие поля")</center>

<center><small>Рисунок 125 – Общие поля</center></small>

<a name="Настройки-векторных-слоев"></a>
#### Настройки векторных слоев

<a name="Настройки-кластеризации"></a>
##### Настройки кластеризации

При необходимости для объектов векторных слоев можно **Использовать кластеризацию** (рис. 126).

*Кластеризация* – это объединение объектов слоя, расположенных близко друг к другу, при увеличении масштаба карты. При объединении объекты отображаются в виде одной точки (кластера). На кластере представлено число объектов, которые он объединяет. При уменьшении масштаба карты происходит обратный процесс: кластер распадается на отдельные объекты.

По умолчанию кластер отображается на карте в виде белой точки. Внешний вид кластера можно настроить с помощью следующих полей:

-   **Фон кластера** – цвет заливки кластера;
-   **Цвет обводки** – цвет рамки кластера;
-   **Цвет шрифта** – цвет шрифта цифры, которая отображается в центре кластера и обозначает число объединенных объектов.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris21.png?raw=true "Рисунок 126 – Настройки векторных слоев")</center>

<center><small>Рисунок 126 – Настройки векторных слоев</center></small>

<a name="Настройка-отображения-маркеров-слоя"></a>
##### Настройка отображения маркеров слоя

Чтобы упростить визуальное восприятие объектов слоя на карте, можно назначить для них подходящую по смыслу иконку. Например, для больниц можно загрузить иконку с изображением красного креста. Для этого в поле **Маркер** (рис. 126) следует нажать на кнопку **Прикрепить файл** и в проводнике Windows выбрать файл иконки. После сохранения карточки слоя его объекты будут обозначены на карте с помощью выбранной иконки.

<a name="Свойства-всплывающего-окна"></a>
##### Свойства всплывающего окна

Группа полей **Свойства всплывающего окна** (рис. 126) предназначена для создания и наполнения данными всплывающих окон. Всплывающие окна отображаются при наведении курсора мыши на объекты слоя на <a href="#Работа-с-картой">карте</a> и могут содержать одно или несколько свойств объекта.

Чтобы создать всплывающее окно, следует добавить в него хотя бы одно свойство. Для этого:

-   В группе полей **Свойства всплывающего окна**, в поле слева укажите название свойства объекта, которое следует отображать во всплывающем окне. Например, **Порядковый номер**.
-   В поле справа введите строку вида **\<object.link.field\>**, где:

    -   **link** – ссылка на категорию, которая содержит поле для описания требуемого свойства. Например, чтобы во всплывающем окне отображался порядковый номер объекта, откройте категорию, которая была использована при создании типа данного объекта, и которая содержит поле **Порядковый номер**, и скопируйте ссылку (link) на данную категорию.
    -   **field** – название требуемого поля в категории. Например, **IndexNumber**.

Чтобы добавить во всплывающее окно еще одно свойство объекта, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/8.png?raw=true), которая расположена слева от группы полей **Свойства всплывающего окна**.

<a name="Растеризация-векторного-слоя"></a>
##### Растеризация векторного слоя

Чтобы преобразовать векторный слой в растровый слой, следует установить флажок **Включить растеризацию** (рис. 126). Для настройки свойств преобразованного слоя предназначено поле **Настр. растер.** (см. <a href="#Настройки-растровых-слоев">Настройки растровых слоев</a>).

<a name="Кэширование-данных"></a>
##### Кэширование данных

Чтобы данные векторных слоев сохранялись в кэше, поставьте флажок **Кэширование данных** (рис. 126).

<a name="Экспорт-геоданных-слоя"></a>
##### Экспорт геоданных слоя

Чтобы сохранить геокодированные данные слоя в файл в формате JSON, в поле **Экспортировать** нажмите на кнопку **GeoJSON** (рис. 126). Файл сохранится в папку, выбранную в браузере для загрузки данных по умолчанию.

<a name="Настройки-растровых-слоев"></a>
#### Настройки растровых слоев

Для настройки растровых слоев в карточке предназначены следующие поля (рис. 127):

-   **Источник** – тип сервиса, с которого осуществляется подключение удаленного растрового слоя:

    -   **Запрос**,
    -   **Сервис тайлов**,
    -   **Сервис тайлов WMS** – подключение к слою осуществляется по протоколу WMS,
    -   **Сервис тайлов ArcGIS** – подключаемый слой создан с помощью ПО ArcGIS,
    -   **Сервис GeoJSON**,
    -   **Сервис Геомиксер**.
-   **Внешний url** – ссылка на сервис, на котором размещен подключаемый растровый слой.
-   **Кэширование тайлов** – сохранять в кэше данные растровых слоев.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris22.png?raw=true "Рисунок 127 – Настройки растровых слоев")</center>

<center><small>Рисунок 127 – Настройки растровых слоев</center></small>

-   **Доп. опции** – дополнительные параметры запроса к удаленному слою. Например, для WMS-сервисов в поле можно вставить строку следующего вида:  
    **{"constructorOptions":{"layers":"name","format":"image/png","bbox":"26,9,180,83.5","transparent":true}}**,
    где:
    
    -   **layers** – название слоя,
    -   **format** – формат данных слоя,
    -   **bbox** – границы слоя,
    -   **transparent** – прозрачность слоя (true/false).
-   **Настр. растер.** – данное поле аналогично полю **Доп. опции**, но используется для настройки растровых слоев, которые были преобразованы из векторных (см. раздел <a href="#Растеризация-векторного-слоя">Растеризация векторного слоя</a>).

<a name="Работа-с-картой"></a>
## Работа с картой

Чтобы открыть карту, в главном меню системы нажмите на кнопку **Карта** (рис. 128).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris23.png?raw=true "Рисунок 128 – Кнопка **Карта**")</center>

<center><small>Рисунок 128 – Кнопка **Карта**</center></small>

Карта откроется в новой вкладке (рис. 129).

Изменение масштаба карты выполняется стандартными способами, которые используются при работе с географическими информационными системами. Например:

1.  Прокруткой колесика мыши: прокручивание от себя увеличивает масштаб, на себя – уменьшает.
2.  С помощью масштабной линейки, которая расположена в левой части карты: нажатие на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/2.png?raw=true) или перемещение бегунка вверх увеличивает масштаб, нажатие кнопки ![](https://github.com/citoruspm/GeoData/blob/master/3.png?raw=true) и перемещение бегунка вниз уменьшает масштаб.

Текущий масштаб карты отображается в левом нижнем углу.

Для перемещения по карте можно использовать клавиши клавиатуры, на которых изображены стрелки, указывающие вверх, вниз, влево и вправо. Кроме того, перемещаться по карте можно, удерживая левую клавишу мыши.

Для работы с картой предназначены следующие меню:

1.  Меню управления геоподосновами.
2.  Меню управления слоями.
3.  Меню инструментов.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris24.png?raw=true "Рисунок 129 – Инструменты работы с картой")</center>

<center><small>Рисунок 129 – Инструменты работы с картой</center></small>

<a name="Меню-управления-геоподосновами"></a>
### Меню управления геоподосновами

Меню управления геоподосновами разворачивается нажатием на кнопку, представленную на рисунке 129 под цифрой 1. В меню отображается список <a href="#Подключение-удаленного-растрового-слоя">геоподоснов</a>, созданных пользователем (рис. 130).

Геоподосновы – это картографические поверхности, которые служат фоном для слоев. Для выбора какой-либо геоподосновы щелкните по ней мышью.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris25.png?raw=true "Рисунок 130 – Меню управления геоподосновами")</center>

<center><small>Рисунок 130 – Меню управления геоподосновами</center></small>

<a name="Меню-управления-слоями"></a>
### Меню управления слоями

Меню управления слоями разворачивается при нажатии на кнопку, представленную на рисунке 131.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris26.png?raw=true "Рисунок 131 – Кнопка перехода в меню управления слоями")</center>

<center><small>Рисунок 131 – Кнопка перехода в меню управления слоями</center></small>

Данное меню содержит следующие инструменты (рис. 132):

-   **Поиск по координатам** – группа полей позволяет выполнить быстрый переход в требуемую точку на карте. Географические координаты точки можно указать в градусах в виде десятичной дроби (разделитель – запятая) или в градусах, минутах и секундах.
-   **Поиск по территориальному объекту** – поле или группа полей позволяет выполнить быстрый переход к требуемому территориальному объекту.
-   **Сохранить карту** – при нажатии на данную кнопку система запоминает текущую конфигурацию карты: фокус карты, включенный слой и выбранную геоподоснову – и воспроизводит ее при повторном открытии карты.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris27.png?raw=true "Рисунок 132 – Меню управления слоями")</center>

<small><center>Рисунок 132 – Меню управления слоями</center></small>

-   ![](https://github.com/citoruspm/GeoData/blob/master/14.png?raw=true) – координаты точки, на которую указывает курсор на карте (рис. 133).
-   **Текущий масштаб** – текущий масштаб слоя.
-   **Доступные слои** – в списке отображаются слои, которые содержатся в дереве объектов, в папке **Картографические слои** (за исключением папки **Геоподосновы**) и доступны текущему пользователю (см. раздел Настройка прав доступа). Чтобы включить/отключить какой-либо слой или группу слоев на карте, следует поставить/снять флажок, соответствующий данному слою или группе слоев.

<center> ![](https://github.com/citoruspm/GeoData/blob/master/ris28.png?raw=true "Рисунок 133 – Меню управления слоями")</center>

<small><center>Рисунок 133 – Меню управления слоями</center></small>

Если в меню управления слоями для отображения выбран векторный слой, атрибутивная информация которого содержит дату, или растровый слой, у точек которого есть признак даты, то в левом нижнем углу карты появляется таймлайн (рис. 134). Данный инструмент предназначен для фильтрации объектов/точек слоя по дате. Например, если объекты/точки слоя обозначают на карте пожары, которые произошли в первом полугодии 2017 года, то с помощью таймлайна можно настроить отображение пожаров, которые произошли в определенный день или за какой-либо
временной промежуток в данном полугодии.

Интервал дат, которые содержат объекты/точки слоя, отображается под таймлайном.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris29.png?raw=true "Рисунок 134 – Таймлайн")</center>

<center><small>Рисунок 134 – Таймлайн</center></small>

Чтобы на карте отобразились объекты/точки за какой-либо временной период, воспользуйтесь одним из следующих способов:

1.  Обозначьте требуемый временной период на таймлайне с помощью левого и правого бегунка.
2.  Откройте календарь нажатием на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/15.png?raw=true) (рис. 135). Щелчком мыши выберите начальную дату требуемого периода. Затем, удерживая на клавиатуре клавишу **Shift**, щелчком мыши отметьте конечную дату требуемого периода.

Чтобы на карте отобразились объекты/точки за определенную дату, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/15.png?raw=true) и укажите требуемую дату с помощью календаря.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris30.png?raw=true "Рисунок 135 – Календарь")</center>

<center><small>Рисунок 135 – Календарь</center></small>

<a name="Меню-инструментов"></a>
### Меню инструментов

Меню инструментов разворачивается при нажатии на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/4.png?raw=true) (рис. 136).

Включение того или иного инструмента из меню осуществляется нажатием на соответствующую ему кнопку, выключение инструмента – повторным нажатием на соответствующую кнопку.

С помощью кнопок меню инструментов можно выполнить следующие действия:

- ![](https://github.com/citoruspm/GeoData/blob/master/5.png?raw=true) – отобразить на карте координатную сетку.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris31.png?raw=true "Рисунок 136 – Меню инструментов")</center>

<center><small>Рисунок 136 – Меню инструментов</center></small>

- ![](https://github.com/citoruspm/GeoData/blob/master/16.png?raw=true) – измерить расстояние от одной точки до другой линейкой.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris32.png?raw=true "Рисунок 137 – Линейка")</center>

<center><small>Рисунок 137 – Линейка</center></small>

- Нарисовать объект: полигон ![](https://github.com/citoruspm/GeoData/blob/master/17.png?raw=true) или линию ![](https://github.com/citoruspm/GeoData/blob/master/18.png?raw=true) – и создать карточку данного объекта.

Чтобы нарисовать полигон, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/17.png?raw=true). Щелчками мыши по карте установите три крайние точки полигона. Затем нажмите на точку полигона, которая была установлена первой. В центре полигона отобразится маркер со всплывающим окном, в котором содержится ссылка для перехода в карточку нарисованного объекта (рис. 138).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris33.png?raw=true "Рисунок 138 – Полигон")</center>

<center><small>Рисунок 138 – Полигон</center></small>

Если фигура объекта соответствует требованиям, перейдите в его карточку.

Если нарисованную фигуру полигона требуется редактировать, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true). На фигуре отобразятся крайние и промежуточные точки, которые можно перемещать с помощью мыши (рис. 139). Установите точки в требуемое положение и нажмите на кнопку **Сохранить**, которая отображается под кнопкой ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true). Затем перейдите в карточку полигона, как это описано выше.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris34.png?raw=true "Рисунок 139 – Режим редактирования полигона")</center>

<center><small>Рисунок 139 – Режим редактирования полигона</center></small>

Чтобы нарисовать линию, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/18.png?raw=true). Щелчками мыши по карте установите крайние точки линии. Затем нажмите повторно на конечную точку фигуры. Над крайней точкой отобразится маркер со всплывающим окном, в котором содержится ссылка для перехода в карточку нарисованного объекта (рис. 140).

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris35.png?raw=true "Рисунок 140 – Линия")</center>

<center><small>Рисунок 140 – Линия</center></small>

Если фигура объекта соответствует требованиям, перейдите в карточку объекта.

Если фигуру объекта требуется редактировать, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true). На линии отобразятся крайние и промежуточные точки, которые можно перемещать с помощью мыши (рис. 141). Установите точки в требуемое положение и нажмите на кнопку **Сохранить**, которая отображается под кнопкой ![](https://github.com/citoruspm/GeoData/blob/master/6.png?raw=true). Затем перейдите в карточку нарисованного объекта, как это описано выше.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris36.png?raw=true "Рисунок 141 – Режим редактирования линии")</center>

<center><small>Рисунок 141 – Режим редактирования линии</center></small>

На карте также можно отметить объект в виде точки (маркера). Установка маркера осуществляется щелчком мыши по требуемому участку карты. Переход в карточку отмеченного объекта осуществляется из всплывающей подсказки.

<a name="Печать-карты"></a>
### Печать карты

Чтобы распечатать текущий фрагмент карты, нажмите на кнопку ![](https://github.com/citoruspm/GeoData/blob/master/19.png?raw=true), которая расположена под меню инструментов (рис. 142).

В текущей вкладке браузера будет сформирована страница печати (пример представлен на рисунке 40):

- В заголовке страницы печати отображается текущая дата и время.
- В центральной части страницы – текущий фрагмент карты.
- В нижней части страницы – кнопка для печати и кнопка для выхода из режима печати
карты.

<center>![](https://github.com/citoruspm/GeoData/blob/master/ris37.png?raw=true "Рисунок 142 – Страница печати")</center>

<center><small>Рисунок 142 – Страница печати</center></small>

<a name="ЖУРНАЛ-ИЗМЕНЕНИЙ"></a>
# ЖУРНАЛ ИЗМЕНЕНИЙ

 Версия        | Дата               | Исправления 
:------------- |:------------------:| -----------:
 v.1.000       |06.06.2017          |Размещение исходной версии документа  
               |                    |             
               |                    |             
