СОДЕРЖАНИЕ
====================
- [ПОДСИСТЕМА ГЕОДАННЫХ](#ПОДСИСТЕМА-ГЕОДАННЫХ)
  - [Введение](#Введение)
  - [Управление геокодированными объектами. Универсальная геокатегория](#Управление-геокодированными-объектами-Универсальная-геокатегория)
    - [Работа с картой в универсальной геокатегории](#Работа-с-картой-в-универсальной-геокатегории)
    - [Добавление геоданных объекта](#Добавление-геоданных-объекта)
    - [Редактирование геоданных объекта](#Редактирование-геоданных-объекта)
    - [Экспорт/импорт геоданных объекта](#Экспортимпорт-геоданных-объекта)
  - [Работа с картографическими слоями](#Работа-с-картографическими-слоями)
    - [Порядок действий при создании группы/слоя](#Порядок-действий-при-создании-группыслоя)
    - [Создание группы слоев/картографического слоя](#Создание-группы-слоевкартографического-слоя)
    - [Создание постоянного векторного слоя](#Создание-постоянного-векторного-слоя)
    - [Создание временного векторного слоя](#Создание-временного-векторного-слоя)    
    - [Подключение удаленного растрового слоя](#Подключение-удаленного-растрового-слоя)
    - [Настройка группы/слоя](#Настройка-группыслоя)
        - [Общие настройки](#Общие-настройки)
        - [Настройки векторных слоев](#Настройки-векторных-слоев)
             - [Настройки кластеризации](#Настройки-кластеризации)
             - [Настройка отображения маркеров слоя](#Настройка-отображения-маркеров-слоя)
             - [Свойства всплывающего окна](#Свойства-всплывающего-окна)
             - [Кэширование данных](#Кэширование-данных)
             - [Экспорт геоданных слоя](#Экспорт-геоданных-слоя)
         - [Настройки растровых слоев](#Настройки-растровых-слоев)
  - [Управление геоданными на карте](#Управление-геоданными-на-карте)
    - [Меню управления геоподосновами](#Меню-управления-геоподосновами)
    - [Меню управления слоями](#Меню-управления-слоями)
    - [Меню инструментов](#Меню-инструментов)
    - [Печать карты](#Печать-карты)
- [ОБЪЕКТНОЕ ХРАНИЛИЩЕ](#ОБЪЕКТНОЕ-ХРАНИЛИЩЕ)
  - [Управление иерархической структурой хранилища объектов системы](#Управление-иерархической-структурой-хранилища-объектов-системы)
    - [Создание объектов-родителей](#Создание-объектов-родителей)
    - [Создание объектов-потомков](#Создание-объектов-потомков)
    - [Параметры контейнера](#Параметры-контейнера)
        - [Подсчет потомков](#Подсчет-потомков)
        - [Порядок сортировки потомков](#Порядок-сортировки-потомков)
        - [CQL-запрос](#CQL-запрос)
  - [Управление объектами](#Управление-объектами)
    - [Создание объектов](#Создание-объектов)
    - [Редактирование-объектов](#Редактирование объектов)
    - [Просмотр/запуск объектов](#Просмотр-запуск-объектов)
    - [Копирование объектов](#Копирование-объектов)
    - [Перемещение объектов](#Перемещение-объектов)
    - [Управление связями объектов](#Управление-связями-объектов)
        - [Создание связи](#Создание-связи)
        - [Удаление связи](#Удаление-связи)
    - [Переименование объектов](#Переименование-объектов)
    - [Добавление в избранное](#Добавление-в-избранное)
    - [Открытие новой вкладки с деревом потомков](#Открытие-новой-вкладки-с-деревом-потомков)
    - [Групповые операции с объектами](#Групповые-операции-с-объектами)
        - [Выделение объектов](#Выделение-объектов)
        - [Инвертирование выделения текущего уровня](#Инвертирование-выделения-текущего-уровня)
        - [Снятие выделения](#Снятие-выделения)
    - [Установка указателя текущего местоположения](#Установка-указателя-текущего-местоположения)
    - [Удаление объектов](#Удаление-объектов)
        - [Удаление](#Удаление)
        - [Восстановление из корзины](#Восстановление-из-корзины)
        - [Удаление из корзины](#Удаление-из-корзины)
    - [Права доступа](#Права-доступа)
    - [Индекс популярности](#Индекс-популярности)
    - [Управление версиями](#Управление-версиями)
    - [Просмотр подробной информации](#Просмотр-подробной-информации)
  - [Управление объектами в режиме просмотра](#Управление-объектами-в-режиме-просмотра)
  - [Управление объектами в режиме редактирования](#Управление-объектами-в-режиме-редактирования)
    - [Панель инструментов](#Панель-инструментов)
    - [Ввод и валидация значений](#Ввод-и-валидация-значений)
    - [Мультиплицируемая категория](#Мультиплицируемая-категория)
- [ЖУРНАЛ ИЗМЕНЕНИЙ](#ЖУРНАЛ-ИЗМЕНЕНИЙ)
    
<a name="Подсистема-геоданных"></a>
# ПОДСИСТЕМА ГЕОДАННЫХ

<a name="Введение"></a>
## Введение

Подсистема геоданных представляет собой комплекс платформенных функций, доступных в составе Платформы автоматизации «CITORUS» при условии наличия подключения к ней интегрируемой Веб-ГИС платформы «ЦИТОРУС.ГИС».

Данные функции позволяют решать различные задачи в конфигурациях, создаваемых на базе Платформы автоматизации CITORUS, с преобладающей картографической компонентой.

В частности:

* Управление массивами геокодированных данных в объектном представлении в составе базы данных.
* Управление геокодированными данными посредством встроенного в пользовательский интерфейс ГИС-инструментария.
* Управление геоинформационными слоями в различных векторных и растровых форматах, настройка параметров хранения, обработки, визуализации, кэширования таких слоев.
* Импорт/экспорт массивов геокодированных данных в различных форматах, поддержка синхронизации с внешними системами.
* Визуализация геоинформационных слоев, размещенных на удаленных ресурсах.

<a name="Управление-геокодированными-объектами-Универсальная-геокатегория"></a>
## Управление геокодированными объектами. Универсальная геокатегория

Информационные объекты системы создаются на основе типов объектов. Типы объектов собираются из категорий. Каждая категория представляет собой определенный набор свойств объекта. Как правило, типы собираются из категорий, которые содержат атрибутивную информацию об объекте: название, описание и т.д. Такие категории создаются пользователями вручную исходя из свойств объектов, которыми оперирует система.

Кроме того, в тип может быть добавлена категория, которая содержит геоданные объекта. Эта категория представлена в системе по умолчанию и называется *универсальной геокатегорией*. Универсальная геокатегория (также – *геокатегория*) может быть включена в состав любого типа объектов при создании нового типа или редактировании существующего.

Если в тип объектов добавлена геокатегория, то каждый объект, который создан на основе данного типа, имеет геокатегорию (рис. 1). Геокатегория объекта содержит географические координаты данного объекта, визуально представляет его на карте и обеспечивает возможность его редактирования.

На рисунке 1 представлены инструменты геокатегории объекта:

1. Карта.
2. Визуальный редактор.
3. Область географических координат объекта.
4. Инструменты экспорта/импорта геоданных объекта.

<center> ![](https://github.com/gileva/citorus/blob/master/ris1.png?raw=true "Рисунок 1 – Универсальная геокатегория") </center>

<center><small>Рисунок 1 – Универсальная геокатегория</center></small>

<a name="Работа-с-картой-в-универсальной-геокатегории"></a>
### Работа с картой в универсальной геокатегории

Изменение масштаба карты в универсальной геокатегории выполняется стандартными
способами, которые используются при работе с географическими информационными
системами. Например:

1.  Прокруткой колесика мыши: прокручивание от себя увеличивает масштаб, на себя – уменьшает.
2.  С помощью масштабной линейки, которая расположена в левой части карты: нажатие на кнопку ![](https://github.com/gileva/citorus/blob/master/2.png?raw=true) или перемещение бегунка вверх увеличивает масштаб, нажатие кнопки ![](https://github.com/gileva/citorus/blob/master/3.png?raw=true) и перемещение бегунка вниз уменьшает масштаб.

Для перемещения по карте можно использовать клавиши клавиатуры, на которых изображены стрелки, указывающие вверх, вниз, влево и вправо. Кроме того, перемещаться по карте можно, удерживая левую клавишу мыши.

Для быстрого возврата к маркеру объекта предназначена кнопка **Цель** ![](https://github.com/gileva/citorus/blob/master/1.png?raw=true), которая расположена в левой части карты.

При необходимости на карте можно отобразить координатную сетку. Для этого следует нажать на кнопку **Свернуть/Развернуть** ![](https://github.com/gileva/citorus/blob/master/4.png?raw=true), а затем – на кнопку **Координатная сетка** ![](https://github.com/gileva/citorus/blob/master/5.png?raw=true).

<a name="Добавление-геоданных-объекта"></a>
### Добавление геоданных объекта

Если карточка объекта была создана пустой, и геокатегория не содержит геоданных, в области координат объекта (рис. 2) укажите:

-   Географические координаты объекта, если объект следует представить на карте в виде маркера.
-   Географические координаты первой точки объекта, если объект следует представить на карте в виде линии или полигона.

Географические координаты можно указать в следующих форматах:

- в градусах в виде десятичной дроби (разделитель – запятая) – данный формат выбран по умолчанию;
- в градусах, минутах и секундах.

Переключение между форматами осуществляется с помощью кнопок **ГГ.ГГГГГГ** и **ГГºММ'СС.с**.

<center> ![](https://github.com/gileva/citorus/blob/master/ris2.png?raw=true "Рисунок 2 – Область координат объекта")</center>

<center><small>Рисунок 2 – Область координат объекта</center></small>

Указанная географическая координата отобразится на карте в виде маркера. При необходимости выполните дальнейшее редактирование фигуры объекта так, как это описано ниже.

<a name="Редактирование-геоданных-объекта"></a>
### Редактирование геоданных объекта

Редактирование фигуры объекта можно выполнять:

-   На карте, с помощью инструментов визуального редактора. При этом в области координат будут соответствующим образом меняться координаты точек фигуры.
-   В области координат, вручную добавляя и редактируя координаты точек. При этом на карте в реальном режиме времени фигура будет перемещаться и видоизменяться в соответствии с указанными координатами.

Чтобы редактировать фигуру с помощью карты, в левой части карты нажмите на кнопку **Свернуть/Развернуть** ![](https://github.com/gileva/citorus/blob/master/4.png?raw=true). Поверх карты отобразятся инструменты визуального редактора (рис. 3).

Если объект представлен на карте в виде маркера, и этот маркер требуется переместить, нажмите на кнопку **Редактировать слой** ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true). Затем переместите маркер с помощью мыши в требуемое место и нажмите на кнопку **Сохранить**, которая отображается под кнопкой ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true).

<center><![](https://github.com/gileva/citorus/blob/master/ris3.png?raw=true "Рисунок 3 – Перемещение маркера")</center>

<center><small>Рисунок 3 – Перемещение маркера</center></small>

Если из точки следует сделать линию, добавьте на карту новую точку. Для этого нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/7.png?raw=true). Указатель мыши преобразится в маркер (рис. 4). Установите данный маркер щелчком мыши на требуемом месте карты. От первого маркера до второго будет прорисована линия.

<center>![](https://github.com/gileva/citorus/blob/master/ris4.png?raw=true "Рисунок 4 – Установка маркера")</center>

<center><small>Рисунок 4 – Установка маркера</center></small>

Если из линии требуется сделать полигон, воспользуйтесь одним из следующих
способов:

1.  Добавьте новые точки тем же способом. Для выхода из режима установки маркеров нажмите на кнопку **Отмена**, которая отображается под кнопкой ![](https://github.com/gileva/citorus/blob/master/7.png?raw=true).
2.  Выйдите из режима установки маркеров и перейдите в режим редактирования слоя. Для этого нажмите на кнопку **Редактировать слой** ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true). Для прорисовки полигона последовательно перемещайте мышью промежуточные точки, которые отображаются на линии (рис. 5). Чтобы выйти из режима редактирования слоя, нажмите на кнопку **Сохранить**, которая расположена под кнопкой **Редактировать слой** ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true).

Если требуется удалить какую-либо из точек фигуры, используйте соответствующую команду контекстного меню области координат (см. ниже).

<center>![](https://github.com/gileva/citorus/blob/master/ris5.png?raw=true "Рисунок 5 – Прорисовка полигона")</center>

<center><small>Рисунок 5 – Прорисовка полигона</center></small>

Чтобы добавить для фигуры новые точки в области координат, воспользуйтесь одним из следующих способов:

1. Нажмите правой клавишей мыши на кнопку ![](https://github.com/gileva/citorus/blob/master/8.png?raw=true), которая расположена слева от требуемой координаты. Например, если новую точку следует добавить между первой и второй координатой, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/8.png?raw=true), расположенную слева от первой координаты (рис. 6). Затем выполните одну из следующих команд контекстного меню:
 -  **Создать новый** – чтобы создать координату, в полях **Широта** и **Долгота** которой будут указаны градусы (целые числа до запятой) из выбранной координаты (рис. 7).
 -  **Клонировать** – чтобы создать координату, идентичную выбранной.<br><br>
<center>![](https://github.com/gileva/citorus/blob/master/ris6.png?raw=true "Рисунок 6 – Добавление координаты")</center><br>
<center><small>Рисунок 6 – Добавление координаты</center></small><br>
2. Нажмите левой клавишей мыши на кнопку ![](https://github.com/gileva/citorus/blob/master/8.png?raw=true), которая расположена слева от требуемой координаты. Ниже добавится новая координата, в полях **Широта** и **Долгота** которой будут указаны градусы (целые числа до запятой) из выбранной координаты (рис. 7).<br><br>
<center>![](https://github.com/gileva/citorus/blob/master/ris7.png?raw=true "Рисунок 7 – Строка новой координаты")</center>

<center><small>Рисунок 7 – Строка новой координаты</center></small>

Если какие-либо координаты точки следует поменять местами, используйте команды контекстного меню **Поднять наверх** и **Опустить вниз**.

Если требуется удалить какую-либо координату фигуры, выполните для этой координаты команду контекстного меню **Удалить**.

<a name="Экспорт-импорт-геоданных-объекта"></a>
### Экспорт/импорт геоданных объекта

Если требуется сохранить геоданные, которые содержатся в универсальной геокатегории (например, чтобы перенести их в универсальную геокатегорию другого объекта), нажмите на кнопку **Скопировать отрисованный GeoJSON слоя в буфер обмена** ![](https://github.com/gileva/citorus/blob/master/9.png?raw=true) (рис. 8).

Чтобы импортировать скопированные геоданные в универсальную геокатегорию другого объекта, перейдите в его карточку. Вставьте геоданные, сохраненные в буфере обмена, в строку **Поле для импортирования своего GeoJSON**. Затем нажмите на кнопку **Отрисовать скопированный GeoJSON** ![](https://github.com/gileva/citorus/blob/master/10.png?raw=true).

<center>![](https://github.com/gileva/citorus/blob/master/ris8.png?raw=true "Рисунок 8 – Инструменты для экспорта/импорта геоданных объекта")</center>

<center><small>Рисунок 8 – Инструменты для экспорта/импорта геоданных объекта</center></small>

<a name="Работа-с-картографическими-слоями"></a>
## Работа с картографическими слоями

Подсистема геоданных предоставляет возможность работы со следующими типами слоев:

-   Постоянные векторные слои,
-   Временные векторные слои,
-   Растровые слои.

Для настройки и хранения слоев в дереве объектов предназначена системная папка **Картографические слои**. Данная папка содержит вложенную системную папку **Геоподосновы**, которая предназначена для настройки и хранения <a href="#Подключение-удаленного-растрового-слоя">геоподоснов</a>. Содержимое папки **Геоподосновы** отображается в <a href="#Меню-управления-геоподосновами">Меню управления геоподосновами</a> на карте.

Для систематизации других слоев внутри системной папки **Картографические слои** рекомендуется создать следующие группы слоев:

-   **Основное меню** – для настройки и хранения постоянных векторных и растровых слоев.
-   **Временные общие слои** – для настройки и хранения временных векторных слоев (Слоев CQL).
-   **Личные слои** – для слоев различных типов, сохраненных в профиле текущего пользователя.

Внутри данных групп слоев можно <a href="#Создание-группы-слоевкартографического-слоя"> создавать группы слоев</a> любого уровня вложенности. Группы предназначены для систематизации и <a href="#Настройка-группыслоя">одновременной настройки</a> групп/слоев, которые входят в их состав.

Настройка порядка расположения групп/слоев внутри системной папки **Картографические слои** и перемещение слоев из группы в группу (при необходимости) осуществляется в соответствии с общими принципами управления объектами системы.

Иерархия групп/слоев, которые содержатся в системной папке **Картографические слои** (за исключением папки **Геоподосновы**), воспроизводится в <a href="#Меню-управления-слоями">меню управления слоями</a> на карте. Если пользователь меняет порядок расположения групп и/или вложенных в них слоев в папке **Картографические слои**, то после перезагрузки карты соответствующим образом меняется порядок расположения групп/слоев в меню управления слоями.

<a name="Порядок-действий-при-создании-группы-слоя"></a>
### Порядок действий при создании группы/слоя

Чтобы создать в системе группу слоев, выполните следующие действия:

1.  Создайте пустой <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a> типа **Группа**.
2.  Наполните данную группу вложенными группами и/или картографическими слоями.
3.  Если требуется выполнить одновременную настройку вложенных групп/слоев, выполните <a href="#Настройка-группыслоя">настройку свойств</a> данной группы.
4.  Выполните настройку прав доступа пользователей к данной группе.

Чтобы создать в системе слой какого-либо типа, выполните следующие действия:

1.  Создайте пустой <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a>.
2.  Если из картографического слоя следует создать постоянный векторный слой, выполните <a href="#Создание-постоянного-векторного-слоя">загрузку геокодированных данных в формате JSON</a> и/или переместите в данный слой объекты, содержащие универсальную геокатегорию, и/или создайте связь слоя с данными объектами.
3.  Если из картографического слоя следует создать временный векторный слой, настройте в данном слое поисковый запрос и/или переместите в данный слой объекты, содержащие универсальную геокатегорию, и/или создайте связь слоя с данными объектами.
4.  Если из картографического слоя следует создать растровый слой, выполните <a href="#Подключение-удаленного-растрового-слоя">подключение удаленного растрового слоя</a>.
5.  При необходимости выполните <a href="#Настройка-группыслоя">настройку картографического слоя</a>.
6.  Выполните настройку прав доступа пользователей к данному картографическому слою.

<a name="Создание-группы-слоев-картографического-слоя"></a>
### Создание группы слоев/картографического слоя

Чтобы создать группу слоев или картографический слой, в дереве объектов выделите правой клавишей мыши:

-   Системную папку **Картографические слои**, чтобы создать группу/слой на верхнем уровне иерархии.
-   Системную папку **Картографические слои > Геоподосновы**, чтобы создать <a href="#Подключение-удаленного-растрового-слоя">геоподоснову</a>.
-   Требуемую группу слоев, чтобы создать вложенную группу/слой.

Затем выполните команду контекстного меню **Создать > Выбрать из списка** (рис. 9).

<center>![](https://raw.githubusercontent.com/gileva/citorus/master/ris9.png "Рисунок 9 – Создание картографического слоя")</center>

<center><small>Рисунок 9 – Создание картографического слоя</center></small>

В окне **Выбор типа создаваемого объекта** (рис. 10) найдите в списке тип объектов **Картографический слой**. Данный тип содержится в системе по умолчанию.

Чтобы выполнить быстрый поиск этого типа, в строке ввода укажите начальные буквы его названия (например, «карт») и нажмите на клавишу **Enter** на клавиатуре. В списке отобразятся типы объектов, соответствующие условиям поиска. Выберите тип
**Картографический слой** двойным щелчком мыши.

<center>![](https://github.com/gileva/citorus/blob/master/ris10.png?raw=true "Рисунок 10 – Окно **Выбор типа создаваемого объекта**")</center>

<center><small>Рисунок 10 – Окно **Выбор типа создаваемого объекта**</center></small>

Откроется карточка нового объекта типа **Картографический слой** (рис. 11). Заполните в карточке следующие поля:

-   **Название** – укажите название, под которым данная группа/слой будет отображаться в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы.
-   **Системное имя** – может содержать только латинские буквы и цифры без пробелов.
-   **Имя в меню** – название, под которым группа/слой будет отображаться в меню управления слоями.
-   **Тип слоя**:

    -   Если требуется создать группу слоев, выберите значение **Группа**.
    -   Если требуется создать геоподоснову, выберите значение **Подложка**.
    -   Если требуется создать картографический слой, выберите значение **Слой**.

На панели инструментов карточки нажмите на кнопку **Сохранить** ![](https://github.com/gileva/citorus/blob/master/11.png?raw=true).

<center>![](https://github.com/gileva/citorus/blob/master/ris11.png?raw=true "Рисунок 11 – Карточка нового объекта типа **Картографический слой**")</center>

<center><small>Рисунок 11 – Карточка нового объекта типа **Картографический слой**</center></small>

Дерево объектов автоматически обновится, и созданная группа/слой отобразится в выбранной папке.

<a name="Создание-постоянного-векторного-слоя"></a>
### Создание постоянного векторного слоя

Создание постоянного векторного слоя может быть выполнено размещением в контейнере объектов/связей объектов из других сегментов системы, а также путем загрузки в пустой <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a> геокодированных данных в формате JSON. Для объектов, описание которых содержится в файле JSON, необходимо предварительно создать соответствующий тип объектов. Например, если в файле содержится описание заправочных станций, в системе необходимо создать тип объекта **Заправочные станции**.

Чтобы выполнить загрузку геокодированных данных в картографический слой, в главном меню системы нажмите на кнопку **Карта** (рис. 12).

<center>![](https://github.com/gileva/citorus/blob/master/ris12.png?raw=true "Рисунок 12 – Кнопка **Карта**")</center>

<center><small>Рисунок 12 – Кнопка **Карта**</center></small>

Перетащите мышью на карту файл JSON из папки проводника Windows, в которой он расположен. В диалоговом окне, представленном на рисунке 13, нажмите на кнопку **ОК**.

<center>![](https://github.com/gileva/citorus/blob/master/ris13.png?raw=true "Рисунок 13 – Подтверждение действия")</center>

<center><small>Рисунок 13 – Подтверждение действия</center></small>

В окне **Выбор контейнера слоя** (рис. 14) выберите для загрузки объекта <a href="#Создание-группы-слоевкартографического-слоя">картографический слой</a>. Нажмите на кнопку **Далее**.

<center>![](https://github.com/gileva/citorus/blob/master/ris14.png?raw=true "Рисунок 14 – Окно **Выбор контейнера слоя**")</center>

<center><small>Рисунок 14 – Окно **Выбор контейнера слоя**</center></small>

В окне **Выбор типа** (рис. 15) укажите, о каком типе объектов содержится информация в файле JSON.

<center>![](https://github.com/gileva/citorus/blob/master/ris15.png?raw=true "Рисунок 15 – Окно **Выбор типа**")</center>

<center><small>Рисунок 15 – Окно **Выбор типа**</center></small>

Откроется окно **Сопоставление полей** (рис. 16). В левой части данного окна (1) отображается дерево свойств импортируемого файла, в правой части (2) – дерево свойств выбранного типа объектов. Свойства файла и свойства типа следует сопоставить друг другу с помощью таблицы, расположенной в центральной части окна (3).

<center>![](https://github.com/gileva/citorus/blob/master/ris16.png?raw=true "Рисунок 16 – Окно **Сопоставление полей**")</center>

<center><small>Рисунок 16 – Окно **Сопоставление полей**</center></small>

Чтобы начать сопоставление, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/12.png?raw=true), которая расположена над таблицей.

В таблицу добавится пустая строка. Щелкните по ней мышью, чтобы активировать свойства файла (1) и типа (2).

При сопоставлении свойств выполните следующие шаги:

1.  Поместите в системное имя типа любое свойство файла (рис. 17). Для этого разверните системные свойства типа: **System > Основные свойства**. Двойным щелчком мыши выделите свойство **name**. Оно переместится в столбец таблицы **Куда**. Разверните свойства файла и двойным щелчком мыши выделите любое из его свойств. Оно переместится в столбец таблицы **Что**.</br></br>
<center>![](https://github.com/gileva/citorus/blob/master/ris16_1.png?raw=true "Рисунок 17 – Системное имя типа")</center></br>
<center><small>Рисунок 17 – Системное имя типа</center></small></br>
2.  Укажите, в какое свойство типа следует поместить геоданные из файла (рис. 18). Для этого добавьте в таблицу новую строку нажатием на кнопку ![](https://github.com/gileva/citorus/blob/master/12.png?raw=true), которая расположена над таблицей, и щелкните по данной строке мышью, чтобы активировать свойства файла и типа. Затем в свойствах типа выберите свойство **object > geo > geoJSON**, а в свойствах файла – свойство **geometry**.</br></br>
<center>![](https://github.com/gileva/citorus/blob/master/ris16_2.png?raw=true "Рисунок 18 – Геоданные")</center></br>
<center><small>Рисунок 18 – Геоданные</center></small></br>
3.  Укажите, в какие поля типа следует поместить основные свойства файла (properties). Пример сопоставления представлен на рисунке 19.

<center>![](https://github.com/gileva/citorus/blob/master/ris16_3.png?raw=true "Рисунок 19 – Основные свойства")</center></br>
<center><small>Рисунок 19 – Основные свойства</center></small>

Чтобы выполнить загрузку данных в соответствии с указанными требованиями, нажмите на кнопку **Запустить**. Данная кнопка расположена в верхней части окна **Сопоставление полей**.

Импорт данных будет выполнен в фоновом режиме. После завершения импорта обновите содержимое папки **Картографические слои**. В составе картографического слоя, в который осуществлялась загрузка данных, отобразятся геокодированные объекты, соответствующие объектам, описанным в файле.

<a name="Создание-временного-векторного-слоя"></a>
### Создание временного векторного слоя
Описание будет добавлено позже.

<a name="Подключение-удаленного-растрового-слоя"></a>
### Подключение удаленного растрового слоя

Растровые слои можно подключать как из источников, находящихся на внешних серверах, так и из внутреннего репозитория, находящегося на GIS-сервере CITORUS. Подключение удаленного растрового слоя может выполняться в системе для решения следующих задач:

-   Для создания *геоподосновы* – картографической поверхности, которая является фоном для слоев на <a href="#Работа-с-картой">карте</a>. В качестве геоподоснов могут выступать, например, подключенные удаленно картографические сервисы Google Maps, Яндекс.Карты и другие.
-   Для создания слоя, который позволяет получать необходимые данные из внутреннего репозитория или с какого-либо удаленного сервиса в онлайн-режиме.

Чтобы подключить растровый слой, откройте карточку ранее созданного <a href="#Создание-группы-слоевкартографического-слоя">картографического слоя</a> в режиме редактирования и заполните следующие поля:

-   **Источник** – выберите тип сервиса, с которого осуществляется подключение удаленного растрового слоя.
-   **Внешний url** – вставьте ссылку на данный сервис. Например, **http://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}**.
-   **Доп. опции** – укажите дополнительные параметры запроса к удаленному слою. Например, для WMS-сервисов строка может выглядеть следующим образом:  
    **{"constructorOptions":{"layers":"name","format":"image/png","bbox":"26,9,180,83.5","transparent":true}}**, где:
    
    -   **layers** – название слоя,
    -   **format** – формат данных слоя,
    -   **bbox** – границы слоя,
    -   **transparent** – прозрачность слоя (true/false).

<center>![](https://github.com/gileva/citorus/blob/master/ris17.png?raw=true "Рисунок 20 – Настройки растрового слоя")</center>

<center><small>Рисунок 20 – Настройки растрового слоя</center></small>

Сохраните данный слой. Для этого на панели инструментов карточки нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/11.png?raw=true).

При необходимости выполните дополнительную <a href="#Настройка-группыслоя">настройку слоя</a>.

<a name="Настройка-группы-слоя"></a>
### Настройка группы/слоя

Группы слоев и картографические слои имеют идентичные настройки. Если настройка свойств осуществляется в карточке группы слоев, то данные настройки применяются ко всем группам/слоям, вложенным в данную группу. Если настройка свойств выполняется в карточке картографического слоя, то настройки применяются только к данному слою. Настройки слоя имеют больший приоритет, чем настройки группы слоев, в которую он входит.

Чтобы выполнить настройку какой-либо группы слоев или картографического слоя, выполните один из следующих шагов:

-   В дереве объектов выделите требуемую группу/слой нажатием правой клавиши мыши и выполните команду контекстного меню **Редактировать** (рис. 21). В новой вкладке откроется карточка группы/слоя (рис. 22).

<center>![](https://github.com/gileva/citorus/blob/master/ris18.png?raw=true "Рисунок 21 – Контекстное меню")</center>

<center><small>Рисунок 21 – Контекстное меню</center></small>

-   В дереве объектов выделите требуемую группу/слой нажатием левой клавиши мыши. В новой вкладке откроется карточка группы/слоя (рис. 22). Чтобы активировать ее поля, на панели инструментов нажмите на кнопку **Редактировать** ![](https://github.com/gileva/citorus/blob/master/13.png?raw=true).

<center>![](https://github.com/gileva/citorus/blob/master/ris19.png?raw=true "Рисунок 22 – Карточка картографического слоя")</center>

<center><small>Рисунок 22 – Карточка картографического слоя</center></small>

Для редактирования доступно любое поле карточки группы/слоя.

<a name="Общие-настройки"></a>
#### Общие настройки

Следующие поля предназначены как для настройки групп слоев, так и для настройки слоев различных типов (рис. 23):

-   **Название** – имя, под которым данная группа/слой отображается в дереве объектов. Название может содержать цифры, латинские и русские буквы, пробелы.
-   **Описание (всплывающая подсказка)** – поле для текстового описания группы/слоя.
-   **Ссылки** – поле для ввода ссылки (указателя) на другой объект.
-   **Системное имя** – обязательное поле. Без системного имени группа/слой существовать не может. Системное имя может содержать только латинские буквы и цифры без пробелов.
-   **Имя в меню** – название, под которым данная группа/слой отображается в <a href="#Меню-управления-слоями">меню управления слоями</a>.
-   **Тип слоя** – выпадающий список для выбора типа объекта:

    -   **Группа** – группа слоев. Группы слоев содержатся в папке **Картографические слои** дерева объектов и в <a href="#Меню-управления-слоями">меню управления слоями</a>.
    -   **Слой** – картографический слой. Слои содержатся в папке **Картографические слои** дерева объектов и в <a href="#Меню-управления-слоями">меню управления слоями</a>.
    -   **Подложка** – геоподоснова. Геоподосновы содержатся в папке **Картографические слои > Геоподосновы** дерева объектов и в <a href="#Меню-управления-геоподосновами">меню управления геоподосновами</a>.
-   **Включить по умолчанию** – если флажок установлен, то слой отображается на карте постоянно. Даже если пользователь отключает данный слой в меню управления слоями, после перезагрузки карты слой автоматически включается и отображается снова.
-   **Минимальное и максимальное приближение** – определение минимального и максимального масштаба, на котором отображается слой.
-   **Всплывающая подсказка** – текст для всплывающей подсказки, которая отображается при наведении курсора мыши на название слоя в <a href="#Меню-управления-слоями">меню управления слоями</a>. По умолчанию всплывающая подсказка содержит только название, указанное в поле **Имя в меню**.

<center>![](https://github.com/gileva/citorus/blob/master/ris20.png?raw=true "Рисунок 23 – Общие поля")</center>

<center><small>Рисунок 23 – Общие поля</center></small>

<a name="Настройки-векторных-слоев"></a>
#### Настройки векторных слоев

<a name="Настройки-кластеризации"></a>
##### Настройки кластеризации

При необходимости для объектов векторных слоев можно **Использовать кластеризацию** (рис. 24).

*Кластеризация* – это объединение объектов слоя, расположенных близко друг к другу, при увеличении масштаба карты. При объединении объекты отображаются в виде одной точки (кластера). На кластере представлено число объектов, которые он объединяет. При уменьшении масштаба карты происходит обратный процесс: кластер распадается на отдельные объекты.

По умолчанию кластер отображается на карте в виде белой точки. Внешний вид кластера можно настроить с помощью следующих полей:

-   **Фон кластера** – цвет заливки кластера;
-   **Цвет обводки** – цвет рамки кластера;
-   **Цвет шрифта** – цвет шрифта цифры, которая отображается в центре кластера и обозначает число объединенных объектов.

<center>![](https://github.com/gileva/citorus/blob/master/ris21.png?raw=true "Рисунок 21 – Настройки векторных слоев")</center>

<center><small>Рисунок 24 – Настройки векторных слоев</center></small>

<a name="Настройка-отображения-маркеров-слоя"></a>
##### Настройка отображения маркеров слоя

Чтобы упростить визуальное восприятие объектов слоя на карте, можно назначить для них подходящую по смыслу иконку. Например, для больниц можно загрузить иконку с изображением красного креста. Для этого в поле **Маркер** (рис. 24) следует нажать на кнопку **Прикрепить файл** и в проводнике Windows выбрать файл иконки. После сохранения карточки слоя его объекты будут обозначены на карте с помощью выбранной иконки.

<a name="Свойства-всплывающего-окна"></a>
##### Свойства всплывающего окна

Группа полей **Свойства всплывающего окна** (рис. 24) предназначена для создания и наполнения данными всплывающих окон. Всплывающие окна отображаются при наведении курсора мыши на объекты слоя на <a href="#Работа-с-картой">карте</a> и могут содержать одно или несколько свойств объекта.

Чтобы создать всплывающее окно, следует добавить в него хотя бы одно свойство. Для этого:

-   В группе полей **Свойства всплывающего окна**, в поле слева укажите название свойства объекта, которое следует отображать во всплывающем окне. Например, **Порядковый номер**.
-   В поле справа введите строку вида **\<object.link.field\>**, где:

    -   **link** – ссылка на категорию, которая содержит поле для описания требуемого свойства. Например, чтобы во всплывающем окне отображался порядковый номер объекта, откройте категорию, которая была использована при создании типа данного объекта, и которая содержит поле **Порядковый номер**, и скопируйте ссылку (link) на данную категорию.
    -   **field** – название требуемого поля в категории. Например, **IndexNumber**.

Чтобы добавить во всплывающее окно еще одно свойство объекта, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/8.png?raw=true), которая расположена слева от группы полей **Свойства всплывающего окна**.

<a name="Растеризация-векторного-слоя"></a>
##### Растеризация векторного слоя

Чтобы преобразовать векторный слой в растровый слой, следует установить флажок **Включить растеризацию** (рис. 24). Для настройки свойств преобразованного слоя предназначено поле **Настр. растер.** (см. <a href="#Настройки-растровых-слоев">Настройки растровых слоев</a>).

<a name="Кэширование-данных"></a>
##### Кэширование данных

Чтобы данные векторных слоев сохранялись в кэше, поставьте флажок **Кэширование данных** (рис. 24).

<a name="Экспорт-геоданных-слоя"></a>
##### Экспорт геоданных слоя

Чтобы сохранить геокодированные данные слоя в файл в формате JSON, в поле **Экспортировать** нажмите на кнопку **GeoJSON** (рис. 24). Файл сохранится в папку, выбранную в браузере для загрузки данных по умолчанию.

<a name="Настройки-растровых-слоев"></a>
#### Настройки растровых слоев

Для настройки растровых слоев в карточке предназначены следующие поля (рис. 25):

-   **Источник** – тип сервиса, с которого осуществляется подключение удаленного растрового слоя:

    -   **Запрос**,
    -   **Сервис тайлов**,
    -   **Сервис тайлов WMS** – подключение к слою осуществляется по протоколу WMS,
    -   **Сервис тайлов ArcGIS** – подключаемый слой создан с помощью ПО ArcGIS,
    -   **Сервис GeoJSON**,
    -   **Сервис Геомиксер**.
-   **Внешний url** – ссылка на сервис, на котором размещен подключаемый растровый слой.
-   **Кэширование тайлов** – сохранять в кэше данные растровых слоев.

<center>![](https://github.com/gileva/citorus/blob/master/ris22.png?raw=true "Рисунок 25 – Настройки растровых слоев")</center>

<center><small>Рисунок 25 – Настройки растровых слоев</center></small>

-   **Доп. опции** – дополнительные параметры запроса к удаленному слою. Например, для WMS-сервисов в поле можно вставить строку следующего вида:  
    **{"constructorOptions":{"layers":"name","format":"image/png","bbox":"26,9,180,83.5","transparent":true}}**,
    где:
    
    -   **layers** – название слоя,
    -   **format** – формат данных слоя,
    -   **bbox** – границы слоя,
    -   **transparent** – прозрачность слоя (true/false).
-   **Настр. растер.** – данное поле аналогично полю **Доп. опции**, но используется для настройки растровых слоев, которые были преобразованы из векторных (см. раздел <a href="#Растеризация-векторного-слоя">Растеризация векторного слоя</a>).

<a name="Работа-с-картой"></a>
## Работа с картой

Чтобы открыть карту, в главном меню системы нажмите на кнопку **Карта** (рис. 26).

<center>![](https://github.com/gileva/citorus/blob/master/ris23.png?raw=true "Рисунок 26 – Кнопка **Карта**")</center>

<center><small>Рисунок 26 – Кнопка **Карта**</center></small>

Карта откроется в новой вкладке (рис. 27).

Изменение масштаба карты выполняется стандартными способами, которые используются при работе с географическими информационными системами. Например:

1.  Прокруткой колесика мыши: прокручивание от себя увеличивает масштаб, на себя – уменьшает.
2.  С помощью масштабной линейки, которая расположена в левой части карты: нажатие на кнопку ![](https://github.com/gileva/citorus/blob/master/2.png?raw=true) или перемещение бегунка вверх увеличивает масштаб, нажатие кнопки ![](https://github.com/gileva/citorus/blob/master/3.png?raw=true) и перемещение бегунка вниз уменьшает масштаб.

Текущий масштаб карты отображается в левом нижнем углу.

Для перемещения по карте можно использовать клавиши клавиатуры, на которых изображены стрелки, указывающие вверх, вниз, влево и вправо. Кроме того, перемещаться по карте можно, удерживая левую клавишу мыши.

Для работы с картой предназначены следующие меню:

1.  Меню управления геоподосновами.
2.  Меню управления слоями.
3.  Меню инструментов.

<center>![](https://github.com/gileva/citorus/blob/master/ris24.png?raw=true "Рисунок 27 – Инструменты работы с картой")</center>

<center><small>Рисунок 27 – Инструменты работы с картой</center></small>

<a name="Меню-управления-геоподосновами"></a>
### Меню управления геоподосновами

Меню управления геоподосновами разворачивается нажатием на кнопку, представленную на рисунке 27 под цифрой 1. В меню отображается список <a href="#Подключение-удаленного-растрового-слоя">геоподоснов</a>, созданных пользователем (рис. 28).

Геоподосновы – это картографические поверхности, которые служат фоном для слоев. Для выбора какой-либо геоподосновы щелкните по ней мышью.

<center>![](https://github.com/gileva/citorus/blob/master/ris25.png?raw=true "Рисунок 28 – Меню управления геоподосновами")</center>

<center><small>Рисунок 28 – Меню управления геоподосновами</center></small>

<a name="Меню-управления-слоями"></a>
### Меню управления слоями

Меню управления слоями разворачивается при нажатии на кнопку, представленную на рисунке 29.

<center>![](https://github.com/gileva/citorus/blob/master/ris26.png?raw=true "Рисунок 29 – Кнопка перехода в меню управления слоями")</center>

<center><small>Рисунок 29 – Кнопка перехода в меню управления слоями</center></small>

Данное меню содержит следующие инструменты (рис. 30):

-   **Поиск по координатам** – группа полей позволяет выполнить быстрый переход в требуемую точку на карте. Географические координаты точки можно указать в градусах в виде десятичной дроби (разделитель – запятая) или в градусах, минутах и секундах.
-   **Поиск по территориальному объекту** – поле или группа полей позволяет выполнить быстрый переход к требуемому территориальному объекту.
-   **Сохранить карту** – при нажатии на данную кнопку система запоминает текущую конфигурацию карты: фокус карты, включенный слой и выбранную геоподоснову – и воспроизводит ее при повторном открытии карты.

<center>![](https://github.com/gileva/citorus/blob/master/ris27.png?raw=true "Рисунок 30 – Меню управления слоями")</center>

<small><center>Рисунок 30 – Меню управления слоями</center></small>

-   ![](https://github.com/gileva/citorus/blob/master/14.png?raw=true) – координаты точки, на которую указывает курсор на карте (рис. 31).
-   **Текущий масштаб** – текущий масштаб слоя.
-   **Доступные слои** – в списке отображаются слои, которые содержатся в дереве объектов, в папке **Картографические слои** (за исключением папки **Геоподосновы**) и доступны текущему пользователю (см. раздел Настройка прав доступа). Чтобы включить/отключить какой-либо слой или группу слоев на карте, следует поставить/снять флажок, соответствующий данному слою или группе слоев.

<center> ![](https://github.com/gileva/citorus/blob/master/ris28.png?raw=true "Рисунок 31 – Меню управления слоями")</center>

<small><center>Рисунок 31 – Меню управления слоями</center></small>

Если в меню управления слоями для отображения выбран векторный слой, атрибутивная информация которого содержит дату, или растровый слой, у точек которого есть признак даты, то в левом нижнем углу карты появляется таймлайн (рис. 32). Данный инструмент предназначен для фильтрации объектов/точек слоя по дате. Например, если объекты/точки слоя обозначают на карте пожары, которые произошли в первом полугодии 2017 года, то с помощью таймлайна можно настроить отображение пожаров, которые произошли в определенный день или за какой-либо
временной промежуток в данном полугодии.

Интервал дат, которые содержат объекты/точки слоя, отображается под таймлайном.

<center>![](https://github.com/gileva/citorus/blob/master/ris29.png?raw=true "Рисунок 32 – Таймлайн")</center>

<center><small>Рисунок 32 – Таймлайн</center></small>

Чтобы на карте отобразились объекты/точки за какой-либо временной период, воспользуйтесь одним из следующих способов:

1.  Обозначьте требуемый временной период на таймлайне с помощью левого и правого бегунка.
2.  Откройте календарь нажатием на кнопку ![](https://github.com/gileva/citorus/blob/master/15.png?raw=true) (рис. 33). Щелчком мыши выберите начальную дату требуемого периода. Затем, удерживая на клавиатуре клавишу **Shift**, щелчком мыши отметьте конечную дату требуемого периода.

Чтобы на карте отобразились объекты/точки за определенную дату, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/15.png?raw=true) и укажите требуемую дату с помощью календаря.

<center>![](https://github.com/gileva/citorus/blob/master/ris30.png?raw=true "Рисунок 33 – Календарь")</center>

<center><small>Рисунок 33 – Календарь</center></small>

<a name="Меню-инструментов"></a>
### Меню инструментов

Меню инструментов разворачивается при нажатии на кнопку ![](https://github.com/gileva/citorus/blob/master/4.png?raw=true) (рис. 34).

Включение того или иного инструмента из меню осуществляется нажатием на соответствующую ему кнопку, выключение инструмента – повторным нажатием на соответствующую кнопку.

С помощью кнопок меню инструментов можно выполнить следующие действия:

- ![](https://github.com/gileva/citorus/blob/master/5.png?raw=true) – отобразить на карте координатную сетку.

<center>![](https://github.com/gileva/citorus/blob/master/ris31.png?raw=true "Рисунок 34 – Меню инструментов")</center>

<center><small>Рисунок 34 – Меню инструментов</center></small>

- ![](https://github.com/gileva/citorus/blob/master/16.png?raw=true) – измерить расстояние от одной точки до другой линейкой.

<center>![](https://github.com/gileva/citorus/blob/master/ris32.png?raw=true "Рисунок 35 – Линейка")</center>

<center><small>Рисунок 35 – Линейка</center></small>

- Нарисовать объект: полигон ![](https://github.com/gileva/citorus/blob/master/17.png?raw=true) или линию ![](https://github.com/gileva/citorus/blob/master/18.png?raw=true) – и создать карточку данного объекта.

Чтобы нарисовать полигон, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/17.png?raw=true). Щелчками мыши по карте установите три крайние точки полигона. Затем нажмите на точку полигона, которая была установлена первой. В центре полигона отобразится маркер со всплывающим окном, в котором содержится ссылка для перехода в карточку нарисованного объекта (рис. 36).

<center>![](https://github.com/gileva/citorus/blob/master/ris33.png?raw=true "Рисунок 36 – Полигон")</center>

<center><small>Рисунок 36 – Полигон</center></small>

Если фигура объекта соответствует требованиям, перейдите в его карточку.

Если нарисованную фигуру полигона требуется редактировать, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true). На фигуре отобразятся крайние и промежуточные точки, которые можно перемещать с помощью мыши (рис. 37). Установите точки в требуемое положение и нажмите на кнопку **Сохранить**, которая отображается под кнопкой ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true). Затем перейдите в карточку полигона, как это описано выше.

<center>![](https://github.com/gileva/citorus/blob/master/ris34.png?raw=true "Рисунок 37 – Режим редактирования полигона")</center>

<center><small>Рисунок 37 – Режим редактирования полигона</center></small>

Чтобы нарисовать линию, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/18.png?raw=true). Щелчками мыши по карте установите крайние точки линии. Затем нажмите повторно на конечную точку фигуры. Над крайней точкой отобразится маркер со всплывающим окном, в котором содержится ссылка для перехода в карточку нарисованного объекта (рис. 38).

<center>![](https://github.com/gileva/citorus/blob/master/ris35.png?raw=true "Рисунок 38 – Линия")</center>

<center><small>Рисунок 38 – Линия</center></small>

Если фигура объекта соответствует требованиям, перейдите в карточку объекта.

Если фигуру объекта требуется редактировать, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true). На линии отобразятся крайние и промежуточные точки, которые можно перемещать с помощью мыши (рис. 39). Установите точки в требуемое положение и нажмите на кнопку **Сохранить**, которая отображается под кнопкой ![](https://github.com/gileva/citorus/blob/master/6.png?raw=true). Затем перейдите в карточку нарисованного объекта, как это описано выше.

<center>![](https://github.com/gileva/citorus/blob/master/ris36.png?raw=true "Рисунок 39 – Режим редактирования линии")</center>

<center><small>Рисунок 39 – Режим редактирования линии</center></small>

На карте также можно отметить объект в виде точки (маркера). Установка маркера осуществляется щелчком мыши по требуемому участку карты. Переход в карточку отмеченного объекта осуществляется из всплывающей подсказки.

<a name="Печать-карты"></a>
### Печать карты

Чтобы распечатать текущий фрагмент карты, нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/19.png?raw=true), которая расположена под меню инструментов (рис. 40).

В текущей вкладке браузера будет сформирована страница печати (пример представлен на рисунке 40):

- В заголовке страницы печати отображается текущая дата и время.
- В центральной части страницы – текущий фрагмент карты.
- В нижней части страницы – кнопка для печати и кнопка для выхода из режима печати
карты.

<center>![](https://github.com/gileva/citorus/blob/master/ris37.png?raw=true "Рисунок 40 – Страница печати")</center>

<center><small>Рисунок 40 – Страница печати</center></small>

<a name="ОБЪЕКТНОЕ-ХРАНИЛИЩЕ"></a>
# ОБЪЕКТНОЕ ХРАНИЛИЩЕ

<a name="Управление-иерархической-структурой-хранилища-объектов-системы"></a>
## Управление иерархической структурой хранилища объектов системы

<a name="Создание-объектов-родителей"></a>
### Создание объектов-родителей

В системе существуют следующие типы объектов-родителей (также – *контейнер, папка*):

- **Физический контейнер** – контейнер, который физически расположен в том месте дерева объектов, в котором он отображается. 
- **Контейнер связи** ![](https://github.com/gileva/citorus/blob/master/20.png?raw=true) – контейнер, который представляет собой связь между физическим контейнером, расположенным в другом месте, и текущим контейнером. Текущий контейнер является для данного контейнера *Приемным родителем*. Реальное местоположение данного контейнера указано на <a href="#Просмотр-подробной-информации">странице подробной информации</a>, в строке **Родитель**. Основное преимущество данной связки заключается в том, что свойства контейнера связи можно редактировать, при этом внесенные изменения сохраняются в соответствующем физическом контейнере.
- **CQL-контейнер** – контейнер, который не содержит физических контейнеров/объектов и содержит только поисковый запрос. В CQL-контейнер помещаются *представления* контейнеров/объектов, соответствующих поисковому запросу. Реальное местоположение этих объектов указано на <a href="#Просмотр-подробной-информации">странице подробной информации</a>, в строке **Родитель**.

Чтобы создать контейнер связи, выполните шаги, описанные в разделе <a href="#Создание-связи">Создание связи</a>.

Чтобы создать физический или CQL-контейнер, в дереве объектов выделите правой клавишей мыши объект, который будет являться родителем данного контейнера, и выполните команду контекстного меню **Создать > Папку** (рис. 41).

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_obektov_roditelej_1.png?raw=true "Рисунок 41 – Создание контейнера")</center>

<center><small>Рисунок 41 – Создание контейнера</center></small>

Откроется карточка создаваемого контейнера (рис. 42), в которой необходимо заполнить поле **Название**. Чтобы сохранить контейнер, на панели инструментов нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/27.png?raw=true).

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_obektov_roditelej_2.png?raw=true "Рисунок 42 – Карточка контейнера")</center>

<center><small>Рисунок 42 – Карточка контейнера</center></small>

Дерево объектов автоматически обновится и в выбранной папке отобразится созданный контейнер. Чтобы выполнить настройку свойств контейнера, выполните шаги, описанные в разделе <a href="#Настройка-объекта-родителя">Настройка объекта-родителя</a>.

<a name="Создание-объектов-потомков"></a>
### Создание объектов-потомков

Чтобы создать объект, выделите в дереве объектов правой клавишей мыши контейнер, который будет являться родителем данного объекта, и выполните команду контекстного меню **Создать > Выбрать из списка** (рис. 43).

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_obektov_1.png?raw=true "Рисунок 43 – Создание объекта")</center>

<center><small>Рисунок 43 – Создание объекта</center></small>

В окне **Выбор типа создаваемого объекта** (рис. 44) двойным щелчком мыши выберите из списка требуемый тип (подробнее о типах объектов см. в разделе <a href="#Создание-редактирование-типов-объектов">Создание/редактирование типов объектов</a>).

По умолчанию в верхней части списка отображаются системные типы, то есть типы, которые присутствуют в системе по умолчанию, а затем – типы объектов, созданные пользователями системы. 

Для быстрого поиска требуемого типа можно воспользоваться контекстным поиском. Для этого укажите в поле ввода любую часть названия типа и нажмите на клавишу **Enter**. В списке отобразятся только те типы объектов, которые соответствуют условиям поиска. Выберите требуемый тип двойным щелчком мыши.

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_obektov_2.png?raw=true "Рисунок 44 – Окно Выбор типа создаваемого объекта")</center>

<center><small>Рисунок 44 – Окно **Выбор типа создаваемого объекта**</center></small>

Откроется карточка объекта в <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования</a> (пример представлен на рис. 45). Заполните в карточке требуемые поля и на панели инструментов нажмите на кнопку **Сохранить** ![](https://github.com/gileva/citorus/blob/master/27.png?raw=true). Объект отобразится в выбранном контейнере.

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_obektov_3.png?raw=true "Рисунок 45 – Карточка объекта Сигнал о лесоизменении")</center>

<center><small>Рисунок 45 – Карточка объекта **Сигнал о лесоизменении**</center></small>

Объект также можно создать с помощью команды контекстного меню **Создать > Последние** (рис. 46). При выполнении данной команды открывается список типов, которые выбирались пользователями при создании объектов в последнее время. При выборе какого-либо типа открывается карточка объекта данного типа в режиме редактирования (рис. 46).

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_obektov_4.png?raw=true "Рисунок 46 – Команда Создать > Последние")</center>

<center><small>Рисунок 46 – Команда **Создать > Последние**</center></small>

<a name="Настройка-объекта-родителя"></a>
### Настройка объекта-родителя

Чтобы перейти в режим редактирования контейнера, выполните шаги, описанные в разделе <a href="#Редактирование-объектов">Редактирование объектов</a>.

<a name="Параметры-контейнера"></a>
#### Параметры контейнера

<a name="Подсчет-потомков"></a>
##### Подсчет потомков

С помощью <a href="#Мультиплицируемая-категория">мультиплицируемой категории</a> **Параметры контейнера** можно настроить отображение количества потомков в контейнере. Для этого в верхнем поле выберите значение **CountChild** (рис. 47). В нижнем поле установите значение **1**, чтобы данное условие выполнялось.

<center>![](https://github.com/gileva/citorus/blob/master/podschet_potomkov_1.png?raw=true "Рисунок 47 – Мультиплицируемая категория Параметры контейнера")</center>

<center><small>Рисунок 47 – Мультиплицируемая категория **Параметры контейнера**</center></small>

Сохраните карточку контейнера и обновите дерево объектов: сверните его и разверните снова. После этого справа от названия контейнера отобразится количество объектов, которое содержится в данном контейнере (рис. 48).

<center>![](https://github.com/gileva/citorus/blob/master/podschet_potomkov_2.png?raw=true "Рисунок 48 – Количество потомков")</center>

<center><small>Рисунок 48 – Количество потомков</center></small>

<a name="Порядок-сортировки-потомков"></a>
##### Порядок сортировки потомков

Чтобы настроить порядок сортировки объектов в контейнере, в верхнем поле <a href="#Мультиплицируемая-категория">мультиплицируемой категории</a> **Параметры контейнера** выберите значение **Order** (рис. 49).

В нижнем поле выберите способ сортировки:

- **AlfaUp** – текстовая сортировка от А до Я.
- **AlfaDown** – текстовая сортировка от Я до А.
- **PopUp** – сортировка от большего <a href="#Индекс-популярности">весового индекса</a> к меньшему. 
- **PopDown** – сортировка от меньшего <a href="#Индекс-популярности">весового индекса</a> к большему.

<center>![](https://github.com/gileva/citorus/blob/master/porjadok_sortirovki_potomkov_1.png?raw=true "Рисунок 49 – Количество потомков")</center>

<center><small>Рисунок 49 – Количество потомков</center></small>

<a name="CQL-запрос"></a>
#### CQL-запрос

При создании контейнер-родитель является пустым и не содержит дочерних элементов. Если в такой контейнер следует поместить *представления* каких-либо объектов (то есть сделать из пустого контейнера CQL-контейнер), в нем необходимо создать CQL-запрос.

Рассмотрим создание CQL-запроса на примере. Допустим, требуется создать следующий запрос: в корневой папке дерева элементов **КЕДР** найти все объекты типа **Сигнал о лесоизменении**, у которых в свойстве (поле) **Выдел** указано значение **2**.

Чтобы перейти в редактор CQL-запроса, в карточке контейнера следует нажать на кнопку **Открыть в редакторе** (рис. 49).

Чтобы указать контейнер для поиска объектов, в **Редакторе CQL** (рис. 50), в поле **Контейнер для поиска** следует нажать на кнопку ![](https://github.com/gileva/citorus/blob/master/32.png?raw=true).

<center>![](https://github.com/gileva/citorus/blob/master/cql_zapros_1.png?raw=true "Рисунок 50 – Редактор CQL")</center>

<center><small>Рисунок 50 – Редактор CQL</center></small>

В окне, представленном на рисунке 51, двойным щелчком мыши следует выбрать папку, в которой требуется выполнить поиск объектов. В рассматриваемом примере – корневую папку **КЕДР**.

<center>![](https://github.com/gileva/citorus/blob/master/cql_zapros_2.png?raw=true "Рисунок 51 – Выбор контейнера для поиска объектов")</center>

<center><small>Рисунок 51 – Выбор контейнера для поиска объектов</center></small>

Чтобы указать тип объектов для поиска, в поле **Фильтр по типу** (рис. 52, цифра 1) следует воспользоваться контекстным поиском по началу названия типа объектов. В результатах поиска следует выделить требуемый тип. В рассматриваемом примере – тип **Сигнал о лесоизменении**.

Чтобы указать наименование поля объекта, по значению в котором следует осуществлять выбор,  в блоке полей **Фильтр по свойствам** следует нажать на кнопку **Добавить** (рис. 52, цифра 2).

В таблицу ниже добавится пустая строка (рис. 52, цифра 3). Чтобы сделать в ней какое-либо поле активным, следует дважды щелкнуть по нему левой клавишей мыши.

В поле **Категория** следует выбрать категорию, то есть блок полей, в котором находится требуемое поле для поиска.

<center>![](https://github.com/gileva/citorus/blob/master/cql_zapros_3.png?raw=true "Рисунок 52 – Условия поиска объектов")</center>

<center><small>Рисунок 52 – Условия поиска объектов</center></small>

В поле **Свойство** (рис. 53) следует выбрать свойство, то есть поле, в котором следует осуществлять поиск. В рассматриваемом примере – **Выдел**.

В поле **Значение** следует указать значение данного поля, по которому необходимо отбирать объекты. В рассматриваемом примере – **2** (Выдел №2).

    В поле **Операнд** по умолчанию указано математическое значение **И**. При необходимости данное значение можно редактировать:

<center>![](https://github.com/gileva/citorus/blob/master/cql_zapros_4.png?raw=true "Рисунок 53 – Условия поиска объектов")</center>

<center><small>Рисунок 53 – Условия поиска объектов</center></small>

Чтобы сохранить CQL-запрос, на панели инструментов нажмите на кнопку ![](https://github.com/gileva/citorus/blob/master/27.png?raw=true) (рис. 52).

Чтобы в CQL-контейнере отобразились представления объектов, соответствующих созданному запросу, следует обновить дерево объектов. Для этого требуется свернуть и снова развернуть содержимое корневого контейнера.

<a name="Управление-объектами"></a>
## Управление объектами

Управление объектами системы осуществляется с помощью команд контекстного меню, которое открывается при щелчке мышью на любом объекте в дереве объектов (рис. 41). Некоторые команды контекстного меню дублируются на панели инструментов карточки объекта в <a href="#Управление-объектами-в-режиме-просмотра">режиме просмотра</a> и <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования</a>.

<a name="Создание-объектов"></a>
### Создание объектов

Чтобы создать в дереве объектов контейнер, выполните шаги, описанные в разделе <a href="#Создание-объектов-родителей">Создание объектов-родителей</a>.

Чтобы создать в дереве объектов объект, выполните шаги, описанные в разделе <a href="#Создание-объектов-потомков">Создание объектов-потомков</a>.

<a name="Редактирование-объектов"></a>
### Редактирование объектов

Чтобы открыть какой-либо контейнер/объект в режиме редактирования, выполните одно из следующих действий:

- В дереве объектов выделите требуемый контейнер/объект одним щелчком левой клавиши мыши. В новой вкладке откроется карточка данного контейнера/объекта в режиме просмотра (рис. 54). На панели инструментов нажмите на кнопку **Редактировать объект** ![](https://github.com/gileva/citorus/blob/master/26.png?raw=true).<br><br><center>![](https://github.com/gileva/citorus/blob/master/redaktirovanie_obektov_1.png?raw=true "Рисунок 54 – Карточка объекта в режиме просмотра")</center><br><br><center><small>Рисунок 54 – Карточка объекта в режиме просмотра</center></small>
- В дереве объектов выделите требуемый контейнер/объект правой клавишей мыши и выполните для него команду контекстного меню **Редактировать** (рис. 55).

<center>![](https://github.com/gileva/citorus/blob/master/upravlenie_obektami_v_rezhime_redaktirovanija_1.png?raw=true "Рисунок 55 – Команда Редактировать")</center>

<center><small>Рисунок 55 – Команда **Редактировать**</center></small>

Откроется страница редактирования контейнера/объекта (рис. 56). Описание инструментов данной страницы представлено в разделе <a href="#Управление-объектами-в-режиме-редактирования">Управление объектами в режиме редактирования</a>.

<center>![](https://github.com/gileva/citorus/blob/master/redaktirovanie_obektov_2.png?raw=true "Рисунок 56 – Страница редактирования контейнера")</center>

<center><small>Рисунок 56 – Страница редактирования контейнера</center></small>

<a name="Просмотр-запуск-объектов"></a>
### Просмотр/запуск объектов

Объекты системы делятся на два типа:

1. Простые информационные объекты.
2. Утилиты.

Если команда контекстного меню **Просмотр/Запуск - Просмотр объектов/Запуск утилит**  (рис. 57) выполняется для простого информационного объекта, то данный объект открывается в режиме просмотра.

Если команда выполняется для утилиты, то осуществляется запуск данной утилиты.

<center>![](https://github.com/gileva/citorus/blob/master/prosmotr_zapusk_1.png?raw=true "Рисунок 57 – Команда Просмотр/Запуск")</center>

<center><small>Рисунок 57 – Команда **Просмотр/Запуск**</center></small>

<a name="Копирование-объектов"></a>
### Копирование объектов

Создание контейнеров/объектов копированием можно выполнять в контейнерах любого типа, кроме CQL-контейнеров.

Команду **Копировать** можно выполнить одним из следующих способов:

- Выполните для контейнера/объекта, копию которого требуется создать в системе, команду контекстного меню **Копировать** (рис. 58).<br><center>![](https://github.com/gileva/citorus/blob/master/kopirovanie_obektov_1.png?raw=true "Рисунок 58 – Копирование объекта")</center><br> <center><small>Рисунок 58 – Копирование объекта</center></small>

- Откройте <a href="#Просмотр-подробной-информации">страницу подробной информации</a> об объекте и нажмите на кнопку **Копировать** ![](https://github.com/gileva/citorus/blob/master/24.png?raw=true).

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 59.

<center>![](https://github.com/gileva/citorus/blob/master/kopirovanie_obektov_2.png?raw=true "Рисунок 59 – Всплывающее сообщение")</center>

<center><small>Рисунок 59 – Всплывающее сообщение</center></small>

Выделите в дереве объектов контейнер, в который следует поместить копию, и выполните для него команду контекстного меню **Вставить копированием** (рис. 60).

<center>![](https://github.com/gileva/citorus/blob/master/kopirovanie_obektov_3.png?raw=true "Рисунок 60 – Вставка копии объекта")</center>

<center><small>Рисунок 60 – Вставка копии объекта</center></small>

<a name="Перемещение-объектов"></a>
### Перемещение объектов

Перемещение контейнеров/объектов системы можно выполнять между контейнерами любого типа, кроме CQL-контейнеров.

Команду **Перенести** можно выполнить одним из следующих способов:

- Выделите требуемый контейнер/объект в дереве правой клавишей мыши и выполните для него команду контекстного меню **Перенести** (рис. 61). <br> <center>![](https://github.com/gileva/citorus/blob/master/peremeshhenie_obektov_1.png?raw=true "Рисунок 61 – Команда **Перенести**")</center><br><center><small>Рисунок 61 – Команда **Перенести**</center></small>

- Откройте <a href="#Просмотр-подробной-информации">страницу подробной информации</a> об объекте и нажмите на кнопку **Перенести** ![](https://github.com/gileva/citorus/blob/master/25.png?raw=true).

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 62.

<center>![](https://github.com/gileva/citorus/blob/master/peremeshhenie_obektov_2.png?raw=true "Рисунок 62 – Всплывающее сообщение")</center>

<center><small>Рисунок 62 – Всплывающее сообщение</center></small>

Чтобы вставить объект в требуемый контейнер, выполните для данного контейнера команду **Вставить переносом** (рис. 63).

<center>![](https://github.com/gileva/citorus/blob/master/peremeshhenie_obektov_3.png?raw=true "Рисунок 63 – Вставка объекта")</center>

<center><small>Рисунок 63 – Вставка объекта</center></small>

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 64.

<center>![](https://github.com/gileva/citorus/blob/master/peremeshhenie_obektov_4.png?raw=true "Рисунок 64 – Всплывающее сообщение")</center>

<center><small>Рисунок 64 – Всплывающее сообщение</center></small>

<a name="Управление-связями-объектов"></a>
### Управление связями объектов

<a name="Создание-связи"></a>
#### Создание связи

Чтобы создать связь объекта/контейнера с каким-либо контейнером, выделите в дереве требуемый объект/контейнер правой клавишей мыши и выполните для него команду контекстного меню **Копировать** (рис. 65).

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_svjazi_1.png?raw=true "Рисунок 65 – Копирование объекта")</center>

<center><small>Рисунок 65 – Копирование объекта</center></small>

В правом верхнем углу экрана отобразится всплывающее сообщение, представленное на рисунке 66.

<center>![](https://github.com/gileva/citorus/blob/master/kopirovanie_obektov_2.png?raw=true "Рисунок 66 – Всплывающее сообщение")</center>

<center><small>Рисунок 66 – Всплывающее сообщение</center></small>

Затем выделите в дереве объектов контейнер, в котором необходимо создать связь, и выполните для него команду контекстного меню **Вставить связь** (рис. 67). Содержимое контейнера автоматически обновится и внутри него отобразится контейнер/объект связи. Контейнеры/объекты связи отмечаются в дереве иконками ![](https://github.com/gileva/citorus/blob/master/20.png?raw=true) и ![](https://github.com/gileva/citorus/blob/master/21.png?raw=true).

<center>![](https://github.com/gileva/citorus/blob/master/sozdanie_svjazi_3.png?raw=true "Рисунок 67 – Вставка  связи")</center>

<center><small>Рисунок 67 – Вставка связи</center></small>

<a name="Удаление-связи"></a>
#### Удаление связи

При удалении связи контейнера/объекта с контейнером можно:

- разорвать связь контейнера/объекта с контейнером;
- разорвать связь контейнера/объекта с контейнером, но создать в текущем контейнере физическую копию контейнера/объекта, с которым разрывается связь.

Чтобы разорвать связь контейнера/объекта с контейнером без создания копии, выполните одно из следующих действий:

- Выделите требуемый контейнер/объект в дереве правой клавишей мыши и выполните для него команду контекстного меню **Удалить связь > Удалить связь** (рис. 68).

<center>![](https://github.com/gileva/citorus/blob/master/udalenie_svjazi_1.png?raw=true "Рисунок 68 – Команда **Удалить связь**")</center>

<center><small>Рисунок 68 – Команда Удалить связь</center></small>

- Откройте <a href="#Просмотр-подробной-информации">страницу подробной информации</a> о требуемом контейнере и в строке **Приемные родители** нажмите на кнопку **Удалить связь** ![](https://github.com/gileva/citorus/blob/master/22.png?raw=true) (рис. 69).

<center>![](https://github.com/gileva/citorus/blob/master/udalenie_svjazi_4.png?raw=true "Рисунок 69 – Удаление связи с помощью страницы подробной информации")</center>

<center><small>Рисунок 69 – Удаление связи с помощью страницы подробной информации</center></small>

Чтобы разорвать связь контейнера/объекта с контейнером, но создать в этом контейнере его физическую копию, выполните для данного контейнера/объекта команду контекстного меню  **Удалить связь > Удалить связь, оставить копию** (рис. 68).

<a name="Переименование-объектов"></a>
### Переименование объектов

Изменить название объекта системы можно одним из следующих способов:

- В <a href="#Управление-объектами-в-режиме-редактирования">режиме редактирования объекта</a>.
- С помощью команды контекстного меню. Для этого выделите требуемый объект правой клавишей мыши и выполните команду **Переименовать** (рис. 70).

<center>![](https://github.com/gileva/citorus/blob/master/pereimenovanie_obektov_1.png?raw=true "Рисунок 70 – Команда **Переименовать**")</center>

<center><small>Рисунок 70 – Команда **Переименовать**</center></small>

В диалоговом окне, представленном на рисунке 71, укажите новое имя объекта и нажмите на кнопку **ОК**.

<center>![](https://github.com/gileva/citorus/blob/master/pereimenovanie_obektov_2.png?raw=true "Рисунок 71 – Диалоговое окно")</center>

<center><small>Рисунок 71 – Диалоговое окно</center></small>

<a name="Добавление-в-избранное"></a>
### Добавление в избранное 

В составе дерева объектов отображается контейнер (папка) пользователя, под учетной записью которого выполнен вход в систему в настоящий момент. В папку пользователя входит папка **Избранные**. В данной папке пользователь может создать набор связей (ссылок) на контейнеры/объекты системы, к которым он обращается в процессе работы чаще всего.

Чтобы поместить связь с каким-либо контейнером/объектом в папку **Избранное**, следует выделить его в дереве объектов правой клавишей мыши и выполнить команду контекстного меню **Открыть > Вкладку Избранные и добавить в неё текущий объект** (рис. 72).

<center>![](https://github.com/gileva/citorus/blob/master/dobavlenie_v_izbrannoe_1.png?raw=true "Рисунок 72 – Добавление связи объекта в папку **Избранные**")</center>

<center><small>Рисунок 72 – Добавление связи объекта в папку **Избранные**</center></small>

Чтобы созданный контейнер/объект связи отобразился в папке **Избранные**, следует обновить ее содержимое. Для этого необходимо свернуть и развернуть дочерние элементы папки.

<center>![](https://github.com/gileva/citorus/blob/master/dobavlenie_v_izbrannoe_2.png?raw=true "Рисунок 73 – Контейнер связи в папке **Избранные**")</center>

<center><small>Рисунок 73 – Контейнер связи в папке **Избранные**</center></small>

Если требуется удалить связь какого-либо контейнера/объекта с папкой **Избранные**, следует выполнить действия, описанные в разделе <a href="#Удаление-связи">Удаление связи</a>.

<a name="Открытие-новой-вкладки-с-деревом-потомков"></a>
### Открытие новой вкладки с деревом потомков

Если пользователь ведет работу с объектами только одного контейнера, администратор может настроить систему таким образом, чтобы для этого пользователя при входе в систему отображался только данный контейнер.

Для этого администратору следует войти в систему под учетной записью данного пользователя, выделить требуемый контейнер в дереве объектов правой клавишей мыши и выполнить команду контекстного меню **Открыть > Новую вкладку с деревом потомков** (рис. 72).

В новой вкладке откроется дерево объектов, которое содержит:

- выбранный контейнер со всем его содержимым,
- папку пользователя,
- корзину.

Затем администратору следует закрыть все другие вкладки системы, если они были открыты и выполнить команду главного меню **Настройки > Профили > Сохранить как** (рис. 74).

<center>![](https://github.com/gileva/citorus/blob/master/otkrytie_novoj_vkladki_1.png?raw=true "Рисунок 74 – Главное меню")</center>

<center><small>Рисунок 74 – Главное меню</center></small>

Откроется диалоговое окно, представленное на рисунке 75, в котором следует ввести название профиля. По умолчанию профилю присваивается имя в формате **<имя пользователя> new**. При необходимости после названия профиля можно поставить точку с запятой и указать комментарий к данному профилю. Чтобы сохранить профиль, следует нажать на кнопку **ОК**.

<center>![](https://github.com/gileva/citorus/blob/master/otkrytie_novoj_vkladki_2.png?raw=true "Рисунок 75 – Диалоговое окно")</center>

<center><small>Рисунок 75 – Диалоговое окно</center></small>

При следующем входе пользователя в систему для него будет загружена конфигурация дерева объектов, сохраненная в данном профиле.

<a name="Групповые-операции-с-объектами"></a>
### Групповые операции с объектами

Для групп объектов в системе можно выполнять следующие операции:

    - Копировать,
    - Перенести,
    - Вставить связь,
    - Удалить,
    - Удалить связь

<a name="Выделение-объектов"></a>
#### Выделение объектов

Чтобы выполнить какую-либо команду для группы объектов, данные объекты следует выделить в дереве. Для этого нажмите на клавиатуре клавишу **Shift** и проведите над требуемыми объектами курсором мыши. Объекты окрасятся в оранжевый цвет (рис. 76).

<center>![](https://github.com/gileva/citorus/blob/master/vydelenie_obektov_1.png?raw=true "Рисунок 76 – Выделенные объекты")</center>

<center><small>Рисунок 76 – Выделенные объекты</center></small>

<a name="Инвертирование-выделения-текущего-уровня"></a>
#### Инвертирование выделения текущего уровня

*Инвертирование* - это приведение объектов в противоположное состояние. Если в контейнере выделены какие-либо объекты, то при выполнении команды контекстного меню **Выделить > Инвертировать выделение текущего уровня** (рис. 77):

- отменяется выделение выбранных объектов,
- выделяются все остальные объекты в текущем контейнере.

<center>![](https://github.com/gileva/citorus/blob/master/invertirovat_vydelenie_1.png?raw=true "Рисунок 77 – Команды для выделения объектов")</center>

<center><small>Рисунок 77 – Команды для выделения объектов</center></small>

<a name="Снятие-выделения"></a>
#### Снятие выделения

Чтобы отменить выделение одного или нескольких объектов, выполните для них команду контекстного меню **Выделить > Снять выделение** (рис. 77).

<a name="Установка-указателя-текущего-местоположения"></a>
### Установка указателя текущего местоположения

Если в дереве объектов требуется выполнить поиск контейнера/объекта по его названию или по содержимому, выделите контейнер, для которого искомый объект/контейнер является дочерним. Если родительский контейнер неизвестен, выделите корневой контейнер.

Выполните для выделенного контейнера команду контекстного меню **Выделить > Установить указатель текущего местоположения** (рис. 77). Строка с названием контейнера окрасится в оранжевый цвет (рис. 78).

Затем откройте поисковую форму, как это описано в разделе `Поиск объектов системы`.

<center>![](https://github.com/gileva/citorus/blob/master/ustanovka_ukazatelja_1.png?raw=true "Рисунок 78 – Переход к поисковой форме")</center>

<center><small>Рисунок 78 – Переход к поисковой форме</center></small>

<a name="Удаление-объектов"></a>
### Удаление объектов

Удаление контейнеров/объектов в системе можно выполнять следующими способами:

- **С возможностью восстановления** - способ, который используется в системе по умолчанию. После удаления объекты помещаются в корзину, из которой при необходимости их можно восстановить.
- **Без возможности восстановления** - объекты удаляются из системы насовсем, минуя корзину. Данные объекты не подлежат восстановлению.

<a name="Удаление"></a>
#### Удаление

Чтобы удалить один или несколько контейнеров и/или объектов системы, выделите их правой клавишей мыши и выполните команду контекстного меню **Удалить** (рис. 79).

<center>![](https://github.com/gileva/citorus/blob/master/udalenie_obektov_1.png?raw=true "Рисунок 79 – Команда контекстного меню **Удалить**")</center>

<center><small>Рисунок 79 – Команда контекстного меню **Удалить**</center></small>

Откроется диалоговое окно, представленное на рисунке 80. Если выбранные контейнеры/объекты следует удалить, минуя корзину, поставьте соответствующий флажок. Если объекты следует отправить в корзину, данный флажок устанавливать не нужно. Нажмите на кнопку **Удалить**.

<center>![](https://github.com/gileva/citorus/blob/master/udalenie_obektov_2.png?raw=true "Рисунок 80 – Диалоговое окно")</center>

<center><small>Рисунок 80 – Диалоговое окно</center></small>

<a name="Восстановление-из-корзины"></a>
#### Восстановление из корзины

Чтобы восстановить один или несколько контейнеров и/или объектов из корзины, разверните содержимое папки **Корзина** (рис. 81) нажатием на кнопку ![](https://github.com/gileva/citorus/blob/master/23.png?raw=true). Выделите требуемые контейнеры/объекты <a href="#Выделение-объектов">стандартным способом</a> и выполните для них команду контекстного меню **Восстановить**.

Восстановленные контейнеры/объекты переместятся в то место дерева объектов, в котором они находились до удаления.

<center>![](https://github.com/gileva/citorus/blob/master/udalenie_obektov_3.png?raw=true "Рисунок 81 – Управление объектами в корзине")</center>

<center><small>Рисунок 81 – Управление объектами в корзине</center></small>

<a name="Удаление-из-корзины"></a>
#### Удаление из корзины

Если один или несколько контейнеров и/или объектов системы, которые расположены в корзине, следует удалить из системы, выполните для них команду контекстного меню **Удалить окончательно** (рис. 81).

<a name="Права-доступа"></a>
### Права доступа

Чтобы определить права доступа к какому-либо контейнеру/объекту системы, выделите его правой клавишей мыши и выполните команду контекстного меню **Права доступа** (рис. 82).

<center>![](https://github.com/gileva/citorus/blob/master/prava_dostupa_1.png?raw=true "Рисунок 82 – Команда Права доступа")</center>

<center><small>Рисунок 82 – Команда **Права доступа**</center></small>

Откроется страница редактирования прав (рис. 83), которая содержит следующие настройки:

- **Наследовать права** – если флажок установлен, контейнер/объект наследует права родительского контейнера.
- **Чтение** – группа настроек для определения прав на просмотр объекта. Если у пользователя нет данного права, то данный объект не отображается для него в дереве объектов системы.
- **Запись** – группа настроек для определения прав на <a href="#Редактирование-объектов">редактирование объекта</a>.<br><br><center>![](https://github.com/gileva/citorus/blob/master/prava_dostupa_2.png?raw=true "Рисунок 83 – Настройки прав доступа")</center><br><center><small>Рисунок 83 – Настройки прав доступа</center></small><br>
- **Исполнение** (рис. 84) – группа настроек для объектов-утилит. Определяет права на <a href="#Просмотр-запуск-объектов">запуск данных объектов</a>.
- **Удаление** – группа настроек для определения прав на <a href="#Удаление-объектов">удаление объекта</a>.
- **Назначение прав доступа** – группа настроек для определения прав на изменение прав доступа к объекту.<br><br><center>![](https://github.com/gileva/citorus/blob/master/prava_dostupa_3.png?raw=true "Рисунок 84 – Настройки прав доступа")</center><br><center><small>Рисунок 84 – Настройки прав доступа</center></small>

В группах настроек, перечисленных выше, содержится идентичный набор инструментов, с помощью которого можно назначить права указанным пользователям/группам пользователей или всем пользователям/группам пользователей, кроме указанных:

- **Пользователи** – если право следует назначить или ограничить для одного или нескольких пользователей системы, которые входят в разные пользовательские группы, то в данном поле необходимо указать имена этих пользователей. Имена следует выбрать из выпадающего списка, который разворачивается при щелчке мышью на данном поле. Если список пользователей слишком велик, следует воспользоваться контекстным поиском: при вводе в поле любой части имени пользователя список сократится до набора имен, соответствующих указанным условиям поиска.

- **Группы** – если право следует назначить или ограничить для одной или нескольких групп пользователей, то в данном поле необходимо указать имена этих групп. Имена следует выбрать из выпадающего списка, который разворачивается при щелчке мышью на данном поле. Если список пользователей слишком велик, следует воспользоваться контекстным поиском: при вводе в поле любой части имени пользователя список сократится до набора имен, соответствующих указанным условиям поиска.

- **Остальные** – данный флажок следует установить, если в полях **Пользователи** и **Группы** указаны пользователи/группы пользователей, для которых следует ограничить доступ к текущему контейнеру/объекту.

<a name="Индекс-популярности"></a>
### Индекс популярности

В системе существуют два способа сортировки объектов в контейнерах:

- **В алфавитном порядке** – от А до Я или от Я до А.
- **По весовому индексу** – весовой индекс назначается каждому объекту автоматически при его создании. Текущий весовой индекс объекта отображается на <a href="#Просмотр-подробной-информации">странице подробной информации об объекте</a>.

Выбор способа сортировки объектов в контейнере осуществляется на странице редактирования данного контейнера, в группе полей **Параметры контейнера** (см. раздел <a href="#Редактирование-объектов">Редактирование объектов</a>).

Для изменения весового индекса объектов, и, как следствие, порядка их расположения в контейнере, предназначены следующие команды контекстного меню (рис. 85):

- **Нравится** – увеличить весовой индекс объекта и поменять его местами с предыдущим.
- **Не нравится** – уменьшить весовой индекс объекта и поменять его местами с последующим.
- **Поднять вверх** – сделать объект первым в списке дочерних элементов данного контейнера.
- **Опустить вниз** – сделать объект последним в списке дочерних элементов данного контейнера.
- **Зафиксировать текущий вес** – если для объекта выполнена данная команда, то команды **Нравится/Не нравится** и **Поднять вверх/Опустить вниз** для него не выполняются. Положение объекта при этом не фиксируется, и другие объекты могут смещать данный объект вверх/вниз, получая больший/меньший вес.
- **Отключить фиксацию веса** – отменить действие команды **Зафиксировать текущий вес**.

<center>![](https://github.com/gileva/citorus/blob/master/indeks_populjarnosti_1.png?raw=true "Рисунок 85 – Команды для изменения весового индекса объекта")</center>

<center><small>Рисунок 85 – Команды для изменения весового индекса объекта</center></small>

<a name="Управление-версиями"></a>
### Управление версиями

При каждом редактировании контейнера/объекта в системе сохраняется его предыдущая версия.

Чтобы просмотреть список версий какого-либо контейнера/объекта, выполните одно из следующих действий:

- Выполните для требуемого контейнера/объекта команду контекстного меню **Свойства объекта > Версии > Управление версиями** (рис. 86). Страница управления версиями откроется в новой вкладке (рис. 70).<br><center>![](https://github.com/gileva/citorus/blob/master/upravlenie_versijami_1.png?raw=true "Рисунок 86 – Команды для управления версиями объекта")</center><br> <center><small>Рисунок 86 – Команды для управления версиями объекта</center></small>

- Выделите требуемый контейнер/объект левой клавишей мыши. В новой вкладке откроется карточка данного контейнера/объекта (рис. 87). На панели инструментов в выпадающем списке **Действие** выберите команду **Управление версиями объекта**.<br><center>![](https://github.com/gileva/citorus/blob/master/upravlenie_versijami_2.png?raw=true "Рисунок 87 – Панель инструментов карточки контейнера/объекта")</center><br> <center><small>Рисунок 87 – Панель инструментов карточки контейнера/объекта</center></small>

В новой вкладке откроется страница управления версиями (рис. 88), которая содержит следующие инструменты:

1.  **Фильтр** – поле для контекстного поиска по названию версии. По умолчанию каждой версии присваивается название в формате **<Название объекта><Время сохранения версии><Дата сохранения версии><Часовой пояс>**.
2. **Список версий**.
3. **Командные кнопки**:
 - **Просмотр** – открыть в новом окне версию объекта, выделенного в списке.
 - **Восстановить** – заменить текущую версию на версию, выделенную в списке.
 - **Удалить** – удалить версию, выделенную в списке.

<center>![](https://github.com/gileva/citorus/blob/master/upravlenie_versijami_3.png?raw=true "Рисунок 88 – Страница управления версиями")</center>

<center><small>Рисунок 88 – Страница управления версиями</center></small>

<a name="Просмотр-подробной-информации"></a>
### Просмотр подробной информации

Чтобы просмотреть подробную информацию о каком-либо контейнере/объекте системы, выполните одно из следующих действий:

- Выделите требуемый контейнер/объект правой клавишей мыши и выполните для него команду контекстного меню **Свойства объекта > Информация об объекте** (рис. 89). Страница с подробной информацией о контейнере/объекте откроется в новой вкладке (рис. 91).

<center>![](https://github.com/gileva/citorus/blob/master/udalenie_svjazi_2.png?raw=true "Рисунок 89 – Команда **Информация об объекте**")</center>

<center><small>Рисунок 89 – Команда **Информация об объекте**</center></small>

- Выделите требуемый контейнер/объект левой клавишей мыши. В новой вкладке откроется карточка данного контейнера/объекта (рис. 90). На панели инструментов в выпадающем списке **Действие** выберите команду **Подробная информация**.<br><br> <center>![](https://github.com/gileva/citorus/blob/master/udalenie_svjazi_3.png?raw=true "Рисунок 90 – Панель инструментов карточки контейнера/объекта")</center><br> <center><small>Рисунок 90 – Панель инструментов карточки контейнера/объекта</center></small><br> В новой вкладке откроется страница с подробной информацией о контейнере/объекте (рис. 91).

<center>![](https://github.com/gileva/citorus/blob/master/prosmotr_informacii_3.png?raw=true "Рисунок 91 – Страница подробной информации об объекте")</center>

<center><small>Рисунок 91 – Страница подробной информации об объекте</center></small>

На странице представлены следующие характеристики объекта:

- **Идентификатор объекта**.
- **Имя объекта**.
- **Тип объекта**.
- **Родитель** – папка, в которой объект расположен физически.
- **Приемные родители** – если для объекта создана связь с каким-либо контейнером системы, в данной строке указано название этого контейнера (подробнее см. <a href="#Управление-связями-объектов">Управление связями объектов</a>). 
- **Создан** – дата и время создания объекта в системе.
- **Последнее изменение** – дата и время последнего изменения объекта.
- **Весовой индекс** – см. раздел <a href="#Индекс-популярности">Индекс популярности</a>.
- **JSON представление объекта** – информация для разработчиков.

Страница подробной информации об объекте содержит следующие командные кнопки:<br>
![](https://github.com/gileva/citorus/blob/master/24.png?raw=true) **Копировать объект в буфер обмена** – см. раздел <a href="#Копирование-объектов">Копирование объектов</a>.<br>
![](https://github.com/gileva/citorus/blob/master/25.png?raw=true) **Перенести объект** – см. раздел <a href="#Перемещение-объектов">Перемещение объектов</a>.<br>
![](https://github.com/gileva/citorus/blob/master/22.png?raw=true) **Разорвать связь** – разорвать связь объекта с приемным родителем (см. раздел <a href="#Удаление-связи">Удаление связи</a>).

<a name="Управление-объектами-в-режиме-просмотра"></a>
## Управление объектами в режиме просмотра

При выделении какого-либо контейнера/объекта левой клавишей мыши данный объект открывается в режиме просмотра (рис. 92).

<center>![](https://github.com/gileva/citorus/blob/master/upravlenie_obektami_v_rezhime_prosmotra_1.png?raw=true "Рисунок 92 – Режим просмотра")</center>

<center><small>Рисунок 92 – Режим просмотра</center></small>

Для управления объектами в режиме просмотра предназначена панель инструментов, на которой расположены:

- Кнопка **Редактировать объект** ![](https://github.com/gileva/citorus/blob/master/26.png?raw=true) – для перехода в <a href="#Управление-объектами-в-режиме-редактирования">режим редактирования объекта</a>.
- Выпадающий список **Действие**, с помощью которого можно выполнить следующие команды:
  - <a href="#Управление-версиями">Управление версиями объекта</a>.
  - <a href="#Просмотр-подробной-информации">Подробная информация</a>.
  - **Протокол** – при выполнении данной команды открывается страница (рис. 93), на которой представлена информация об изменениях объекта: дата и время изменения; имя пользователя, который изменил объект; действие, которое было выполнено с объектом (перенос, редактирование и т.д.). Данная информация предназначена только для просмотра и недоступна для редактирования.

<center>![](https://github.com/gileva/citorus/blob/master/upravlenie_obektami_v_rezhime_prosmotra_2.png?raw=true "Рисунок 93 – Протокол")</center>

<center><small>Рисунок 93 – Протокол</center></small>

<a name="Управление-объектами-в-режиме-редактирования"></a>
## Управление объектами в режиме редактирования

Чтобы перейти в режим редактирования объекта, выполните действия, описанные в разделе <a href="#Редактирование-объектов">Редактирование объектов</a>.

<a name="Панель-инструментов"></a>
### Панель инструментов

Для управления объектами в режиме редактирования предназначена панель инструментов (рис. 94), на которой расположены:

- Кнопки:
  - **Сохранить** ![](https://github.com/gileva/citorus/blob/master/27.png?raw=true) – сохранить изменения, которые были внесены в карточку объекта в режиме ее редактирования.
  - **Сохранить как** ![](https://github.com/gileva/citorus/blob/master/28.png?raw=true) – создать копию объекта и поместить ее в тот же контейнер, в котором находится текущий объект. При выполнении команды **Сохранить как** открывается диалоговое окно, в котором необхоимо указать название создаваемого объекта.
  - **Очистить поля** ![](https://github.com/gileva/citorus/blob/master/29.png?raw=true) – очистить все поля карточки объекта, кроме полей **Название** и **Описание (всплывающая подсказка)**.
  - **Редактировать тип** ![](https://github.com/gileva/citorus/blob/master/30.png?raw=true) – открыть страницу редактирования выбранного типа (см. раздел `Создание/редактирование типов объектов`).
  - **Редактировать категорию** ![](https://github.com/gileva/citorus/blob/master/31.png?raw=true) – открыть страницу выбранной категории объекта (см. раздел `Создание/редактирование категорий`).
- Выпадающий список **Действие**, с помощью которого можно выполнить следующие команды:
  - <a href="#Управление-версиями">Управление версиями объекта</a>.
  - <a href="#Просмотр-подробной-информации">Подробная информация</a>.
  - **Протокол** – при выполнении данной команды открывается страница (рис. 93), на которой представлена информация об изменениях объекта: дата и время изменения; имя пользователя, который изменил объект; действие, которое было выполнено с объектом (перенос, редактирование и т.д.). Данная информация предназначена только для просмотра и недоступна для редактирования.

<center>![](https://github.com/gileva/citorus/blob/master/upravlenie_obektami_v_rezhime_redaktirovanija_2.png?raw=true "Рисунок 94 – Команда **Редактировать**")</center>

<center><small>Рисунок 94 – Режим редактирования</center></small>

<a name="Ввод-и-валидация-значений"></a>
### Ввод и валидация значений

Поля, которые содержит карточка контейнера/объекта, создаются и настраиваются в `редакторе категорий.` Для каждого поля в редакторе указывается тип: выпадающий список, поле для ввода текстовых данных, даты, времени и т.д. Кроме того, для каждого поля настраивается *валидация* – правила, по которым следует заполнять данное поле.

Если валидация настроена, то в режиме редактирования контейнера/объекта поля обозначаются следующими цветовыми индикаторами (рис. 95):

- **Оранжевый** – поле обязательно для заполнения.
- **Зеленый** – в поле введено корректное значение.<br><br><center>![](https://github.com/gileva/citorus/blob/master/vvod_i_validacija_znachenij_1.png?raw=true "Рисунок 95 – Цветовые индикаторы")</center><br><center><small>Рисунок 95 – Цветовые индикаторы</center></small><br>
- **Красный** – в поле введено некорректное значение, при этом была сделана попытка сохранить объект с данным значением.
 
<center>![](https://github.com/gileva/citorus/blob/master/vvod_i_validacija_znachenij_2.png?raw=true "Рисунок 96 – Ввод некорректного значения")</center>

<center><small>Рисунок 96 – Ввод некорректного значения</center></small>

<a name="Мультиплицируемая-категория"></a>
### Мультиплицируемая категория

Блоки для ввода данных, которые содержит карточка контейнера/объекта, на языке системы называются *категориями*. Категории создаются и настраиваются в `редакторе типов объектов`.

Если для какой-либо категории в `редакторе типов` выбран тип **Мультиплицируемая категория**, то в режиме редактирования контейнера/объекта пользователь может выполнить ввод значений в поля данной категории несколько раз.

Для этого слева от **Мультиплицируемой категории** следует нажать на кнопку ![](https://github.com/gileva/citorus/blob/master/23.png?raw=true) (рис. 97). Ниже будет создана идентичная категория.

<center>![](https://github.com/gileva/citorus/blob/master/multipliciruemaja_kategorija_1.png?raw=true "Рисунок 97 – Мультиплицируемая категория*")</center>

<center><small>Рисунок 97 – Мультиплицируемая категория*</center></small>


ЖУРНАЛ ИЗМЕНЕНИЙ
====================

 Версия        | Дата               | Исправления 
:------------- |:------------------:| -----------:
 v.1.000       |06.06.2017          |Размещение исходной версии документа  
               |                    |             
               |                    |             



